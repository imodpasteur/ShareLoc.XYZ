{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils.js","webpack:///./src/App.vue?7e02","webpack:///./src/components/ResourceItemInfo.vue?b618","webpack:///./src/components/TagInputField.vue?992b","webpack:///./src/components/FilePreviewField.vue?b150","webpack:///./src/components/Upload.vue?d628","webpack:///./src/components/Badges.vue?3cd2","webpack:///./src/components/UploadForm.vue?2250","webpack:///./src/App.vue?ee01","webpack:///./src/store.js","webpack:///./src/bioEngine.js","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/registerServiceWorker.js","webpack:///./src/views/Home.vue?9816","webpack:///./src/components/ResourceItemSelector.vue?f651","webpack:///src/components/ResourceItemSelector.vue","webpack:///./src/components/ResourceItemSelector.vue?a348","webpack:///./src/components/ResourceItemSelector.vue?f174","webpack:///./src/components/ResourceItemList.vue?dee0","webpack:///./src/components/AppIcons.vue?c024","webpack:///src/components/AppIcons.vue","webpack:///./src/components/AppIcons.vue?ce95","webpack:///./src/components/AppIcons.vue?5ab0","webpack:///./src/components/ResourceItemCard.vue?b055","webpack:///./src/components/Badges.vue?0db4","webpack:///src/components/Badges.vue","webpack:///./src/components/Badges.vue?ebc9","webpack:///./src/components/Badges.vue?1168","webpack:///src/components/ResourceItemCard.vue","webpack:///./src/components/ResourceItemCard.vue?d311","webpack:///./src/components/ResourceItemCard.vue?758d","webpack:///src/components/ResourceItemList.vue","webpack:///./src/components/ResourceItemList.vue?929a","webpack:///./src/components/ResourceItemList.vue?cc4c","webpack:///./src/components/ResourceItemInfo.vue?0301","webpack:///./src/components/Attachments.vue?4ae8","webpack:///src/components/Attachments.vue","webpack:///./src/components/Attachments.vue?0042","webpack:///./src/components/Attachments.vue?75ac","webpack:///src/components/ResourceItemInfo.vue","webpack:///./src/components/ResourceItemInfo.vue?9b03","webpack:///./src/components/ResourceItemInfo.vue?65d6","webpack:///./src/components/Upload.vue?f421","webpack:///./src/components/TagInputField.vue?7fec","webpack:///src/components/TagInputField.vue","webpack:///./src/components/TagInputField.vue?4343","webpack:///./src/components/TagInputField.vue?19a3","webpack:///./src/components/DropFilesField.vue?e21a","webpack:///src/components/DropFilesField.vue","webpack:///./src/components/DropFilesField.vue?78ab","webpack:///./src/components/DropFilesField.vue","webpack:///./src/components/UploadForm.vue?b040","webpack:///./src/components/FilePreviewField.vue?8dc4","webpack:///src/components/FilePreviewField.vue","webpack:///./src/components/FilePreviewField.vue?7c55","webpack:///./src/components/FilePreviewField.vue?df59","webpack:///./src/components/CitationInputField.vue?0673","webpack:///src/components/CitationInputField.vue","webpack:///./src/components/CitationInputField.vue?aa7e","webpack:///./src/components/CitationInputField.vue?3f18","webpack:///./src/components/AuthorInputField.vue?b53e","webpack:///src/components/AuthorInputField.vue","webpack:///./src/components/AuthorInputField.vue?aafc","webpack:///./src/components/AuthorInputField.vue?18c4","webpack:///src/components/UploadForm.vue","webpack:///./src/components/UploadForm.vue?e4c5","webpack:///./src/components/UploadForm.vue?cc32","webpack:///src/components/Upload.vue","webpack:///./src/components/Upload.vue?cbfb","webpack:///./src/components/Upload.vue?711d","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?493c","webpack:///./src/views/Home.vue?c853","webpack:///./src/components/Viewer.vue?d766","webpack:///src/components/Viewer.vue","webpack:///./src/components/Viewer.vue?b948","webpack:///./src/components/Viewer.vue?82aa","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/views/About.vue?398f","webpack:///./src/components/ResourceItemCard.vue?956b","webpack:///./src/components/ResourceItemSelector.vue?1f6d","webpack:///./src/components/AppIcons.vue?19e0","webpack:///./src/views/Home.vue?f453","webpack:///./src/components/Attachments.vue?5558","webpack:///./src/components/AuthorInputField.vue?40f0","webpack:///./src/components/Markdown.vue?239e","webpack:///src/components/Markdown.vue","webpack:///./src/components/Markdown.vue?85fc","webpack:///./src/components/Markdown.vue","webpack:///./src/components/Viewer.vue?be7b","webpack:///./src/views/About.vue?16d9","webpack:///src/views/About.vue","webpack:///./src/views/About.vue?f1da","webpack:///./src/views/About.vue?00a0","webpack:///./src/components/ResourceItemList.vue?ae3b","webpack:///./src/components/CitationInputField.vue?8285"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","MAX_RDF_VERSION","randId","Math","random","toString","substr","longestCommonSubstring","string1","string2","s1","s2","substringMatrix","Array","fill","map","columnIndex","rowIndex","longestSubstringLength","longestSubstringColumn","longestSubstringRow","longestSubstring","fetchFile","url","filename","showMessage","axios","method","responseType","onDownloadProgress","progressEvent","status","loaded","total","round","console","log","response","split","pop","blob","Blob","file","File","type","lastModified","Date","now","resolveDOI","doi","fetch","ok","json","values","filter","v","Error","dataURLtoFile","dataurl","arr","mime","match","bstr","atob","u8arr","Uint8Array","charCodeAt","resizeImage","settings","maxSize","reader","FileReader","image","Image","canvas","document","createElement","dataURItoBlob","dataURI","bytes","indexOf","unescape","max","ia","resize","width","height","getContext","drawImage","dataUrl","toDataURL","Promise","no","onload","readerEvent","src","target","readAsDataURL","getAbsoluteUrl","baseUrl","endsWith","startsWith","URL","href","getFullRdfFromDeposit","rdf","resolveUrl","rdf_source","text","yamlStr","fullRdf","yaml","load","id","conversions","root_url","join","documentation","covers","cover","config","assign","samples","attachments","sample","files","f","download_url","potreeFile","preview_url","csv","views","view","isArray","image_name","additionalNote","rdfToMetadata","docstring","spdxLicenseList","license","related_identifiers","includes","relation","identifier","resource_type","scheme","links","link","encodeURIComponent","_rdf_file","authors","creators","author","affiliation","orcid","description","_deposit","keywords","metadata","title","access_right","upload_type","publication_date","toISOString","concat","tags","notes","communities","depositionToRdf","deposition","k","replace","rdfFile","idf","zenodoFileRegex","matches","exec","fileName","bucket","error","decodeURIComponent","conceptrecid","stats","source","owners","_doi","_conceptdoi","conceptdoi","ZenodoClient","baseURL","clientId","isSandbox","this","lastUserId","callbackUrl","credential","credentialKey","userIdKey","localStorage","getItem","parseInt","lastCredential","JSON","parse","getCredential","user_id","setItem","access_token","then","e","removeItem","login","expiryTolerance","create_at","expires_in","confirm","community","page","query","sort","size","typeKeywords","additionalKeywords","kw","results","hits","warn","setTimeout","getResourceItems","resourceItems","item","resolve","reject","loginWindow","open","focus","countDown","timer","setInterval","closed","clearInterval","close","randomState","loggedIn","handleLogin","event","removeEventListener","state","user","stringify","addEventListener","headers","body","depositionInfo","depositionId","details","errors","message","newName","progressCallback","bucketUrl","options","onUploadProgress","progress","put","alert","submitted","doi_url","compareVersions","v1","comparator","v2","v1parts","v2parts","maxLen","part1","part2","cmp","eval","debounce","func","wait","immediate","timeout","context","args","arguments","later","callNow","clearTimeout","concatAndResolveUrl","url1","url2","url3","rel2abs","base_url","test","substring","location","protocol","charAt","replaceAllRelByAbs","html","att","entityEnd","ents","charMap","any","ae","string","all_chars_lowercase","toLowerCase","all_chars_uppercase","toUpperCase","RE_res","char_lowercase","char_uppercase","RE_sub","by","group1","group2","group3","slashRE","RegExp","dotRE","by2","cr","selector","attribute","marker","delimiter","end","re1","re2","re3","cri","front","flags","handleAttr","at1","at2","at3","g1","g2","_vm","_h","$createElement","_c","_self","attrs","staticClass","staticStyle","siteConfig","site_logo","class","showMenu","on","$event","bookmarks","scopedSlots","_u","fn","proxy","_l","index","showResourceItemInfo","_v","_s","uploadBookmarks","downloadBookmarks","clearBookmarks","_e","contribute_url","$route","style","marginTop","showNavbar","staticRenderFns","Vue","use","Vuex","params","paramsObj","fromEntries","URLSearchParams","entries","zenodo_config","use_sandbox","table_view","columns","allTags","resource_categories","cat","tagCates","tag_categories","tag","zenodoBaseURL","normalizeItem","_normalized","icon","encodeURI","allLabels","labels","applications","uploaded_by","excluded_tags","from","Set","label","apps","unshift","show_on_hover","git_repo","badges","ext","ext_type","label_type","co2","run","spec","notifyImJoyReady","notifyImJoyFailed","imjoyReady","init","setupBioEngine","imjoy","api","client_id","sandbox_client_id","production_client_id","store","Store","loadedUrl","allApps","zenodoClient","enabled","eventBus","actions","toggleNavbar","enable","client","fetchResourceItems","manifest_url","repo","transform","collection","items","commit","repo_manifest","collections","partners","duplicates","forEach","resources","rawResourceItems","bookmarkstr","bookmarkIds","mutations","setImJoy","addBookmark","ids","removeBookmark","addResourceItem","userId","getUserId","removeResourceItem","normalizeItems","setting","find","default_links","loadImJoyBasicApp","process_url_query","show_window_title","show_progress_bar","show_empty_window","hide_about_imjoy","menu_style","window_style","main_container","menu_container","window_manager_container","imjoy_api","app","origin","pathname","pm","default_base_frame","$on","changing","iframes","querySelectorAll","iframe","pointerEvents","addMenuItem","callback","uri","prompt","loadPlugin","reloadPluginRecursively","queryString","search","urlParams","engine","enginePlugin","createEngine","nbUrl","catch","runAppForAllItems","allItems","showLoader","passive","createWindow","getPlugin","plugin","referer","runAppForItem","cancel","loadingComponent","computed","methods","$emit","$store","$router","component","register","process","ready","registered","cached","updatefound","updated","offline","switchToProduction","switchToSandbox","selectedPartner","background_image","splash_title","splash_subtitle","feature","showAboutPartner","ref","resourceCategories","active","selectedCategory","updateQueryTags","list","outline_color","tagCategories","screenWidth","searchTags","updateResourceItemList","displayModeChanged","removePartner","selectedItems","displayMode","tooltip","logo","footnote","dialogWindowConfig","fullscreen","adaptive_size","isTouchDevice","maximizeDialogWindow","closeDialogWindow","selectedDialogWindow","minimizeDialogWindow","slot","w","selectWindow","wdialog","directives","rawName","expression","window_id","infoDialogFullscreen","maximizeInfoWindow","closeInfoWindow","infoDialogTitle","showInfoDialogMode","showUploadDialog","viewerUrl","currentDepositionId","infoMarkdownContent","infoMarkdownUrl","selectedResourceItem","_focus","subscribe_url","_k","keyCode","loading","filteredTags","updateSelectedTags","getFilteredTags","props","option","model","$$v","selectedTags","matchingAll","freeTextMode","categories","grouped","addTagSelection","keys","switchDisplayMode","default","String","showDisplayMode","Boolean","watch","newType","applySearch","newTags","is_same","mounted","fullLabelList","cate","groupKeys","other","currentPage","itemsPerPage","row","badge","totalItems","enableHover","boxShadow","resourceItem","affil","etAl","nativeOn","selectTag","undefined","createEvent","components","Badges","AppIcons","affliations","template","getElementById","ResourceItemCard","filteredItems","isSafari","beforeDestroy","minfo","maxDescriptionLetters","contact_email","showAttachments","docs","url_text","resourceId","att_val","convert2Array","col","field","sortable","csvFile","max_length","focusTarget","newTarget","availableColumns","normalizedAttachments","converted","el","scrollIntoView","obj","constructor","markdown","Markdown","Attachments","showSource","formatedCitation","cite","cites","citations","stepIndex","rdfYaml","gettingStarted","logout","startUpload","URI4Load","loadRdfFromURL","submitRDF","formatedModelYaml","sampleName","similarDeposits","createOrUpdateDeposit","sameNameDeposits","requestedJoinCommunity","uploadStatus","uploadProgress","editedFiles","depositId","publishedDOI","publishedUrl","prereserveDOI","prereserveUrl","uploadMode","uploaded","publishDeposition","help","isRequired","allow_new","placeholder","required","created","updateFiles","preventDefault","removeFile","clearFiles","$forceUpdate","trimEllip","str","jsonFields","formSubmitted","addNewSample","addNewChannel","currentSample","activeSample","$set","stopPropagation","removeSample","channels","totalSize","fileSelected","removeScreenshot","previewSample","enableConversion","getSampleFiles","commitValue","isDatasetValid","screenshots","newVal","channel","isNaN","sampleChannels","sampleRunningNumber","currentFiles","markFileConversion","saveFileName","convert","locFiles","convertFileName","citation","removeCitation","addNewCitation","removeAuthor","addNewAuthor","TagInputField","DropFilesField","FilePreviewField","CitationInputField","AuthorInputField","expandOnHover","expandWithDelay","reduce","initializeRdfForm","initRdf","$root","transformFields","typeMapping","fields","format_version","UploadForm","dropFiles","dispatch","updateDepositId","startFromDepositURL","rdfType","sandbox","production","go","currentRoute","$nextTick","notebook","dataset","application","titleCase","connectApps","self","_linked","$buefy","dialog","hasIcon","confirmText","_colab_url","downloads","label_short","ResourceItemList","ResourceItemSelector","ResourceItemInfo","upload","Upload","about","About","initialized","draggable","dialogWindows","selectedWindowsStack","infoCommentBoxTitle","currentTags","combined","$off","updateSize","goHome","partner","switchPartner","default_type","addWindow","$modal","show","closing","showAboutDialog","showEditDialog","about_url","updateStatus","hide","idx","enter","scrollTo","models","updateViewByUrlQuery","hasQuery","showProgress","duration","onAction","actionText","queue","snackbar","showWindowDialog","closeWindowDialog","getLabelCount","filteredModels","getModelsCount","_m","containerId","previewFile","viewer","fileCache","currentFile","VueRouter","routes","path","Home","Viewer","router","base","ValidationProvider","rules","rule","extend","messages","vmodal","Buefy","productionTip","render","h","App","$mount","domProps","content","renderer","highlight","node","setAttribute","newBaseUrl","newUrl","showDocsUrl","version"],"mappings":"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","file":"js/app.09cb293b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import axios from \"axios\";\nimport yaml from \"js-yaml\";\nimport spdxLicenseList from \"spdx-license-list/full\";\n\nexport const MAX_RDF_VERSION = \"0.3.2\";\n\nexport function randId() {\n  return Math.random()\n    .toString(36)\n    .substr(2, 10);\n}\n\n// Copied from here: https://github.com/trekhleb/javascript-algorithms/blob/master/src/algorithms/string/longest-common-substring/longestCommonSubstring.js\nexport function longestCommonSubstring(string1, string2) {\n  // Convert strings to arrays to treat unicode symbols length correctly.\n  // For example:\n  // ''.length === 2\n  // [...''].length === 1\n  const s1 = [...string1];\n  const s2 = [...string2];\n\n  // Init the matrix of all substring lengths to use Dynamic Programming approach.\n  const substringMatrix = Array(s2.length + 1)\n    .fill(null)\n    .map(() => {\n      return Array(s1.length + 1).fill(null);\n    });\n\n  // Fill the first row and first column with zeros to provide initial values.\n  for (let columnIndex = 0; columnIndex <= s1.length; columnIndex += 1) {\n    substringMatrix[0][columnIndex] = 0;\n  }\n\n  for (let rowIndex = 0; rowIndex <= s2.length; rowIndex += 1) {\n    substringMatrix[rowIndex][0] = 0;\n  }\n\n  // Build the matrix of all substring lengths to use Dynamic Programming approach.\n  let longestSubstringLength = 0;\n  let longestSubstringColumn = 0;\n  let longestSubstringRow = 0;\n\n  for (let rowIndex = 1; rowIndex <= s2.length; rowIndex += 1) {\n    for (let columnIndex = 1; columnIndex <= s1.length; columnIndex += 1) {\n      if (s1[columnIndex - 1] === s2[rowIndex - 1]) {\n        substringMatrix[rowIndex][columnIndex] =\n          substringMatrix[rowIndex - 1][columnIndex - 1] + 1;\n      } else {\n        substringMatrix[rowIndex][columnIndex] = 0;\n      }\n\n      // Try to find the biggest length of all common substring lengths\n      // and to memorize its last character position (indices)\n      if (substringMatrix[rowIndex][columnIndex] > longestSubstringLength) {\n        longestSubstringLength = substringMatrix[rowIndex][columnIndex];\n        longestSubstringColumn = columnIndex;\n        longestSubstringRow = rowIndex;\n      }\n    }\n  }\n\n  if (longestSubstringLength === 0) {\n    // Longest common substring has not been found.\n    return \"\";\n  }\n\n  // Detect the longest substring from the matrix.\n  let longestSubstring = \"\";\n\n  while (substringMatrix[longestSubstringRow][longestSubstringColumn] > 0) {\n    longestSubstring = s1[longestSubstringColumn - 1] + longestSubstring;\n    longestSubstringRow -= 1;\n    longestSubstringColumn -= 1;\n  }\n\n  return longestSubstring;\n}\n\nexport async function fetchFile(url, filename, showMessage) {\n  const response = await axios({\n    url,\n    method: \"GET\",\n    responseType: \"blob\",\n    onDownloadProgress: progressEvent => {\n      const status = `Downloading file ${progressEvent.loaded /\n        1000}kB (${progressEvent.total &&\n        Math.round((progressEvent.loaded / progressEvent.total) * 100)}%)`;\n      if (showMessage) showMessage(status);\n      else {\n        console.log(status);\n      }\n    }\n  });\n  filename =\n    filename ||\n    url\n      .split(\"/\")\n      .pop()\n      .split(\"#\")[0]\n      .split(\"?\")[0];\n  const blob = new Blob([response.data]);\n  const file = new File([blob], filename, {\n    type: \"application/octet-stream\",\n    lastModified: Date.now()\n  });\n  return file;\n}\n\nexport async function resolveDOI(doi) {\n  const response = await fetch(\"https://doi.org/api/handles/\" + doi);\n  if (response.ok) {\n    const result = await response.json();\n    return result.values.filter(v => v.type === \"URL\")[0].data.value;\n  } else {\n    throw new Error(\"Failed to resolve DOI:\" + doi);\n  }\n}\n\nexport function dataURLtoFile(dataurl, filename) {\n  var arr = dataurl.split(\",\"),\n    mime = arr[0].match(/:(.*?);/)[1],\n    bstr = atob(arr[1]),\n    n = bstr.length,\n    u8arr = new Uint8Array(n);\n\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n\n  return new File([u8arr], filename, { type: mime });\n}\nexport function resizeImage(settings) {\n  var file = settings.file;\n  var maxSize = settings.maxSize;\n  var reader = new FileReader();\n  var image = new Image();\n  var canvas = document.createElement(\"canvas\");\n  var dataURItoBlob = function(dataURI) {\n    var bytes =\n      dataURI.split(\",\")[0].indexOf(\"base64\") >= 0\n        ? atob(dataURI.split(\",\")[1])\n        : unescape(dataURI.split(\",\")[1]);\n    var mime = dataURI\n      .split(\",\")[0]\n      .split(\":\")[1]\n      .split(\";\")[0];\n    var max = bytes.length;\n    var ia = new Uint8Array(max);\n    for (var i = 0; i < max; i++) ia[i] = bytes.charCodeAt(i);\n    return new Blob([ia], { type: mime });\n  };\n  var resize = function() {\n    var width = image.width;\n    var height = image.height;\n    if (width > height) {\n      if (width > maxSize) {\n        height *= maxSize / width;\n        width = maxSize;\n      }\n    } else {\n      if (height > maxSize) {\n        width *= maxSize / height;\n        height = maxSize;\n      }\n    }\n    canvas.width = width;\n    canvas.height = height;\n    canvas.getContext(\"2d\").drawImage(image, 0, 0, width, height);\n    var dataUrl = canvas.toDataURL(\"image/jpeg\");\n    return dataURItoBlob(dataUrl);\n  };\n  return new Promise(function(ok, no) {\n    if (!file.type.match(/image.*/)) {\n      no(new Error(\"Not an image\"));\n      return;\n    }\n    reader.onload = function(readerEvent) {\n      image.onload = function() {\n        return ok(resize());\n      };\n      image.src = readerEvent.target.result;\n    };\n    reader.readAsDataURL(file);\n  });\n}\n\nfunction getAbsoluteUrl(baseUrl, c) {\n  if (!c) return c;\n  if (!baseUrl.endsWith(\"/\")) baseUrl = baseUrl + \"/\";\n  return c.startsWith(\"http\") ? c : new URL(c, baseUrl).href;\n}\n\nexport async function getFullRdfFromDeposit(rdf, resolveUrl) {\n  const response = await fetch(rdf.rdf_source);\n  if (response.ok) {\n    const yamlStr = await response.text();\n    const fullRdf = yaml.load(yamlStr);\n    // fix id;\n    fullRdf.id = rdf.id;\n    // keep conversions\n    fullRdf.conversions = rdf.conversions;\n    const root_url = rdf.rdf_source\n      .split(\"/\")\n      .slice(0, -1)\n      .join(\"/\");\n    if (resolveUrl) {\n      fullRdf.documentation = getAbsoluteUrl(root_url, fullRdf.documentation);\n      if (fullRdf.covers) {\n        fullRdf.covers = fullRdf.covers.map(cover =>\n          getAbsoluteUrl(root_url, cover)\n        );\n      }\n    }\n    fullRdf.config = fullRdf.config || {};\n    Object.assign(fullRdf.config, rdf.config);\n    // fix samples\n    const samples = fullRdf.attachments.samples;\n    for (let sample of samples) {\n      for (let f of sample.files) {\n        // make a copy of it\n        const file = {};\n        file.download_url = `${root_url}/${sample.name}/${f.name}`; // <sample name>/ <file name>\n        // fix the name\n        file.name = f.name;\n        if (\n          fullRdf.conversions &&\n          fullRdf.conversions[sample.name] &&\n          fullRdf.conversions[sample.name][f.name]\n        ) {\n          const conversions = fullRdf.conversions[sample.name][f.name];\n          if (conversions[\"potree\"]) {\n            const potreeFile = `https://imjoy-s3.pasteur.fr/public/pointclouds/${rdf.doi}/${sample.name}/${conversions[\"potree\"][0]}`;\n            file.preview_url = `https://shareloc.xyz/shareloc-potree-viewer.html?pointShape=circle&pointSizeType=adaptive&unit=nm&name=${sample.name}/${file.name}&load=${potreeFile}`;\n          }\n          if (conversions[\"csv\"]) {\n            file.csv = conversions[\"csv\"].map(c => {\n              return {\n                name: c,\n                url: `https://imjoy-s3.pasteur.fr/public/pointclouds/${rdf.doi}/${sample.name}/${c}`\n              };\n            });\n          }\n        }\n\n        Object.assign(f, file);\n      }\n\n      for (let view of sample.views) {\n        if (!view.image) {\n          view.image = `${root_url}/${sample.name}/${\n            Array.isArray(view.image_name)\n              ? view.image_name[0]\n              : view.image_name\n          }`;\n        }\n      }\n    }\n    return fullRdf;\n  } else {\n    throw new Error(`Failed to fetch RDF file.`);\n  }\n}\n\nconst additionalNote = \" (Uploaded via https://shareloc.xyz)\";\nexport function rdfToMetadata(rdf, baseUrl, docstring) {\n  if (!spdxLicenseList[rdf.license])\n    throw new Error(\n      \"Invalid license, the license identifier must be one from the SPDX license list (https://spdx.org/licenses/)\"\n    );\n  if (!rdf.type) {\n    throw new Error(\"`type` key is not defined in the RDF.\");\n  }\n  rdf.covers = rdf.covers || [];\n  const covers = rdf.covers.map(c =>\n    c.startsWith(\"http\") ? c : new URL(c, baseUrl).href\n  );\n  const related_identifiers = [];\n  for (let c of covers) {\n    if (c.includes(\"access_token=\"))\n      throw new Error(\"Cover URL should not contain access token: \" + c);\n    related_identifiers.push({\n      relation: \"hasPart\", // is part of this upload\n      identifier: c,\n      resource_type: \"image-figure\",\n      scheme: \"url\"\n    });\n  }\n  rdf.links = rdf.links || [];\n  for (let link of rdf.links) {\n    if (link.includes(\"access_token=\"))\n      throw new Error(\"Link should not contain access token: \" + link);\n    related_identifiers.push({\n      identifier: \"https://shareloc.xyz/#/r/\" + encodeURIComponent(link),\n      relation: \"references\", // is referenced by this upload\n      resource_type: \"other\",\n      scheme: \"url\"\n    });\n  }\n  if (rdf.config._rdf_file)\n    // rdf.yaml\n    related_identifiers.push({\n      identifier: rdf.config._rdf_file.startsWith(\"http\")\n        ? rdf.config._rdf_file\n        : new URL(rdf.config._rdf_file, baseUrl).href,\n      relation: \"isCompiledBy\", // compiled/created this upload\n      resource_type: \"other\",\n      scheme: \"url\"\n    });\n  else throw new Error(\"`_rdf_file` key is not found in the RDF config\");\n\n  // if (rdf.attachments && rdf.attachments.samples) {\n  //   const samples = rdf.attachments.samples.map(d =>\n  //     d.download_url ? d.download_url : new URL(d.name, baseUrl).href\n  //   );\n  //   samples.forEach(dataset => {\n  //     related_identifiers.push({\n  //       relation: \"hasPart\", // is part of this upload\n  //       identifier: dataset,\n  //       resource_type: \"dataset\",\n  //       scheme: \"url\"\n  //     });\n  //   });\n  // }\n  if (rdf.documentation) {\n    if (rdf.documentation.includes(\"access_token=\"))\n      throw new Error(\"Documentation URL should not contain access token\");\n    related_identifiers.push({\n      identifier: rdf.documentation.startsWith(\"http\")\n        ? rdf.documentation\n        : new URL(rdf.documentation, baseUrl).href,\n      relation: \"isDocumentedBy\", // is referenced by this upload\n      resource_type: \"publication-technicalnote\",\n      scheme: \"url\"\n    });\n  }\n\n  rdf.authors = rdf.authors || [];\n  const creators = rdf.authors.map(author => {\n    if (typeof author === \"string\")\n      return { name: author.split(\";\")[0], affiliation: \"\" };\n    else\n      return {\n        name: author.name.split(\";\")[0],\n        affiliation: author.affiliation,\n        orcid: author.orcid\n      };\n  });\n  const description =\n    `<a href=\"https://shareloc.xyz/#/r/zenodo:${encodeURIComponent(\n      rdf.config._deposit.id\n    )}\"><span class=\"label label-success\">Open in Shareloc.XYZ</span></a><br>` +\n    ((docstring && `<p>${docstring}</p>`) || \"\");\n  const keywords = [\"shareloc.xyz\", \"shareloc.xyz:\" + rdf.type];\n  const metadata = {\n    title: rdf.name,\n    description,\n    access_right: \"open\",\n    license: rdf.license,\n    upload_type: \"other\",\n    creators: creators,\n    publication_date: new Date().toISOString().split(\"T\")[0],\n    keywords: keywords.concat(rdf.tags),\n    notes: rdf.description + additionalNote,\n    related_identifiers,\n    communities: []\n  };\n  return metadata;\n}\n\nexport function depositionToRdf(deposition) {\n  const metadata = deposition.metadata;\n  let type = metadata.keywords.filter(k => k.startsWith(\"shareloc.xyz:\"))[0];\n  if (!type) {\n    throw new Error(\n      `deposit (${deposition.id}) does not contain a shareloc.xyz type keyword starts with \"shareloc.xyz:<TYPE>\"`\n    );\n  }\n  type = type.replace(\"shareloc.xyz:\", \"\");\n  const covers = [];\n  const samples = [];\n  const links = [];\n  let rdfFile = null;\n  let documentation = null;\n  // TODO: deprecate file:// format\n  for (let idf of metadata.related_identifiers) {\n    if (idf.relation === \"isCompiledBy\" && idf.scheme === \"url\") {\n      rdfFile = idf.identifier;\n      const zenodoFileRegex = rdfFile.includes(\"/api/files/\")\n        ? /.*zenodo.org\\/api\\/files\\/.*\\/(.*)/\n        : /.*zenodo.org\\/.*\\/files\\/(.*)/;\n      const matches = zenodoFileRegex.exec(rdfFile);\n      if (matches) {\n        const fileName = matches[1];\n        rdfFile = `${deposition.links.bucket}/${fileName}`;\n      } else {\n        throw new Error(\"Invalid file identifier: \" + idf.identifier);\n      }\n    } else if (\n      idf.relation === \"hasPart\" &&\n      idf.resource_type === \"image-figure\" &&\n      idf.scheme === \"url\"\n    ) {\n      let url = idf.identifier;\n      if (url.startsWith(\"file://\")) {\n        url = url.replace(\"file://\", deposition.links.bucket + \"/\");\n      } else if (url.includes(`/files/`)) {\n        const zenodoFileRegex = url.includes(\"/api/files/\")\n          ? /.*zenodo.org\\/api\\/files\\/.*\\/(.*)/\n          : /.*zenodo.org\\/.*\\/files\\/(.*)/;\n        const matches = zenodoFileRegex.exec(url);\n        if (matches) {\n          const fileName = matches[1];\n          url = `${deposition.links.bucket}/${fileName}`;\n        } else {\n          console.error(\n            \"Invalid cover image file identifier: \" + idf.identifier\n          );\n        }\n      } else {\n        console.error(\"Invalid cover image file identifier: \" + idf.identifier);\n      }\n      covers.push(url);\n      // } else if (\n      //   idf.relation === \"hasPart\" &&\n      //   idf.resource_type === \"dataset\" &&\n      //   idf.scheme === \"url\"\n      // ) {\n      //   let url = idf.identifier;\n      //   if (url.includes(`/files/`)) {\n      //     const zenodoFileRegex = /.*zenodo.org\\/.*\\/files\\/(.*)/;\n      //     const matches = zenodoFileRegex.exec(url);\n      //     if (matches) {\n      //       let fileName = matches[1];\n      //       // TODO: This is a hack for now, will need to fix in the upload part\n      //       // if(fileName.endsWith('.csv')) fileName = fileName.replace('.csv', '.smlm')\n      //       url = `${deposition.links.bucket}/${fileName}`;\n      //       samples.push({ name: fileName, download_url: url });\n      //     } else {\n      //       throw new Error(\"Invalid file identifier: \" + idf.identifier);\n      //     }\n      //   } else {\n      //     throw new Error(\"Invalid file identifier: \" + idf.identifier);\n      //   }\n    } else if (\n      idf.relation === \"references\" &&\n      idf.scheme === \"url\" &&\n      idf.identifier.startsWith(\"https://shareloc.xyz/#/r/\")\n    ) {\n      // links\n      const id = idf.identifier.replace(\"https://shareloc.xyz/#/r/\", \"\");\n      links.push(decodeURIComponent(id));\n    } else if (idf.relation === \"isDocumentedBy\" && idf.scheme === \"url\") {\n      const fileName = idf.identifier.split(\"/files/\")[1];\n      if (!fileName) documentation = idf.identifier;\n      else documentation = `${deposition.links.bucket}/${fileName}`;\n    }\n  }\n  const description = metadata.notes.replace(additionalNote, \"\");\n  if (!rdfFile) {\n    throw new Error(\n      `Invalid deposit (${deposition.id}), rdf.yaml is not defined in the metadata (as part of the \"related_identifiers\")`\n    );\n  }\n  return {\n    id: deposition.conceptrecid,\n    name: metadata.title,\n    type,\n    authors: metadata.creators,\n    tags: metadata.keywords\n      .filter(k => k !== \"shareloc.xyz\" || !k.startsWith(\"shareloc.xyz:\"))\n      .concat([\"zenodo\"]),\n    description,\n    stats: deposition.stats,\n    license:\n      typeof metadata.license === \"string\"\n        ? metadata.license\n        : metadata.license.id, // sometimes it doesn't contain id\n    documentation,\n    covers,\n    source: rdfFile, //TODO: fix for other RDF types\n    links,\n    attachments: {\n      samples\n    },\n    owners: deposition.owners,\n    rdf_source: rdfFile,\n    config: {\n      _doi: deposition.doi,\n      _conceptdoi: deposition.conceptdoi,\n      _deposit: deposition,\n      _rdf_file: rdfFile\n    }\n  };\n}\n\nexport class ZenodoClient {\n  constructor(baseURL, clientId, isSandbox) {\n    this.baseURL = baseURL;\n    this.clientId = clientId;\n    this.isSandbox = isSandbox;\n    this.lastUserId = null;\n    this.callbackUrl = encodeURIComponent(\"https://imjoy.io/login-helper\");\n    this.credential = null;\n    this.credentialKey = isSandbox\n      ? \"sandbox_zenodo_credential\"\n      : \"production_zenodo_credential\";\n    this.userIdKey = isSandbox\n      ? \"sandbox_zenodo_user_id\"\n      : \"production_zenodo_user_id\";\n    try {\n      this.lastUserId = localStorage.getItem(this.userIdKey);\n      if (this.lastUserId) this.lastUserId = parseInt(this.lastUserId);\n      let lastCredential = localStorage.getItem(this.credentialKey);\n      if (lastCredential) {\n        this.credential = JSON.parse(lastCredential);\n        // check if it's still valid\n        this.getCredential();\n        if (this.lastUserId !== this.credential.user_id) {\n          this.lastUserId = this.credential.user_id;\n          localStorage.setItem(this.userIdKey, this.lastUserId);\n        }\n        // verify whether the credential is valid\n        fetch(\n          `${this.baseURL}/api/deposit/depositions?access_token=${this.credential.access_token}`\n        ).then(response => {\n          if (!response.ok) {\n            this.credential = null;\n          }\n        });\n      }\n    } catch (e) {\n      console.error(`Failed to reset ${this.credentialKey}: ${e}`);\n      localStorage.removeItem(this.credentialKey);\n    }\n  }\n\n  async getCredential(login, expiryTolerance) {\n    expiryTolerance = (expiryTolerance || 40) * 60 * 1000;\n    if (this.credential) {\n      if (\n        this.credential.create_at +\n          parseInt(this.credential.expires_in) * 1000 >\n        Date.now() - expiryTolerance\n      ) {\n        // add extra time to make sure we can upload a dataset\n        return this.credential;\n      } else {\n        this.credential = null;\n        try {\n          localStorage.removeItem(this.credentialKey);\n        } catch (e) {\n          console.error(`Failed to reset ${this.credentialKey}: ${e}`);\n        }\n      }\n    }\n    if (login) {\n      try {\n        await this.login();\n      } catch (e) {\n        if (confirm(`Failed to login: ${e}, would you like to try again?`)) {\n          return await this.getCredential(login);\n        }\n        throw e;\n      }\n    }\n    return this.credential;\n  }\n\n  async getResourceItems({\n    community,\n    page,\n    type,\n    keywords,\n    query,\n    sort,\n    size\n  }) {\n    page = page || 1;\n    type = type || \"all\";\n    keywords = keywords || [];\n    if (!keywords.includes(\"shareloc.xyz\")) keywords.push(\"shareloc.xyz\");\n    size = size || 20;\n    sort = sort || \"mostrecent\";\n    const typeKeywords = type !== \"all\" ? \"&keywords=shareloc.xyz:\" + type : \"\";\n    const additionalKeywords =\n      typeKeywords +\n      (keywords.length > 0\n        ? \"&\" + keywords.map(kw => \"keywords=\" + kw).join(\"&\")\n        : \"\") +\n      (query ? \"&q=\" + query : \"\");\n    const url =\n      `${this.baseURL}/api/records/?${\n        community ? \"communities=\" + community : \"\"\n      }&sort=${sort}&page=${page}&size=${size}` + additionalKeywords; //&all_versions\n    const response = await fetch(url);\n    const results = JSON.parse(await response.text());\n    // retry in 1s\n    if (!results || !results.hits) {\n      console.warn(\"Hitting rate limit, retrying in 1s\");\n      setTimeout(() => {\n        this.getResourceItems({\n          community,\n          page,\n          type,\n          keywords,\n          query,\n          sort,\n          size\n        });\n      }, 1000);\n    }\n    const hits = results.hits.hits;\n    const resourceItems = hits.map(item => {\n      try {\n        return depositionToRdf(item);\n      } catch (e) {\n        console.warn(e);\n        return null;\n      }\n    });\n    console.log(\"Get items from URL: \", resourceItems, url);\n    return resourceItems.filter(item => !!item);\n  }\n\n  getUserId() {\n    return (this.credential && this.credential.user_id) || this.lastUserId;\n  }\n\n  logout() {\n    return new Promise((resolve, reject) => {\n      this.credential = null;\n      try {\n        localStorage.removeItem(this.credentialKey);\n      } catch (e) {\n        console.error(`Failed to reset ${this.credentialKey}`);\n      }\n      const loginWindow = window.open(`${this.baseURL}/logout`, \"Logout\");\n      try {\n        loginWindow.focus();\n      } catch (e) {\n        reject(\n          \"Logout window blocked. If you have a popup blocker enabled, please add shareloc.xyz to your exception list.\"\n        );\n        return;\n      }\n\n      let countDown = 120;\n      const timer = setInterval(function() {\n        if (loginWindow.closed) {\n          clearInterval(timer);\n          resolve();\n        } else {\n          countDown--;\n          if (countDown <= 0) {\n            clearInterval(timer);\n            loginWindow.close();\n            // make sure we closed the window\n            reject(\"Timeout error\");\n          }\n        }\n      }, 1000);\n      setTimeout(() => {\n        loginWindow.close();\n      }, 1000);\n    });\n  }\n\n  login() {\n    return new Promise((resolve, reject) => {\n      if (!this.lastUserId) {\n        if (\n          !confirm(\n            \"Redirecting to Zenodo.org. If you failed to login, please come back here to try it again.\"\n          )\n        )\n          return;\n      }\n\n      const randomState = randId();\n      const loginWindow = window.open(\n        `${this.baseURL}/oauth/authorize?scope=deposit%3Awrite+deposit%3Aactions&state=${randomState}&redirect_uri=${this.callbackUrl}&response_type=token&client_id=${this.clientId}`,\n        \"Login\"\n      );\n      try {\n        loginWindow.focus();\n      } catch (e) {\n        reject(\n          \"Login window blocked. If you have a popup blocker enabled, please add shareloc.xyz to your exception list.\"\n        );\n        return;\n      }\n      this.credential = null;\n      let countDown = 120;\n      let loggedIn = false;\n      const timer = setInterval(function() {\n        if (loggedIn) {\n          clearInterval(timer);\n          return;\n        }\n        if (loginWindow.closed) {\n          clearInterval(timer);\n          reject(\"The login window was closed unexpectedly\");\n        } else {\n          countDown--;\n          if (countDown <= 0) {\n            clearInterval(timer);\n            loginWindow.close();\n            // make sure we closed the window\n            reject(\"Timeout error\");\n          }\n        }\n      }, 1000);\n      const handleLogin = event => {\n        if (loginWindow === event.source) {\n          // run only once\n          window.removeEventListener(\"message\", handleLogin);\n          clearInterval(timer);\n          loginWindow.close();\n          loggedIn = true;\n\n          // already logged in\n          if (this.credential) return;\n          if (event.data.error) {\n            // make sure we closed the window\n            setTimeout(() => {\n              reject(event.data.error);\n            }, 1);\n            return;\n          }\n\n          if (!event.data.access_token || event.data.state !== randomState) {\n            reject(\n              \"Failed to obtain the access token, please make sure your account is valid and try it again.\"\n            );\n            return;\n          }\n          console.log(\"Successfully logged in\", event.data);\n          this.credential = event.data;\n          this.credential.user_id = parseInt(\n            /'id': u'([0-9]+)'/gm.exec(event.data.user)[1]\n          );\n          this.credential.create_at = Date.now();\n          if (this.lastUserId !== this.credential.user_id) {\n            this.lastUserId = this.credential.user_id;\n            localStorage.setItem(this.userIdKey, this.lastUserId);\n          }\n          resolve(event.data);\n          localStorage.setItem(\n            this.credentialKey,\n            JSON.stringify(this.credential)\n          );\n        }\n      };\n      window.addEventListener(\"message\", handleLogin, false);\n    });\n  }\n\n  async createDeposition() {\n    const headers = { \"Content-Type\": \"application/json\" };\n    // create an empty deposition\n    const response = await fetch(\n      `${this.baseURL}/api/deposit/depositions?access_token=${this.credential.access_token}`,\n      { method: \"POST\", body: JSON.stringify({}), headers }\n    );\n    if (response.ok) return await response.json();\n    else {\n      throw new Error(\n        \"Failed to create deposition, error: \" + (await response.text())\n      );\n    }\n  }\n\n  async getDeposit(depositionInfo) {\n    const depositionId = depositionInfo.id ? depositionInfo.id : depositionInfo;\n    const response = await fetch(\n      `${this.baseURL}/api/records/${depositionId}`,\n      { method: \"GET\" }\n    );\n    if (response.ok) return await response.json();\n    else {\n      throw new Error(\"Failed to get deposit: \" + depositionId);\n    }\n  }\n\n  async retrieve(depositionInfo) {\n    const depositionId = depositionInfo.id ? depositionInfo.id : depositionInfo;\n    const response = await fetch(\n      `${this.baseURL}/api/deposit/depositions/${depositionId}?access_token=${this.credential.access_token}`,\n      { method: \"GET\" }\n    );\n    if (response.ok) return await response.json();\n    else {\n      throw new Error(\"Failed to retrieve deposit: \" + depositionId);\n    }\n  }\n\n  async edit(depositionInfo) {\n    const depositionId = depositionInfo.id ? depositionInfo.id : depositionInfo;\n    const headers = { \"Content-Type\": \"application/json\" };\n    const response = await fetch(\n      `${this.baseURL}/api/deposit/depositions/${depositionId}/actions/edit?access_token=${this.credential.access_token}`,\n      { method: \"POST\", body: JSON.stringify({}), headers }\n    );\n    if (response.ok) return await response.json();\n    else {\n      throw new Error(\"Failed to edit deposit: \" + depositionId);\n    }\n  }\n\n  async discard(depositionInfo) {\n    const depositionId =\n      typeof depositionInfo === \"string\" ? depositionInfo : depositionInfo.id;\n    const headers = { \"Content-Type\": \"application/json\" };\n    const response = await fetch(\n      `${this.baseURL}/api/deposit/depositions/${depositionId}/actions/discard?access_token=${this.credential.access_token}`,\n      { method: \"POST\", body: JSON.stringify({}), headers }\n    );\n    if (response.ok) return await response.json();\n    else {\n      throw new Error(\"Failed to discard deposit: \" + depositionId);\n    }\n  }\n\n  async createNewVersion(depositionInfo) {\n    const depositionId =\n      typeof depositionInfo === \"string\" ? depositionInfo : depositionInfo.id;\n    const headers = { \"Content-Type\": \"application/json\" };\n    const response = await fetch(\n      `${this.baseURL}/api/deposit/depositions/${depositionId}/actions/newversion?access_token=${this.credential.access_token}`,\n      { method: \"POST\", body: JSON.stringify({}), headers }\n    );\n    if (response.ok) return await response.json();\n    else {\n      throw new Error(\n        \"Failed to create a new version for deposit: \" + depositionId\n      );\n    }\n  }\n\n  async updateMetadata(depositionInfo, metadata) {\n    const depositionId =\n      typeof depositionInfo === \"string\" ? depositionInfo : depositionInfo.id;\n    console.log(`Updating deposition metadata of ${depositionId}:`, metadata);\n    const headers = { \"Content-Type\": \"application/json\" };\n    const response = await fetch(\n      `${this.baseURL}/api/deposit/depositions/${depositionId}?access_token=${this.credential.access_token}`,\n      { method: \"PUT\", body: JSON.stringify({ metadata }), headers }\n    );\n    if (response.ok) return await response.json();\n    else {\n      const details = await response.json();\n      throw new Error(\n        \"Failed to update metadata, error: \" +\n          JSON.stringify(details.errors || details.message)\n      );\n    }\n  }\n\n  async uploadFile(depositionInfo, file, newName, progressCallback) {\n    const bucketUrl = depositionInfo.links.bucket;\n    const fileName = newName || file.name;\n\n    const options = {\n      headers: { \"Content-Type\": file.type },\n      onUploadProgress: progressEvent => {\n        if (progressCallback) progressCallback(progressEvent.loaded);\n        else {\n          const progress = Math.round(\n            ((1.0 * progressEvent.loaded) / file.size) * 100.0\n          );\n          console.log(\n            \"uploading annotation, size: \" +\n              Math.round(progressEvent.loaded / 1000000) +\n              \"MB, \" +\n              progress +\n              \"% uploaded.\"\n          );\n        }\n      }\n    };\n    let response;\n    try {\n      const url = `${bucketUrl}/${fileName}?access_token=${this.credential.access_token}`;\n      response = await axios.put(url, file, options);\n    } catch (e) {\n      console.error(e);\n      // check if it's because the credential is expired\n      // if (\n      //   this.credential.create_at +\n      //     parseInt(this.credential.expires_in) * 1000 >\n      //   Date.now() + 1000\n      // ) {\n      console.error(\n        \"Failed to upload, possibly due to access token expired:\",\n        e\n      );\n      alert(\n        `Authentication information expired, please login to Zenodo and authorize ShareLoc.XYZ again.`\n      );\n      await this.login();\n      const url = `${bucketUrl}/${fileName}?access_token=${this.credential.access_token}`;\n      response = await axios.put(url, file, options);\n      // } else {\n      //   throw e;\n      // }\n    }\n    return response.data;\n  }\n\n  async publish(depositionInfo) {\n    const depositionId = depositionInfo.id ? depositionInfo.id : depositionInfo;\n    const headers = { \"Content-Type\": \"application/json\" };\n    const response = await fetch(\n      `${this.baseURL}/api/deposit/depositions/${depositionId}/actions/publish?access_token=${this.credential.access_token}`,\n      { method: \"POST\", body: JSON.stringify({}), headers }\n    );\n    if (response.ok) {\n      const result = await response.json();\n      if (result.submitted && result.doi_url) {\n        return result;\n      } else {\n        throw new Error(\"Failed to publish, error: \" + JSON.stringify(result));\n      }\n    } else {\n      const details = await response.json();\n      throw new Error(\n        \"Failed to publish, error: \" +\n          JSON.stringify(details.errors || details.message)\n      );\n    }\n  }\n}\n\nexport function compareVersions(v1, comparator, v2) {\n  comparator = comparator == \"=\" ? \"==\" : comparator;\n  if (\n    [\"==\", \"===\", \"<\", \"<=\", \">\", \">=\", \"!=\", \"!==\"].indexOf(comparator) == -1\n  ) {\n    throw new Error(\"Invalid comparator. \" + comparator);\n  }\n  var v1parts = v1.split(\".\"),\n    v2parts = v2.split(\".\");\n  var maxLen = Math.max(v1parts.length, v2parts.length);\n  var part1, part2;\n  var cmp = 0;\n  for (var i = 0; i < maxLen && !cmp; i++) {\n    part1 = parseInt(v1parts[i], 10) || 0;\n    part2 = parseInt(v2parts[i], 10) || 0;\n    if (part1 < part2) cmp = 1;\n    if (part1 > part2) cmp = -1;\n  }\n  return eval(\"0\" + comparator + cmp);\n}\n\nexport function debounce(func, wait, immediate) {\n  var timeout;\n  return function() {\n    var context = this,\n      args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n\nexport function concatAndResolveUrl(url, concat) {\n  const url1 = url.split(\"/\");\n  const url2 = concat.split(\"/\");\n  const url3 = [];\n  for (let i = 0, l = url1.length; i < l; i++) {\n    if (url1[i] == \"..\") {\n      url3.pop();\n    } else if (url1[i] == \".\") {\n      continue;\n    } else {\n      url3.push(url1[i]);\n    }\n  }\n  for (let i = 0, l = url2.length; i < l; i++) {\n    if (url2[i] == \"..\") {\n      url3.pop();\n    } else if (url2[i] == \".\") {\n      continue;\n    } else {\n      url3.push(url2[i]);\n    }\n  }\n  return url3.join(\"/\");\n}\n\nfunction rel2abs(url, base_url) {\n  /* Only accept commonly trusted protocols:\n   * Only data-image URLs are accepted, Exotic flavours (escaped slash,\n   * html-entitied characters) are not supported to keep the function fast */\n  if (\n    /^(https?|file|ftps?|mailto|javascript|data:image\\/[^;]{2,9};):/i.test(url)\n  )\n    return url; //Url is already absolute\n  if (url.substring(0, 2) == \"//\") return location.protocol + url;\n  else if (url.charAt(0) == \"/\") return base_url + url.slice(1);\n  else if (/^\\s*$/.test(url)) return \"\"; //Empty = Return nothing\n\n  url = base_url + url;\n  while (/\\/\\.\\.\\//.test((url = url.replace(/[^/]+\\/+\\.\\.\\//g, \"\"))));\n\n  /* Escape certain characters to prevent XSS */\n  url = url\n    .replace(/\\.$/, \"\")\n    .replace(/\\/\\./g, \"\")\n    .replace(/\"/g, \"%22\")\n    .replace(/'/g, \"%27\")\n    .replace(/</g, \"%3C\")\n    .replace(/>/g, \"%3E\");\n  return url;\n}\n\nexport function replaceAllRelByAbs(html, base_url) {\n  /*HTML/XML Attribute may not be prefixed by these characters (common \n     attribute chars.  This list is not complete, but will be sufficient\n     for this function (see http://www.w3.org/TR/REC-xml/#NT-NameChar). */\n  var att = \"[^-a-z0-9:._]\";\n  if (!base_url.endsWith(\"/\")) base_url = base_url + \"/\";\n\n  var entityEnd = \"(?:;|(?!\\\\d))\";\n  var ents = {\n    \" \": \"(?:\\\\s|&nbsp;?|&#0*32\" + entityEnd + \"|&#x0*20\" + entityEnd + \")\",\n    \"(\": \"(?:\\\\(|&#0*40\" + entityEnd + \"|&#x0*28\" + entityEnd + \")\",\n    \")\": \"(?:\\\\)|&#0*41\" + entityEnd + \"|&#x0*29\" + entityEnd + \")\",\n    \".\": \"(?:\\\\.|&#0*46\" + entityEnd + \"|&#x0*2e\" + entityEnd + \")\"\n  };\n  /* Placeholders to filter obfuscations */\n  var charMap = {};\n  var s = ents[\" \"] + \"*\"; //Short-hand for common use\n  var any = \"(?:[^>\\\"']*(?:\\\"[^\\\"]*\\\"|'[^']*'))*?[^>]*\";\n  /* ^ Important: Must be pre- and postfixed by < and >.\n   *   This RE should match anything within a tag!  */\n\n  /*\n    @name ae\n    @description  Converts a given string in a sequence of the original\n                    input and the HTML entity\n    @param String string  String to convert\n    */\n  function ae(string) {\n    var all_chars_lowercase = string.toLowerCase();\n    if (ents[string]) return ents[string];\n    var all_chars_uppercase = string.toUpperCase();\n    var RE_res = \"\";\n    for (var i = 0; i < string.length; i++) {\n      var char_lowercase = all_chars_lowercase.charAt(i);\n      if (charMap[char_lowercase]) {\n        RE_res += charMap[char_lowercase];\n        continue;\n      }\n      var char_uppercase = all_chars_uppercase.charAt(i);\n      var RE_sub = [char_lowercase];\n      RE_sub.push(\"&#0*\" + char_lowercase.charCodeAt(0) + entityEnd);\n      RE_sub.push(\n        \"&#x0*\" + char_lowercase.charCodeAt(0).toString(16) + entityEnd\n      );\n      if (char_lowercase != char_uppercase) {\n        /* Note: RE ignorecase flag has already been activated */\n        RE_sub.push(\"&#0*\" + char_uppercase.charCodeAt(0) + entityEnd);\n        RE_sub.push(\n          \"&#x0*\" + char_uppercase.charCodeAt(0).toString(16) + entityEnd\n        );\n      }\n      RE_sub = \"(?:\" + RE_sub.join(\"|\") + \")\";\n      RE_res += charMap[char_lowercase] = RE_sub;\n    }\n    return (ents[string] = RE_res);\n  }\n\n  /*\n    @name by\n    @description  2nd argument for replace().\n    */\n  function by(match, group1, group2, group3) {\n    /* Note that this function can also be used to remove links:\n     * return group1 + \"javascript://\" + group3; */\n    return group1 + rel2abs(group2, base_url) + group3;\n  }\n  /*\n    @name by2\n    @description  2nd argument for replace(). Parses relevant HTML entities\n    */\n  var slashRE = new RegExp(ae(\"/\"), \"g\");\n  var dotRE = new RegExp(ae(\".\"), \"g\");\n  function by2(match, group1, group2, group3) {\n    /*Note that this function can also be used to remove links:\n     * return group1 + \"javascript://\" + group3; */\n    group2 = group2.replace(slashRE, \"/\").replace(dotRE, \".\");\n    return group1 + rel2abs(group2, base_url) + group3;\n  }\n  /*\n    @name cr\n    @description            Selects a HTML element and performs a\n                              search-and-replace on attributes\n    @param String selector  HTML substring to match\n    @param String attribute RegExp-escaped; HTML element attribute to match\n    @param String marker    Optional RegExp-escaped; marks the prefix\n    @param String delimiter Optional RegExp escaped; non-quote delimiters\n    @param String end       Optional RegExp-escaped; forces the match to end\n                            before an occurence of <end>\n   */\n  function cr(selector, attribute, marker, delimiter, end) {\n    if (typeof selector == \"string\") selector = new RegExp(selector, \"gi\");\n    attribute = att + attribute;\n    marker = typeof marker == \"string\" ? marker : \"\\\\s*=\\\\s*\";\n    delimiter = typeof delimiter == \"string\" ? delimiter : \"\";\n    end = typeof end == \"string\" ? \"?)(\" + end : \")(\";\n    var re1 = new RegExp(\n      \"(\" + attribute + marker + '\")([^\"' + delimiter + \"]+\" + end + \")\",\n      \"gi\"\n    );\n    var re2 = new RegExp(\n      \"(\" + attribute + marker + \"')([^'\" + delimiter + \"]+\" + end + \")\",\n      \"gi\"\n    );\n    var re3 = new RegExp(\n      \"(\" +\n        attribute +\n        marker +\n        \")([^\\\"'][^\\\\s>\" +\n        delimiter +\n        \"]*\" +\n        end +\n        \")\",\n      \"gi\"\n    );\n    html = html.replace(selector, function(match) {\n      return match\n        .replace(re1, by)\n        .replace(re2, by)\n        .replace(re3, by);\n    });\n  }\n  /* \n    @name cri\n    @description            Selects an attribute of a HTML element, and\n                              performs a search-and-replace on certain values\n    @param String selector  HTML element to match\n    @param String attribute RegExp-escaped; HTML element attribute to match\n    @param String front     RegExp-escaped; attribute value, prefix to match\n    @param String flags     Optional RegExp flags, default \"gi\"\n    @param String delimiter Optional RegExp-escaped; non-quote delimiters\n    @param String end       Optional RegExp-escaped; forces the match to end\n                              before an occurence of <end>\n   */\n  function cri(selector, attribute, front, flags, delimiter, end) {\n    if (typeof selector == \"string\") selector = new RegExp(selector, \"gi\");\n    attribute = att + attribute;\n    flags = typeof flags == \"string\" ? flags : \"gi\";\n    var re1 = new RegExp(\"(\" + attribute + '\\\\s*=\\\\s*\")([^\"]*)', \"gi\");\n    var re2 = new RegExp(\"(\" + attribute + \"\\\\s*=\\\\s*')([^']+)\", \"gi\");\n    var at1 = new RegExp(\"(\" + front + ')([^\"]+)(\")', flags);\n    var at2 = new RegExp(\"(\" + front + \")([^']+)(')\", flags);\n    let handleAttr;\n    if (typeof delimiter == \"string\") {\n      end = typeof end == \"string\" ? end : \"\";\n      var at3 = new RegExp(\n        \"(\" +\n          front +\n          \")([^\\\"'][^\" +\n          delimiter +\n          \"]*\" +\n          (end ? \"?)(\" + end + \")\" : \")()\"),\n        flags\n      );\n      handleAttr = function(match, g1, g2) {\n        return (\n          g1 +\n          g2\n            .replace(at1, by2)\n            .replace(at2, by2)\n            .replace(at3, by2)\n        );\n      };\n    } else {\n      handleAttr = function(match, g1, g2) {\n        return g1 + g2.replace(at1, by2).replace(at2, by2);\n      };\n    }\n    html = html.replace(selector, function(match) {\n      return match.replace(re1, handleAttr).replace(re2, handleAttr);\n    });\n  }\n\n  /* <meta http-equiv=refresh content=\"  ; url= \" > */\n  cri(\n    \"<meta\" +\n      any +\n      att +\n      'http-equiv\\\\s*=\\\\s*(?:\"' +\n      ae(\"refresh\") +\n      '\"' +\n      any +\n      \">|'\" +\n      ae(\"refresh\") +\n      \"'\" +\n      any +\n      \">|\" +\n      ae(\"refresh\") +\n      \"(?:\" +\n      ae(\" \") +\n      any +\n      \">|>))\",\n    \"content\",\n    ae(\"url\") + s + ae(\"=\") + s,\n    \"i\"\n  );\n\n  cr(\"<\" + any + att + \"href\\\\s*=\" + any + \">\", \"href\"); /* Linked elements */\n  cr(\"<\" + any + att + \"src\\\\s*=\" + any + \">\", \"src\"); /* Embedded elements */\n\n  cr(\n    \"<object\" + any + att + \"data\\\\s*=\" + any + \">\",\n    \"data\"\n  ); /* <object data= > */\n  cr(\n    \"<applet\" + any + att + \"codebase\\\\s*=\" + any + \">\",\n    \"codebase\"\n  ); /* <applet codebase= > */\n\n  /* <param name=movie value= >*/\n  cr(\n    \"<param\" +\n      any +\n      att +\n      'name\\\\s*=\\\\s*(?:\"' +\n      ae(\"movie\") +\n      '\"' +\n      any +\n      \">|'\" +\n      ae(\"movie\") +\n      \"'\" +\n      any +\n      \">|\" +\n      ae(\"movie\") +\n      \"(?:\" +\n      ae(\" \") +\n      any +\n      \">|>))\",\n    \"value\"\n  );\n\n  cr(\n    /<style[^>]*>(?:[^\"']*(?:\"[^\"]*\"|'[^']*'))*?[^'\"]*(?:<\\/style|$)/gi,\n    \"url\",\n    \"\\\\s*\\\\(\\\\s*\",\n    \"\",\n    \"\\\\s*\\\\)\"\n  ); /* <style> */\n  cri(\n    \"<\" + any + att + \"style\\\\s*=\" + any + \">\",\n    \"style\",\n    ae(\"url\") + s + ae(\"(\") + s,\n    0,\n    s + ae(\")\"),\n    ae(\")\")\n  ); /*< style=\" url(...) \" > */\n  return html;\n}\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemInfo.vue?vue&type=style&index=0&id=e39a61ea&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemInfo.vue?vue&type=style&index=0&id=e39a61ea&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagInputField.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagInputField.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePreviewField.vue?vue&type=style&index=0&id=c2aba96e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePreviewField.vue?vue&type=style&index=0&id=c2aba96e&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upload.vue?vue&type=style&index=0&id=7946b1f4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upload.vue?vue&type=style&index=0&id=7946b1f4&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Badges.vue?vue&type=style&index=0&id=37be7c04&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Badges.vue?vue&type=style&index=0&id=37be7c04&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadForm.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadForm.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(_vm.showNavbar)?_c('nav',{staticClass:\"navbar is-link is-fixed-top\"},[_c('div',{staticClass:\"navbar-brand\"},[_c('a',{attrs:{\"href\":\"#/\"}},[_c('img',{staticStyle:{\"width\":\"264px\",\"margin-left\":\"8px\",\"margin-top\":\"6px\"},attrs:{\"src\":_vm.siteConfig.site_logo}})]),_c('div',{staticClass:\"navbar-burger burger\",class:{ 'is-active': _vm.showMenu },attrs:{\"data-target\":\"navbarExampleTransparentExample\"},on:{\"click\":function($event){_vm.showMenu = !_vm.showMenu}}},[_c('span'),_c('span'),_c('span')])]),_c('div',{staticClass:\"navbar-menu\",class:{ 'is-active': _vm.showMenu },attrs:{\"id\":\"navbarExampleTransparentExample\"}},[_c('div',{staticClass:\"navbar-end\"},[(_vm.bookmarks && _vm.bookmarks.length > 0)?_c('b-dropdown',{staticClass:\"navbar-item\",staticStyle:{\"margin-top\":\"6px\"},attrs:{\"scrollable\":true,\"max-height\":200,\"aria-role\":\"list\"},scopedSlots:_vm._u([{key:\"trigger\",fn:function(){return [_c('a',{staticClass:\"navbar-item\"},[_c('b-icon',{staticStyle:{\"color\":\"white\"},attrs:{\"icon\":\"bookmark\"}})],1)]},proxy:true}],null,false,3325205805)},[_vm._l((_vm.bookmarks),function(rdf,index){return _c('b-dropdown-item',{key:index,attrs:{\"aria-role\":\"listitem\"},on:{\"click\":function($event){return _vm.showResourceItemInfo(rdf)}}},[_c('div',{staticClass:\"media\"},[_c('b-icon',{staticClass:\"media-left\",attrs:{\"icon\":\"database\"}}),_c('div',{staticClass:\"media-content\"},[_c('h3',[_vm._v(_vm._s(rdf.name))])])],1)])}),_c('b-dropdown-item',{attrs:{\"aria-role\":\"listitem\"},on:{\"click\":function($event){return _vm.uploadBookmarks()}}},[_c('div',{staticClass:\"media\"},[_c('b-icon',{staticClass:\"media-left\",attrs:{\"icon\":\"upload\"}}),_c('div',{staticClass:\"media-content\"},[_c('h3',[_vm._v(\"Upload All\")])])],1)]),_c('b-dropdown-item',{attrs:{\"aria-role\":\"listitem\"},on:{\"click\":function($event){return _vm.downloadBookmarks()}}},[_c('div',{staticClass:\"media\"},[_c('b-icon',{staticClass:\"media-left\",attrs:{\"icon\":\"cloud-download\"}}),_c('div',{staticClass:\"media-content\"},[_c('h3',[_vm._v(\"Download All\")])])],1)]),_c('b-dropdown-item',{attrs:{\"aria-role\":\"listitem\"},on:{\"click\":function($event){return _vm.clearBookmarks()}}},[_c('div',{staticClass:\"media\"},[_c('b-icon',{staticClass:\"media-left\",attrs:{\"icon\":\"close\"}}),_c('div',{staticClass:\"media-content\"},[_c('h3',[_vm._v(\"Clear All\")])])],1)])],2):_vm._e(),(_vm.siteConfig.contribute_url && _vm.$route.name !== 'Upload')?_c('a',{staticClass:\"navbar-item\",attrs:{\"href\":\"#/upload\"}},[_c('b-icon',{attrs:{\"icon\":\"plus\"}}),_c('span',[_vm._v(\"Upload\")])],1):_vm._e(),(_vm.$route.name !== 'Viewer')?_c('a',{staticClass:\"navbar-item\",attrs:{\"href\":\"#/viewer\"}},[_c('b-icon',{attrs:{\"icon\":\"eye-outline\"}}),_c('span',[_vm._v(\"Viewer\")])],1):_vm._e(),_c('a',{staticClass:\"navbar-item\",attrs:{\"href\":\"#/about\"}},[_c('b-icon',{attrs:{\"icon\":\"information-outline\"}}),_c('span',[_vm._v(\"About\")])],1),_c('a',{staticClass:\"navbar-item\",attrs:{\"id\":\"imjoy-menu\"}})],1)])]):_vm._e(),_c('router-view',{staticClass:\"router-view\",style:({ marginTop: _vm.showNavbar ? '72px' : '0px' })})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport { concatAndResolveUrl, randId, ZenodoClient } from \"./utils\";\nimport siteConfig from \"../site.config.json\";\nimport spdxLicenseList from \"spdx-license-list/full\";\nimport { setupBioEngine } from \"./bioEngine\";\n\nVue.use(Vuex);\n\nconst params = (location.href.includes(\"#\")\n  ? location.href.split(\"#\")[1]\n  : location.href\n).split(\"?\")[1];\nif (params) {\n  const paramsObj = Object.fromEntries(new URLSearchParams(params).entries());\n  if (siteConfig.zenodo_config.use_sandbox) {\n    if (paramsObj && paramsObj[\"production\"]) {\n      siteConfig.zenodo_config.use_sandbox = false;\n    }\n  } else {\n    if (paramsObj && paramsObj[\"sandbox\"]) {\n      siteConfig.zenodo_config.use_sandbox = true;\n    }\n  }\n}\n\n// set default values for table_view\nsiteConfig.table_view = siteConfig.table_view || {\n  columns: [\"name\", \"authors\", \"badges\", \"apps\"]\n};\n\nlet allTags = [];\nfor (let cat of siteConfig.resource_categories) {\n  const tagCates = cat.tag_categories;\n  if (tagCates)\n    for (let cat in tagCates) {\n      allTags = allTags.concat(tagCates[cat]);\n    }\n}\nallTags = allTags.map(tag => tag.toLowerCase().replace(/ /g, \"-\"));\n\nconst zenodoBaseURL = siteConfig.zenodo_config.use_sandbox\n  ? \"https://sandbox.zenodo.org\"\n  : \"https://zenodo.org\";\n\nfunction normalizeItem(item) {\n  if (item.config && item.config._normalized) return;\n  item.config = item.config || {};\n  item.covers = item.covers || [];\n  item.authors = item.authors || [];\n  item.description = item.description || \"\";\n\n  item.root_url =\n    item.rdf_source &&\n    item.rdf_source\n      .split(\"/\")\n      .slice(0, -1)\n      .join(\"/\");\n  if (item.covers && !Array.isArray(item.covers)) {\n    item.covers = [item.covers];\n  }\n  if (item.icon === \"extension\") item.icon = \"puzzle\";\n\n  item.covers = item.covers.map(cover => {\n    if (!cover.startsWith(\"http\")) {\n      return encodeURI(concatAndResolveUrl(item.root_url, cover));\n    } else {\n      if (cover.includes(\" \")) {\n        return encodeURI(cover);\n      } else return cover;\n    }\n  });\n\n  // if no cover image added, use the icon image\n  if (item.covers.length <= 0 && item?.icon?.startsWith(\"http\")) {\n    item.covers.push(item.icon);\n  }\n\n  item.allLabels = item.labels || [];\n  if (item.license) {\n    item.allLabels.push(item.license);\n  }\n  if (item.applications) {\n    item.allLabels = item.allLabels.concat(item.applications);\n  }\n  if (item.uploaded_by) {\n    item.allLabels.push(item.uploaded_by);\n  }\n  if (item.tags) {\n    item.tags = item.tags.map(tag => tag.toLowerCase().replace(/ /g, \"-\"));\n    item.tags = item.tags.filter(\n      tag => typeof tag === \"string\" && !siteConfig.excluded_tags.includes(tag)\n    );\n    item.allLabels = item.allLabels.concat(\n      item.tags.map(tag => tag.toLowerCase())\n    );\n  }\n\n  // make it lower case and remove duplicates\n  item.allLabels = Array.from(\n    new Set(item.allLabels.map(label => label.toLowerCase()))\n  );\n\n  item.apps = item.apps || [];\n  if (item.download_url)\n    item.apps.unshift({\n      name: \"Download\",\n      icon: \"download\",\n      url: item.download_url,\n      show_on_hover: true\n    });\n  if (item.git_repo)\n    item.apps.unshift({\n      name: \"Git Repository\",\n      icon: \"github\",\n      url: item.git_repo,\n      show_on_hover: true\n    });\n\n  item.badges = item.badges || [];\n  item.attachments = item.attachments || {};\n\n  if (item.license) {\n    item.badges.unshift({\n      label: \"license\",\n      ext: item.license,\n      ext_type: \"is-info\",\n      url: spdxLicenseList[item.license] && spdxLicenseList[item.license].url\n    });\n  }\n\n  if (item.size) {\n    item.badges.unshift({\n      label: \"size\",\n      label_type: \"is-dark\",\n      ext:\n        item.size > 1000000\n          ? Math.round(item.size / 1000000) + \"MB\"\n          : Math.round(item.size / 1000) + \"kB\",\n      ext_type: \"is-primary\"\n    });\n  }\n\n  if (item.type === \"model\" && item.co2) {\n    item.badges.unshift({\n      label: \"CO2\",\n      ext: item.co2,\n      ext_type: \"is-success\",\n      run() {\n        alert(\n          `SAVE THE EARTH: The carbon footprint for training this model is around ${item.co2} lbs, reusing existing models can help save the earth from climate change.`\n        );\n      }\n    });\n  }\n  if (item.error) {\n    if (item.error.spec) {\n      item.badges.unshift({\n        label: \"spec\",\n        label_type: \"is-dark\",\n        ext: \"failing\",\n        ext_type: \"is-danger\",\n        run() {\n          alert(\n            \"This model failed the specification checks, here are the errors: \\n\" +\n              JSON.stringify(item.error.spec, null, \"  \")\n          );\n        }\n      });\n    } else {\n      item.badges.unshift({\n        label: \"spec\",\n        label_type: \"is-dark\",\n        ext: \"passing\",\n        ext_type: \"is-success\",\n        run() {\n          alert(\" This model passed the specification checks!\");\n        }\n      });\n    }\n  }\n  item.config._normalized = true;\n}\n\nlet notifyImJoyReady = null;\nlet notifyImJoyFailed = null;\nconst imjoyReady = new Promise((resolve, reject) => {\n  notifyImJoyReady = resolve;\n  notifyImJoyFailed = reject;\n});\n\nexport async function init() {\n  try {\n    const imjoy = await setupBioEngine();\n    notifyImJoyReady(imjoy);\n  } catch (e) {\n    notifyImJoyFailed(e);\n    console.error(e);\n  }\n}\nconst client_id = siteConfig.zenodo_config.use_sandbox\n  ? siteConfig.zenodo_config.sandbox_client_id\n  : siteConfig.zenodo_config.production_client_id;\nexport const store = new Vuex.Store({\n  state: {\n    loadedUrl: null,\n    allApps: {},\n    allTags: [...allTags],\n    imjoy: null,\n    resourceItems: [],\n    zenodoClient: siteConfig.zenodo_config.enabled\n      ? new ZenodoClient(\n          zenodoBaseURL,\n          client_id,\n          siteConfig.zenodo_config.use_sandbox\n        )\n      : null,\n    zenodoBaseURL,\n    siteConfig,\n    imjoyReady,\n    showNavbar: true,\n    bookmarks: [],\n    eventBus: new Vue()\n  },\n  actions: {\n    async toggleNavbar(context, enable) {\n      context.state.showNavbar = enable;\n    },\n    async login(context) {\n      try {\n        await context.state.client.login();\n      } catch (e) {\n        alert(`Failed to login: ${e}`);\n      }\n    },\n    async fetchResourceItems(\n      context,\n      { manifest_url, repo, transform, filter }\n    ) {\n      if (context.state.loadedUrl === manifest_url) {\n        console.log(\"manifest already loaded\");\n        return;\n      }\n      // clear items\n      context.state.resourceItems = [];\n      context.state.allApps = {};\n      context.state.allTags = [...allTags];\n      const siteConfig = context.state.siteConfig;\n      try {\n        // const items = await context.state.zenodoClient.getResourceItems({\n        //   community: siteConfig.zenodo_config.community,\n        //   size: 5000\n        // });\n        const response = await fetch(\n          \"https://raw.githubusercontent.com/imodpasteur/shareloc-collection/gh-pages/collection.json\"\n        );\n        const collection = await response.json();\n        const items = collection.collection;\n        items.map(item => context.commit(\"addResourceItem\", item));\n      } catch (e) {\n        console.error(e);\n        throw new Error(\n          \"It appears that we cannot reach to the Zenodo server (https://zenodo.org), please check whether you are connected to the internet, otherwise it might be because the Zenodo server is currently down.\"\n        );\n      }\n\n      const response = await fetch(manifest_url + \"?\" + randId());\n      const repo_manifest = JSON.parse(await response.text());\n      if (repo_manifest.collections && siteConfig.partners) {\n        for (let c of repo_manifest.collections) {\n          const duplicates = siteConfig.partners.filter(p => p.id === c.id);\n          duplicates.forEach(p => {\n            siteConfig.partners.splice(siteConfig.partners.indexOf(p), 1);\n          });\n          siteConfig.partners.push(c);\n        }\n      }\n\n      const resourceItems = repo_manifest.resources;\n      const rawResourceItems = JSON.parse(JSON.stringify(resourceItems));\n      for (let item of rawResourceItems) {\n        item.repo = repo;\n        // if (item.source && !item.source.startsWith(\"http\"))\n        //   item.source = concatAndResolveUrl(item.root_url, item.source);\n        if (filter(item)) context.commit(\"addResourceItem\", item);\n      }\n      context.commit(\"normalizeItems\", transform);\n      if (transform) {\n        // only set to load when the items are transformed\n        // for the viewer, the items won't be transformed\n        context.state.loadedUrl = manifest_url;\n      }\n      // try to restore bookmarks\n      try {\n        const bookmarkstr = localStorage.getItem(\"bookmarks\");\n        if (bookmarkstr) {\n          const bookmarkIds = JSON.parse(bookmarkstr);\n          context.state.bookmarks = context.state.resourceItems.filter(item => {\n            return bookmarkIds.includes(item.id);\n          });\n          console.log(\"bookmarks restored\", context.state.bookmarks);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  },\n  mutations: {\n    setImJoy(state, imjoy) {\n      state.imjoy = imjoy;\n    },\n    addBookmark(state, item) {\n      const ids = state.bookmarks.map(item => item.id);\n      if (!ids.includes(item.id)) state.bookmarks.push(item);\n      try {\n        localStorage.setItem(\"bookmarks\", JSON.stringify(ids));\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    removeBookmark(state, item) {\n      const ids = state.bookmarks.map(item => item.id);\n      const index = ids.indexOf(item.id);\n      if (index >= 0) {\n        state.bookmarks.splice(index, 1);\n      }\n      try {\n        localStorage.setItem(\"bookmarks\", JSON.stringify(ids));\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    clearBookmarks(state) {\n      state.bookmarks = [];\n      const ids = state.bookmarks.map(item => item.id);\n      try {\n        localStorage.setItem(\"bookmarks\", JSON.stringify(ids));\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    addResourceItem(state, item) {\n      item.id = item.id || randId();\n      item.id = item.id.toLowerCase();\n      item.links = item.links || [];\n      item.links = item.links.map(link => link.toLowerCase());\n      item.authors = item.authors || [];\n      item.authors = item.authors.map(author =>\n        typeof author === \"string\" ? { name: author } : author\n      );\n      item.config = item.config || {};\n      if (item.config._deposit) {\n        const userId = state.zenodoClient && state.zenodoClient.getUserId();\n        if (userId && item.config._deposit.owners.includes(userId)) {\n          if (!item.tags.includes(\"editable\")) item.tags.push(\"editable\");\n        }\n      }\n      item.config._rdf_file = item.config._rdf_file || item.source; // TODO: some resources current doesn't have a dedicated rdf_file\n      if (item.type === \"application\" && item?.source?.endsWith(\".imjoy.html\"))\n        state.allApps[item.id] = item;\n      // index tags\n      if (item.tags && item.tags.length > 0)\n        item.tags = item.tags.map(tag => tag.toLowerCase().replace(/ /g, \"-\"));\n      item.tags.map(tag => {\n        if (!state.allTags.includes(tag)) {\n          state.allTags.push(tag);\n        }\n      });\n      state.resourceItems.push(item);\n    },\n    removeResourceItem(state, item) {\n      if (item.type === \"application\") delete state.allApps[item.id];\n      const index = state.resourceItems.indexOf(item);\n      if (index >= 0) state.resourceItems.splice(index, 1);\n    },\n    normalizeItems(state, transform) {\n      // add default links\n      state.resourceItems.map(item => {\n        normalizeItem(item);\n        const setting = siteConfig.resource_categories.find(\n          cat => cat.type === item.type\n        );\n        if (setting && setting.default_links) {\n          item.links = item.links || [];\n          for (let link of setting.default_links) {\n            if (state.resourceItems.find(item => item.id === link))\n              item.links.push(link);\n            else console.warn(\"Default link item not foud: \" + link);\n          }\n        }\n      });\n      state.resourceItems = state.resourceItems.map(item => {\n        // make sure the id and links are in lowercase\n        item.id = item.id || randId();\n        item.id = item.id.toLowerCase();\n        item.links = item.links || [];\n        item.links = item.links.map(link => link.toLowerCase());\n        item.links = [...new Set(item.links)];\n        if (transform) transform(item);\n        return item;\n      });\n    }\n  }\n});\n","import { store } from \"./store\";\n\nlet api;\nexport async function setupBioEngine() {\n  return new Promise((resolve, reject) => {\n    window\n      .loadImJoyBasicApp({\n        process_url_query: true,\n        show_window_title: false,\n        show_progress_bar: true,\n        show_empty_window: true,\n        hide_about_imjoy: true,\n        menu_style: {},\n        window_style: {\n          width: \"100%\",\n          height: \"100%\"\n        },\n        main_container: null,\n        menu_container: \"imjoy-menu\",\n        window_manager_container: null,\n        imjoy_api: {} // override some imjoy API functions here\n      })\n      .then(async app => {\n        const baseUrl = window.location.origin + window.location.pathname;\n        // FIXME: This is a temporary fix for the sending file from shareloc.xyz to imjoy.io\n        // Without this, the file object won't be able to perform .slice operation\n        // In Chrome, this issue only happens if the file size exceed some size\n        app.imjoy.pm.default_base_frame = baseUrl + \"default_base_frame.html\";\n        app.imjoy.pm.init();\n        // get the api object from the root plugin\n        api = app.imjoy.api;\n        store.commit(\"setImJoy\", app.imjoy);\n        app.$on(\"window-size-pos-changing\", changing => {\n          const iframes = document.querySelectorAll(\".reveal iframe\");\n          for (let iframe of iframes) {\n            iframe.style.pointerEvents = changing ? \"none\" : \"all\";\n          }\n        });\n        // if you want to let users to load new plugins, add a menu item\n        app.addMenuItem({\n          label: \" Load Plugin\",\n          callback() {\n            const uri = prompt(`Please type a ImJoy plugin URL`, \"\");\n            if (uri) app.loadPlugin(uri);\n          }\n        });\n        // expose global variables\n        // window.api = api;\n        // window.imjoy = app.imjoy;\n        // window.app = app;\n        // TODO: hacky solution, need further investigation\n        // imjoy.event_bus.on(\"add_window\", w => {\n        //   if(imjoy.wm.windows.indexOf(w)<0){\n        //     imjoy.wm.windows.push(w);\n        //   }\n        // });\n        await app.imjoy.pm.reloadPluginRecursively({\n          uri: baseUrl + \"SMLM-File-IO.imjoy.html\"\n        });\n        await app.loadPlugin(baseUrl + \"ShareLoc-Downloader.imjoy.html\");\n        // This will also add an entry to the plugin menu\n        await app.loadPlugin(baseUrl + \"FairyDust.imjoy.html\");\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        const engine = urlParams.get(\"engine\");\n        const spec = urlParams.get(\"spec\");\n\n        app.imjoy.pm\n          .reloadPluginRecursively({\n            // uri: \"http://localhost:9090/Jupyter-Engine-Manager.imjoy.html\"\n            uri:\n              \"https://imjoy-team.github.io/jupyter-engine-manager/Jupyter-Engine-Manager.imjoy.html\"\n          })\n          .then(enginePlugin => {\n            if (engine) {\n              enginePlugin.api\n                .createEngine({\n                  name: \"MyCustomEngine\",\n                  nbUrl: engine,\n                  url: engine.split(\"?\")[0]\n                })\n                .then(() => {\n                  console.log(\"Jupyter Engine connected!\");\n                })\n                .catch(e => {\n                  console.error(\"Failed to connect to Jupyter Engine\", e);\n                });\n            } else {\n              enginePlugin.api\n                .createEngine({\n                  name: \"MyBinder Engine\",\n                  url: \"https://mybinder.org\",\n                  spec: spec || \"oeway/imjoy-binder-image/master\"\n                })\n                .then(() => {\n                  console.log(\"Binder Engine connected!\");\n                })\n                .catch(e => {\n                  console.error(\"Failed to connect to MyBinder Engine\", e);\n                });\n            }\n          });\n\n        app.addMenuItem({\n          label: \" Github\",\n          callback() {\n            window.open(\"https://github.com/imodpasteur/shareLoc.xyz\");\n          }\n        });\n        resolve(app.imjoy);\n      })\n      .catch(e => {\n        console.error(e);\n        reject(e);\n      });\n  });\n}\n\nexport async function runAppForAllItems(context, config, allItems) {\n  console.log(config, allItems);\n  context.showLoader(true);\n  try {\n    if (config.passive) {\n      await api.createWindow({ src: config.source, passive: true });\n      return;\n    }\n    const plugin = await api.getPlugin({ src: config.source });\n    await plugin.run({\n      config: {\n        referer: window.location.href,\n        mode: \"all\",\n        type: \"shareloc.xyz\"\n      },\n      data: allItems\n    });\n    context.showLoader(false);\n  } catch (e) {\n    console.error(e);\n    api.showMessage(`${e.message}`);\n  } finally {\n    context.showLoader(false);\n  }\n  // }\n}\n\nexport async function runAppForItem(context, config, item) {\n  console.log(config, item);\n  context.showLoader(true);\n  try {\n    if (config.passive) {\n      const plugin = await api.createWindow({\n        src: config.source,\n        passive: true\n      });\n      if (plugin.cancel) {\n        context.showLoader(true, () => {\n          plugin.cancel();\n        });\n      }\n      return;\n    }\n\n    const plugin = await api.getPlugin({ src: config.source });\n    context.showLoader(false);\n    if (plugin.cancel) {\n      context.showLoader(true, () => {\n        plugin.cancel();\n      });\n    } else {\n      context.showLoader(true);\n    }\n    await plugin.run({\n      config: {\n        referer: window.location.href,\n        mode: \"one\",\n        type: \"shareloc.xyz\"\n      },\n      data: item\n    });\n  } catch (e) {\n    console.error(e);\n    api.showMessage(`${e.message}`);\n  } finally {\n    context.showLoader(false);\n  }\n}\n","<template>\n  <div id=\"app\">\n    <!-- Navigation bar -->\n    <nav class=\"navbar is-link is-fixed-top\" v-if=\"showNavbar\">\n      <div class=\"navbar-brand\">\n        <a href=\"#/\">\n          <img\n            style=\"width: 264px; margin-left:8px; margin-top: 6px;\"\n            :src=\"siteConfig.site_logo\"\n          />\n        </a>\n        <div\n          class=\"navbar-burger burger\"\n          :class=\"{ 'is-active': showMenu }\"\n          data-target=\"navbarExampleTransparentExample\"\n          @click=\"showMenu = !showMenu\"\n        >\n          <span></span>\n          <span></span>\n          <span></span>\n        </div>\n      </div>\n\n      <div\n        id=\"navbarExampleTransparentExample\"\n        :class=\"{ 'is-active': showMenu }\"\n        class=\"navbar-menu\"\n      >\n        <div class=\"navbar-end\">\n          <b-dropdown\n            style=\"margin-top: 6px;\"\n            v-if=\"bookmarks && bookmarks.length > 0\"\n            class=\"navbar-item\"\n            :scrollable=\"true\"\n            :max-height=\"200\"\n            aria-role=\"list\"\n          >\n            <template #trigger>\n              <a class=\"navbar-item\">\n                <b-icon style=\"color:white;\" icon=\"bookmark\"></b-icon>\n              </a>\n            </template>\n\n            <b-dropdown-item\n              v-for=\"(rdf, index) in bookmarks\"\n              :key=\"index\"\n              aria-role=\"listitem\"\n              @click=\"showResourceItemInfo(rdf)\"\n            >\n              <div class=\"media\">\n                <b-icon class=\"media-left\" icon=\"database\"></b-icon>\n                <div class=\"media-content\">\n                  <h3>{{ rdf.name }}</h3>\n                </div>\n              </div>\n            </b-dropdown-item>\n            <b-dropdown-item aria-role=\"listitem\" @click=\"uploadBookmarks()\">\n              <div class=\"media\">\n                <b-icon class=\"media-left\" icon=\"upload\"></b-icon>\n                <div class=\"media-content\">\n                  <h3>Upload All</h3>\n                </div>\n              </div>\n            </b-dropdown-item>\n            <b-dropdown-item aria-role=\"listitem\" @click=\"downloadBookmarks()\">\n              <div class=\"media\">\n                <b-icon class=\"media-left\" icon=\"cloud-download\"></b-icon>\n                <div class=\"media-content\">\n                  <h3>Download All</h3>\n                </div>\n              </div>\n            </b-dropdown-item>\n            <b-dropdown-item aria-role=\"listitem\" @click=\"clearBookmarks()\">\n              <div class=\"media\">\n                <b-icon class=\"media-left\" icon=\"close\"></b-icon>\n                <div class=\"media-content\">\n                  <h3>Clear All</h3>\n                </div>\n              </div>\n            </b-dropdown-item>\n          </b-dropdown>\n\n          <a\n            class=\"navbar-item\"\n            v-if=\"siteConfig.contribute_url && $route.name !== 'Upload'\"\n            href=\"#/upload\"\n          >\n            <b-icon icon=\"plus\"></b-icon>\n            <span>Upload</span>\n          </a>\n          <a\n            class=\"navbar-item\"\n            href=\"#/viewer\"\n            v-if=\"$route.name !== 'Viewer'\"\n          >\n            <b-icon icon=\"eye-outline\"></b-icon>\n            <span>Viewer</span>\n          </a>\n          <a class=\"navbar-item\" href=\"#/about\">\n            <b-icon icon=\"information-outline\"></b-icon>\n            <span>About</span>\n          </a>\n          <a class=\"navbar-item\" id=\"imjoy-menu\"> </a>\n        </div>\n      </div>\n    </nav>\n    <!-- Header -->\n    <router-view\n      :style=\"{ marginTop: showNavbar ? '72px' : '0px' }\"\n      class=\"router-view\"\n    />\n  </div>\n</template>\n<script>\nimport { mapState } from \"vuex\";\nimport { runAppForAllItems } from \"./bioEngine\";\n\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      showMenu: false,\n      loadingComponent: null\n    };\n  },\n  computed: {\n    ...mapState({\n      showNavbar: state => state.showNavbar,\n      siteConfig: state => state.siteConfig,\n      bookmarks: state => state.bookmarks,\n      eventBus: state => state.eventBus\n    })\n  },\n  methods: {\n    showResourceItemInfo(item) {\n      this.eventBus.$emit(\"showResourceItemInfo\", item);\n    },\n    clearBookmarks() {\n      this.$store.commit(\"clearBookmarks\");\n    },\n    showLoader(enable, cancelCallback) {\n      if (enable)\n        this.loadingComponent = this.$buefy.loading.open({\n          canCancel: true,\n          onCancel: () => {\n            if (cancelCallback) cancelCallback();\n          }\n        });\n      else {\n        if (this.loadingComponent) {\n          this.loadingComponent.close();\n          this.loadingComponent = null;\n        }\n      }\n    },\n    uploadBookmarks() {\n      this.$router.push({\n        name: \"Update\",\n        params: { updateDepositId: \"bookmarks\" }\n      });\n    },\n    async downloadBookmarks() {\n      const baseUrl = window.location.origin + window.location.pathname;\n      await runAppForAllItems(\n        this,\n        { source: baseUrl + \"ShareLoc-Downloader.imjoy.html\" },\n        this.bookmarks\n      );\n    }\n  }\n};\n</script>\n\n<style>\nhtml,\nbody {\n  width: 100vw;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;\n  background: #dcdcdc;\n  overscroll-behavior-y: none;\n}\n.card {\n  margin-bottom: 3rem;\n}\n.content-wrapper {\n  margin-top: 3rem;\n}\n.card-footer-item {\n  font-size: 12px;\n  font-weight: normal;\n}\n.card-header-title {\n  display: block;\n}\n.card-content p {\n  margin-bottom: 2rem;\n}\n.container {\n  max-width: 95%;\n}\n.fa-code,\n.fa-search {\n  margin-right: 0.5vw;\n}\n/* used in the upload preview */\n.snap-button {\n  left: 50%;\n  transform: translate(-50%, 0) !important;\n  background: #f0f8ff42 !important;\n  color: white !important;\n  position: absolute !important;\n  bottom: 0px;\n  font-weight: 400 !important;\n}\n\n.snap-button:hover {\n  background: white !important;\n  color: black !important;\n}\n\n.input-title > input {\n  box-shadow: none !important;\n}\n\n.router-view {\n  overflow: auto;\n  height: calc(100vh - 72px);\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4b469b44&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable no-console */\n\nimport { register } from \"register-service-worker\";\n\nif (process.env.NODE_ENV === \"production\") {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready() {\n      console.log(\n        \"App is being served from cache by a service worker.\\n\" +\n          \"For more details, visit https://goo.gl/AFskqB\"\n      );\n    },\n    registered() {\n      console.log(\"Service worker has been registered.\");\n    },\n    cached() {\n      console.log(\"Content has been cached for offline use.\");\n    },\n    updatefound() {\n      console.log(\"New content is downloading.\");\n    },\n    updated() {\n      console.log(\"New content is available; please refresh.\");\n    },\n    offline() {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    },\n    error(error) {\n      console.error(\"Error during service worker registration:\", error);\n    }\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('section',{staticClass:\"hero is-link is-fullheight is-fullheight-with-navbar\",staticStyle:{\"max-height\":\"1024px!important\",\"min-height\":\"380px\",\"background-image\":\"url(/static/img/bg.jpg)\"}},[(_vm.zenodoClient.isSandbox)?_c('b-notification',{attrs:{\"type\":\"is-warning\",\"has-icon\":\"\",\"aria-close-label\":\"Close notification\",\"role\":\"alert\"}},[_vm._v(\" You are using the SANDBOX mode for testing purposes. You can also \"),_c('a',{on:{\"click\":function($event){return _vm.switchToProduction()}}},[_vm._v(\"switch to the production mode\")]),_vm._v(\". \")]):(_vm.siteConfig.zenodo_config.use_sandbox)?_c('b-notification',{attrs:{\"type\":\"is-info\",\"has-icon\":\"\",\"aria-close-label\":\"Close notification\",\"role\":\"alert\"}},[_vm._v(\" You are using the PRODUCTION mode, if you want to test the website features, please \"),_c('a',{on:{\"click\":function($event){return _vm.switchToSandbox()}}},[_vm._v(\"switch to the sanbox mode\")]),_vm._v(\". \")]):_vm._e(),_c('div',{staticClass:\"hero-body\",staticStyle:{\"position\":\"relative\"}},[(_vm.selectedPartner)?_c('img',{staticClass:\"background-img\",attrs:{\"src\":_vm.selectedPartner.background_image}}):_c('img',{staticClass:\"background-img\",attrs:{\"src\":_vm.siteConfig.background_image}}),(_vm.selectedPartner)?_c('div',{staticClass:\"container\"},[_c('h1',{staticClass:\"title is-1\"},[_vm._v(\" \"+_vm._s(_vm.selectedPartner.splash_title)+\" \")]),_c('h2',{staticClass:\"subtitle is-3\"},[_vm._v(\" \"+_vm._s(_vm.selectedPartner.splash_subtitle)+\" \")]),(_vm.selectedPartner.splash_feature_list)?_c('ul',{staticClass:\"feature-list\"},_vm._l((_vm.selectedPartner.splash_feature_list),function(feature){return _c('li',{key:feature},[_vm._v(\" \"+_vm._s(feature)+\" \")])}),0):_vm._e(),_c('br'),(_vm.selectedPartner.about_url)?_c('b-button',{staticStyle:{\"text-transform\":\"none\"},attrs:{\"rounded\":\"\"},on:{\"click\":function($event){return _vm.showAboutPartner(_vm.selectedPartner)}}},[_c('span',{staticClass:\"explore-btn\"},[_vm._v(\"About\")])]):_vm._e()],1):_c('div',{staticClass:\"container\"},[_c('h1',{staticClass:\"title is-1\"},[_vm._v(\" \"+_vm._s(_vm.siteConfig.splash_title)+\" \")]),_c('h2',{staticClass:\"subtitle is-3\"},[_vm._v(\" \"+_vm._s(_vm.siteConfig.splash_subtitle)+\" \")]),(_vm.siteConfig.splash_feature_list)?_c('ul',{staticClass:\"feature-list\"},_vm._l((_vm.siteConfig.splash_feature_list),function(feature){return _c('li',{key:feature},[_vm._v(\" \"+_vm._s(feature)+\" \")])}),0):_vm._e(),_c('br')])])],1),_c('br'),_c('section',{staticStyle:{\"margin-top\":\"-30px\",\"opacity\":\"0.6\"}},[_c('b-progress',{attrs:{\"value\":_vm.progress}})],1),_c('br'),_c('span',{ref:\"search_anchor\"}),(_vm.resourceCategories.length > 1)?_c('div',{staticClass:\"container\",staticStyle:{\"text-align\":\"center\"}},[_c('b-tooltip',{attrs:{\"label\":\"List all items\",\"position\":\"is-bottom\"}},[_c('div',{staticClass:\"item-lists is-link\",class:{ active: !_vm.selectedCategory },staticStyle:{\"width\":\"30px\",\"margin-left\":\"-16px\",\"border-bottom-color\":\"gray\"},on:{\"click\":function($event){_vm.selectedCategory = null;\n          _vm.updateQueryTags();}}},[_vm._v(\" All \")])]),_vm._l((_vm.resourceCategories),function(list){return _c('b-tooltip',{key:list.name,attrs:{\"label\":list.description,\"position\":\"is-bottom\"}},[_c('div',{staticClass:\"item-lists is-link\",class:{ active: _vm.selectedCategory === list },style:({ 'border-bottom-color': list.outline_color }),on:{\"click\":function($event){_vm.selectedCategory = list;\n          _vm.updateQueryTags();}}},[_vm._v(\" \"+_vm._s(list.name)+\" \")])])})],2):_vm._e(),_c('resource-item-selector',{attrs:{\"allItems\":_vm.resourceItems,\"tagCategories\":_vm.tagCategories,\"type\":_vm.selectedCategory && _vm.selectedCategory.type,\"showDisplayMode\":_vm.screenWidth > 700,\"searchTags\":_vm.searchTags},on:{\"selection-changed\":_vm.updateResourceItemList,\"display-mode-change\":_vm.displayModeChanged,\"tags-updated\":_vm.updateQueryTags,\"input-change\":_vm.removePartner}}),_c('br'),(_vm.selectedItems)?_c('resource-item-list',{attrs:{\"allItems\":_vm.selectedItems,\"displayMode\":_vm.screenWidth > 700 ? _vm.displayMode : 'card'},on:{\"show-resource-item-info\":_vm.showResourceItemInfo,\"select-tag\":function($event){_vm.searchTags = [$event]}}}):_vm._e(),_c('br'),_c('footer',{staticClass:\"footer\"},[(_vm.siteConfig.footer)?_c('div',{staticClass:\"columns is-mobile is-centered\"},_vm._l((_vm.siteConfig.footer),function(item){return _c('div',{key:item.label,staticClass:\"column is-one-quarter\",staticStyle:{\"text-align\":\"center\"}},[_c('b-tooltip',{attrs:{\"label\":item.tooltip,\"position\":\"is-top\"}},[_c('a',{attrs:{\"href\":item.url,\"target\":\"_blank\"}},[_c('figure',[_c('img',{staticStyle:{\"max-height\":\"55px\"},attrs:{\"src\":item.logo}}),_c('figcaption',{staticClass:\"hide-on-small-screen\"},[_vm._v(\" \"+_vm._s(item.label)+\" \")])])])])],1)}),0):_vm._e(),(_vm.siteConfig.footnote)?_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('p',[_vm._v(_vm._s(_vm.siteConfig.footnote))])]):_vm._e()]),_c('modal',{staticStyle:{\"max-width\":\"100%\",\"max-height\":\"100%\",\"z-index\":\"9999\"},attrs:{\"name\":\"window-modal-dialog\",\"resizable\":!_vm.dialogWindowConfig.fullscreen,\"width\":_vm.dialogWindowConfig.width,\"height\":\"auto\",\"adaptive_size\":_vm.dialogWindowConfig.adaptive_size,\"minWidth\":200,\"minHeight\":150,\"fullscreen\":_vm.dialogWindowConfig.fullscreen,\"draggable\":\".drag-handle\",\"scrollable\":true}},[(_vm.selectedDialogWindow)?_c('div',{staticClass:\"dialog-header\",class:{ 'drag-handle': !_vm.isTouchDevice },on:{\"dblclick\":function($event){return _vm.maximizeDialogWindow()}}},[_c('div',{staticStyle:{\"position\":\"absolute\",\"left\":\"2px\",\"margin-top\":\"-1px\"}},[_c('button',{staticClass:\"noselect dialog-control-button\",staticStyle:{\"background\":\"#ff0000c4\"},on:{\"click\":function($event){return _vm.closeDialogWindow(_vm.selectedDialogWindow)}}},[_vm._v(\" x \")]),(_vm.screenWidth > 700)?_c('button',{staticClass:\"noselect dialog-control-button\",staticStyle:{\"background\":\"#00cdff61\"},on:{\"click\":function($event){return _vm.minimizeDialogWindow()}}},[_vm._v(\" - \")]):_vm._e(),(_vm.screenWidth > 700)?_c('button',{staticClass:\"noselect dialog-control-button\",staticStyle:{\"background\":\"#00cdff61\"},on:{\"click\":function($event){return _vm.maximizeDialogWindow()}}},[_vm._v(\" \"+_vm._s(_vm.dialogWindowConfig.fullscreen ? \"=\" : \"+\")+\" \")]):_vm._e()]),_c('span',{staticClass:\"noselect dialog-title\"},[_vm._v(\" \"+_vm._s(_vm.selectedDialogWindow.name))]),_c('b-dropdown',{staticStyle:{\"position\":\"absolute\",\"right\":\"1px\"},attrs:{\"aria-role\":\"list\",\"position\":\"is-bottom-left\"}},[_c('button',{staticClass:\"button\",staticStyle:{\"background\":\"rgba(0, 205, 255, 0.38)\",\"color\":\"white\",\"width\":\"34px\"},attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('b-icon',{attrs:{\"icon\":\"dots-horizontal\"}})],1),_vm._l((_vm.dialogWindows),function(w){return _c('b-dropdown-item',{key:w.id,attrs:{\"aria-role\":\"listitem\"},on:{\"click\":function($event){return _vm.selectWindow(w)}}},[_vm._v(_vm._s(w.name))])})],2)],1):_vm._e(),_vm._l((_vm.dialogWindows),function(wdialog){return [_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(wdialog === _vm.selectedDialogWindow),expression:\"wdialog === selectedDialogWindow\"}],key:wdialog.window_id,staticStyle:{\"height\":\"calc(100% - 40px)\",\"overflow\":\"auto\"}},[_c('div',{staticClass:\"noselect\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":wdialog.window_id}})])]})],2),_c('modal',{staticStyle:{\"max-width\":\"100%\",\"max-height\":\"100%\"},attrs:{\"name\":\"info-dialog\",\"resizable\":true,\"minWidth\":200,\"minHeight\":150,\"height\":\"auto\",\"width\":800,\"fullscreen\":_vm.infoDialogFullscreen,\"draggable\":\".drag-handle\",\"scrollable\":true}},[_c('div',{staticClass:\"dialog-header\",class:{ 'drag-handle': !_vm.isTouchDevice },on:{\"dblclick\":function($event){return _vm.maximizeInfoWindow()}}},[_c('div',{staticStyle:{\"position\":\"absolute\",\"left\":\"2px\",\"margin-top\":\"-1px\"}},[_c('button',{staticClass:\"noselect dialog-control-button\",staticStyle:{\"background\":\"#ff0000c4\"},on:{\"click\":function($event){return _vm.closeInfoWindow()}}},[_vm._v(\" x \")]),(_vm.screenWidth > 700)?_c('button',{staticClass:\"noselect dialog-control-button\",staticStyle:{\"background\":\"#00cdff61\"},on:{\"click\":function($event){return _vm.maximizeInfoWindow()}}},[_vm._v(\" \"+_vm._s(_vm.infoDialogFullscreen ? \"=\" : \"+\")+\" \")]):_vm._e()]),_c('span',{staticClass:\"noselect dialog-title\"},[_vm._v(\" \"+_vm._s(_vm.infoDialogTitle))])]),_c('div',{staticClass:\"modal-dialog-content\"},[(_vm.showInfoDialogMode === 'about')?_c('about',{on:{\"contribute\":_vm.showUploadDialog}}):(_vm.showInfoDialogMode === 'upload')?_c('upload',{attrs:{\"site-config\":_vm.siteConfig,\"deposition-id\":null}}):(_vm.showInfoDialogMode === 'viewer')?_c('iframe',{staticStyle:{\"padding-bottom\":\"64px\",\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"src\":_vm.viewerUrl,\"width\":\"640\",\"height\":\"852\",\"frameborder\":\"0\",\"marginheight\":\"0\",\"marginwidth\":\"0\"}},[_vm._v(\"Loading\")]):(_vm.showInfoDialogMode === 'edit')?_c('div',[_c('upload',{attrs:{\"site-config\":_vm.siteConfig,\"deposition-id\":_vm.currentDepositionId}})],1):(_vm.showInfoDialogMode === 'markdown')?_c('div',{staticClass:\"markdown-container\"},[_c('markdown',{attrs:{\"content\":_vm.infoMarkdownContent,\"url\":_vm.infoMarkdownUrl}})],1):(\n          _vm.showInfoDialogMode === 'attachments' && _vm.selectedResourceItem\n        )?_c('div',{staticClass:\"markdown-container\"},[_c('attachments',{attrs:{\"attachments\":_vm.selectedResourceItem.attachments,\"focusTarget\":_vm.selectedResourceItem._focus}})],1):(_vm.showInfoDialogMode === 'subscribe')?_c('iframe',{staticStyle:{\"padding-bottom\":\"64px\",\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"src\":_vm.siteConfig.subscribe_url,\"width\":\"640\",\"height\":\"852\",\"frameborder\":\"0\",\"marginheight\":\"0\",\"marginwidth\":\"0\"}},[_vm._v(\"Loading\")]):(_vm.showInfoDialogMode === 'item' && _vm.selectedResourceItem)?_c('resource-item-info',{attrs:{\"resource-id\":_vm.selectedResourceItem.id}}):_vm._e()],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container content-wrapper\"},[_c('section',{staticClass:\"center \"},[_c('b-field',{staticStyle:{\"max-width\":\"calc(100vw - 10px)\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}}},[_c('b-taginput',{staticClass:\"searchbar\",attrs:{\"loading\":_vm.loading,\"type\":\"is-info\",\"allow-new\":\"\",\"data\":_vm.filteredTags,\"open-on-focus\":true,\"autocomplete\":\"\",\"ellipsis\":\"\",\"icon\":\"magnify\",\"placeholder\":\"Type a keyword and press enter\"},on:{\"input\":_vm.updateSelectedTags,\"typing\":_vm.getFilteredTags},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_vm._v(\" \"+_vm._s(props.option)+\" \")]}}]),model:{value:(_vm.selectedTags),callback:function ($$v) {_vm.selectedTags=$$v},expression:\"selectedTags\"}}),_c('b-dropdown',{attrs:{\"aria-role\":\"list\",\"position\":\"is-bottom-left\"}},[_c('button',{staticClass:\"button tags-button\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('span',[_vm._v(\"Tags\")]),_c('b-icon',{attrs:{\"icon\":\"menu-down\"}})],1),_c('div',{staticClass:\"dropdown-panel\",attrs:{\"aria-role\":\"listitem\"}},[_c('div',{staticClass:\"container\",staticStyle:{\"max-width\":\"100%\"}},[_c('div',{staticClass:\"field\"},[_c('b-switch',{model:{value:(_vm.matchingAll),callback:function ($$v) {_vm.matchingAll=$$v},expression:\"matchingAll\"}},[_vm._v(\"Match: \"+_vm._s(_vm.matchingAll ? \" All\" : \"Any\"))]),_c('b-switch',{model:{value:(_vm.freeTextMode),callback:function ($$v) {_vm.freeTextMode=$$v},expression:\"freeTextMode\"}},[_vm._v(\"Free Text: \"+_vm._s(_vm.freeTextMode ? \" Enabled\" : \"Disabled\"))])],1),_vm._l((_vm.categories.groupKeys),function(name){return _c('div',{key:name,staticClass:\"column\"},[_vm._v(\" \"+_vm._s(name.split(\".\").length === 2 ? name.split(\".\")[1] : name)+\": \"),_c('br'),_vm._l((_vm.categories.grouped[name]),function(t){return _c('a',{key:t,staticStyle:{\"display\":\"inline-block\"},on:{\"click\":function($event){return _vm.addTagSelection(t)}}},[_c('b-tag',{staticStyle:{\"cursor\":\"pointer\"},attrs:{\"rounded\":\"\"}},[_vm._v(_vm._s(t))])],1)})],2)}),_c('div',{staticClass:\"column\"},[(Object.keys(_vm.categories.grouped).length > 0)?_c('span',[_vm._v(\"other: \"),_c('br')]):_vm._e(),_vm._l((_vm.categories.other),function(t){return _c('a',{key:t,staticStyle:{\"display\":\"inline-block\"},on:{\"click\":function($event){return _vm.addTagSelection(t)}}},[_c('b-tag',{staticStyle:{\"cursor\":\"pointer\"},attrs:{\"rounded\":\"\"}},[_vm._v(_vm._s(t))])],1)})],2)],2)])]),(_vm.showDisplayMode)?_c('b-field',{staticClass:\"display-mode-btn\"},[_c('p',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"label\":\"Display mode: list\",\"position\":\"is-top\"}},[_c('button',{staticClass:\"button\",class:{ 'is-primary': _vm.displayMode === 'list' },staticStyle:{\"top\":\"1px\",\"height\":\"34px\"},on:{\"click\":function($event){return _vm.switchDisplayMode('list')}}},[_c('b-icon',{attrs:{\"icon\":\"format-list-bulleted\"}})],1)])],1),_c('p',{staticClass:\"control\"},[_c('b-tooltip',{attrs:{\"label\":\"Display mode: card\",\"position\":\"is-top\"}},[_c('button',{staticClass:\"button\",class:{ 'is-primary': _vm.displayMode === 'card' },staticStyle:{\"top\":\"1px\",\"height\":\"34px\"},on:{\"click\":function($event){return _vm.switchDisplayMode('card')}}},[_c('b-icon',{attrs:{\"icon\":\"view-grid\"}})],1)])],1)]):_vm._e()],1),_c('b-field')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container content-wrapper\">\n    <section class=\"center \">\n      <b-field style=\"max-width: calc(100vw - 10px);\" @keyup.enter=\"search\">\n        <b-taginput\n          :loading=\"loading\"\n          type=\"is-info\"\n          allow-new\n          class=\"searchbar\"\n          :data=\"filteredTags\"\n          :open-on-focus=\"true\"\n          autocomplete\n          @input=\"updateSelectedTags\"\n          @typing=\"getFilteredTags\"\n          v-model=\"selectedTags\"\n          ellipsis\n          icon=\"magnify\"\n          placeholder=\"Type a keyword and press enter\"\n        >\n          <template slot-scope=\"props\">\n            {{ props.option }}\n          </template>\n        </b-taginput>\n        <b-dropdown aria-role=\"list\" position=\"is-bottom-left\">\n          <button class=\"button tags-button\" slot=\"trigger\">\n            <span>Tags</span>\n            <b-icon icon=\"menu-down\"></b-icon>\n          </button>\n\n          <div class=\"dropdown-panel\" aria-role=\"listitem\">\n            <div class=\"container\" style=\"max-width:100%;\">\n              <div class=\"field\">\n                <b-switch v-model=\"matchingAll\"\n                  >Match: {{ matchingAll ? \" All\" : \"Any\" }}</b-switch\n                >\n                <b-switch v-model=\"freeTextMode\"\n                  >Free Text:\n                  {{ freeTextMode ? \" Enabled\" : \"Disabled\" }}</b-switch\n                >\n              </div>\n\n              <div\n                class=\"column\"\n                v-for=\"name in categories.groupKeys\"\n                :key=\"name\"\n              >\n                {{ name.split(\".\").length === 2 ? name.split(\".\")[1] : name }}:\n                <br />\n                <a\n                  @click=\"addTagSelection(t)\"\n                  v-for=\"t in categories.grouped[name]\"\n                  :key=\"t\"\n                  style=\"display:inline-block;\"\n                >\n                  <b-tag style=\"cursor: pointer;\" rounded>{{ t }}</b-tag>\n                </a>\n              </div>\n\n              <div class=\"column\">\n                <span v-if=\"Object.keys(categories.grouped).length > 0\"\n                  >other: <br\n                /></span>\n                <a\n                  @click=\"addTagSelection(t)\"\n                  v-for=\"t in categories.other\"\n                  :key=\"t\"\n                  style=\"display:inline-block;\"\n                >\n                  <b-tag rounded style=\"cursor: pointer;\">{{ t }}</b-tag>\n                </a>\n              </div>\n            </div>\n          </div>\n        </b-dropdown>\n        <b-field class=\"display-mode-btn\" v-if=\"showDisplayMode\">\n          <p class=\"control\">\n            <b-tooltip label=\"Display mode: list\" position=\"is-top\">\n              <button\n                class=\"button\"\n                :class=\"{ 'is-primary': displayMode === 'list' }\"\n                @click=\"switchDisplayMode('list')\"\n                style=\"top:1px;height:34px;\"\n              >\n                <b-icon icon=\"format-list-bulleted\"></b-icon>\n              </button>\n            </b-tooltip>\n          </p>\n          <p class=\"control\">\n            <b-tooltip label=\"Display mode: card\" position=\"is-top\">\n              <button\n                class=\"button\"\n                :class=\"{ 'is-primary': displayMode === 'card' }\"\n                @click=\"switchDisplayMode('card')\"\n                style=\"top:1px;height:34px;\"\n              >\n                <b-icon icon=\"view-grid\"></b-icon>\n              </button>\n            </b-tooltip>\n          </p>\n        </b-field>\n        <!-- <button style=\"height:36px;\" class=\"button is-primary\">Search</button> -->\n      </b-field>\n      <b-field> </b-field>\n    </section>\n  </div>\n</template>\n\n<script>\nimport { debounce } from \"../utils\";\nexport default {\n  name: \"ResourceItemSelector\",\n  props: {\n    allItems: {\n      type: Array,\n      default: null\n    },\n    type: {\n      type: String,\n      default: null\n    },\n    tagCategories: {\n      type: Object,\n      default: null\n    },\n    showDisplayMode: {\n      type: Boolean,\n      default: false\n    },\n    searchTags: {\n      type: Array,\n      default: null\n    }\n  },\n  data() {\n    return {\n      selectedItems: [],\n      selectedTags: [],\n      filteredTags: [],\n      loading: false,\n      matchingAll: true,\n      freeTextMode: true,\n      displayMode: \"card\"\n    };\n  },\n  watch: {\n    type: function(newType) {\n      if (!this.allItems) return;\n      this.type = newType;\n      this.applySearch(this.selectedTags);\n    },\n    selectedTags: function(newTags) {\n      this.applySearch(newTags);\n    },\n    allItems: function() {\n      this.applySearch(this.selectedTags);\n    },\n    searchTags: function(newTags) {\n      if (!newTags) {\n        this.selectedTags = [];\n        return;\n      }\n      const is_same =\n        newTags &&\n        newTags.length == this.selectedTags.length &&\n        newTags.every((element, index) => {\n          return element === this.selectedTags[index];\n        });\n      if (is_same) return;\n      newTags = newTags.filter(tag => tag && tag.trim() != \"\");\n      this.selectedTags = Array.from(new Set(newTags));\n    }\n  },\n  mounted() {\n    this.filteredTags = this.fullLabelList;\n  },\n  computed: {\n    categories() {\n      if (!this.tagCategories) {\n        return { grouped: {}, other: this.fullLabelList };\n      }\n      const cate = {};\n      const other = [];\n      const lowerSelected = this.selectedTags.map(a => a.toLowerCase());\n      for (let t of this.fullLabelList) {\n        if (lowerSelected.indexOf(t.toLowerCase()) >= 0) continue;\n        let found = false;\n        for (let c of Object.keys(this.tagCategories)) {\n          for (let k of this.tagCategories[c]) {\n            if (k.toLowerCase() === t.toLowerCase()) {\n              if (!cate[c]) cate[c] = [];\n              cate[c].push(k);\n              found = true;\n              break;\n            }\n          }\n        }\n        if (!found) {\n          other.push(t);\n        }\n      }\n\n      return {\n        grouped: cate,\n        groupKeys: Object.keys(cate).sort(),\n        other: other\n      };\n    },\n    fullLabelList() {\n      const fullLabelList = [];\n      const allItems = this.selectedItems || this.allItems;\n      if (allItems) {\n        const tp = this.selectedCategory && this.selectedCategory.type;\n        const items = tp ? allItems.filter(m => m.type === tp) : allItems;\n        for (let item of items) {\n          if (item.allLabels) {\n            item.allLabels.forEach(label => {\n              if (fullLabelList.indexOf(label) === -1) {\n                fullLabelList.push(label.toLowerCase().replace(/ /g, \"-\"));\n              }\n            });\n          }\n        }\n      }\n      fullLabelList.sort((a, b) =>\n        a.toLowerCase() < b.toLowerCase() ? -1 : 1\n      );\n      return Array.from(new Set(fullLabelList));\n    }\n  },\n  methods: {\n    applySearch(newTags) {\n      if (!this.allItems) return;\n      this.$emit(\"tags-updated\", newTags);\n      this.loading = true;\n      debounce(() => {\n        let selectedItems;\n        const items = this.type\n          ? this.allItems.filter(m => m.type === this.type)\n          : this.allItems;\n        if (newTags.length <= 0) {\n          selectedItems = items;\n        } else {\n          const knownTags = newTags.filter(\n            tag => this.fullLabelList.indexOf(tag.toLowerCase()) >= 0\n          );\n          selectedItems = items.filter(item => {\n            let matched;\n            if (this.matchingAll)\n              matched =\n                knownTags.length > 0 &&\n                knownTags.every(label =>\n                  item.allLabels.includes(label.toLowerCase())\n                );\n            else\n              matched =\n                knownTags.length > 0 &&\n                knownTags.some(label =>\n                  item.allLabels.includes(label.toLowerCase())\n                );\n            const matchText = label => {\n              label = label.replace(/-/g, \"\").toLowerCase(); // remove dash for U-Net vs UNet\n\n              return (\n                item.name\n                  .replace(/-/g, \"\")\n                  .toLowerCase()\n                  .includes(label) ||\n                (item.description &&\n                  item.description\n                    .replace(/-/g, \"\")\n                    .toLowerCase()\n                    .split(/[ .:;?!~,`\"&|()<>{}[\\]\\r\\n/\\\\]+/)\n                    .includes(label)) ||\n                (item.authors &&\n                  item.authors.some(author =>\n                    (author.name || author).toLowerCase().includes(label)\n                  )) ||\n                (item.apps &&\n                  item.apps.some(\n                    app => app.name && app.name.toLowerCase().includes(label)\n                  ))\n              );\n            };\n            return (\n              (!this.type || item.type === this.type) &&\n              (matched || (this.freeTextMode && newTags.every(matchText)))\n            );\n          });\n        }\n\n        this.$emit(\"selection-changed\", selectedItems);\n        this.selectedItems = selectedItems;\n        this.loading = false;\n        this.$forceUpdate();\n      }, 400)();\n    },\n    switchDisplayMode(mode) {\n      if (this.displayMode !== mode) {\n        this.displayMode = mode;\n        this.$emit(\"display-mode-change\", mode);\n      }\n    },\n    updateSelectedTags() {\n      this.$emit(\"input-change\");\n      this.filteredTags = this.fullLabelList.filter(label => {\n        return this.selectedTags.indexOf(label) < 0;\n      });\n    },\n    getFilteredTags(text) {\n      this.filteredTags = this.fullLabelList.filter(label => {\n        return label.toLowerCase().indexOf(text.toLowerCase()) >= 0;\n      });\n    },\n    addTagSelection(tag) {\n      if (this.selectedTags.indexOf(tag) < 0) this.selectedTags.push(tag);\n    }\n  }\n};\n</script>\n<style scoped>\n.container {\n  width: 800px;\n}\n.dropdown-panel {\n  width: 100%;\n  max-width: 580px;\n  padding: 15px;\n  height: 400px;\n  overflow-y: scroll;\n  max-height: 100vh;\n}\n.card {\n  height: 360px;\n}\n.card-content {\n  padding: 1rem;\n}\n.authors {\n  font-size: 0.9em;\n  font-weight: 600;\n}\n.model-description {\n  font-size: 0.9em;\n}\n.action-btn {\n  width: 33px;\n}\n.button.is-small {\n  border-radius: 30px;\n  font-size: 1rem;\n  background-color: #d2ebffc7;\n  color: rgb(25, 25, 26);\n}\n.card-image {\n  max-height: 200px;\n}\n\n.center {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.tag:hover {\n  background: #002e52 !important;\n  color: white;\n}\n.tags-button {\n  top: 1px;\n  height: 34px;\n  left: 4px;\n  text-transform: none;\n}\n.searchbar {\n  width: 500px;\n  max-width: calc(100% - 110px);\n  margin-left: 10px;\n}\n.display-mode-btn {\n  top: 1px;\n  margin-left: 7px;\n  height: 34px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResourceItemSelector.vue?vue&type=template&id=3b5b4ef4&scoped=true&\"\nimport script from \"./ResourceItemSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./ResourceItemSelector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ResourceItemSelector.vue?vue&type=style&index=0&id=3b5b4ef4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b5b4ef4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"resource-item-list\"},[_c('div',{staticClass:\"container content-wrapper\"},[(_vm.displayMode === 'card')?_c('div',{staticClass:\"columns is-multiline\"},[_vm._l((_vm.allItems.slice(\n          (_vm.currentPage - 1) * _vm.itemsPerPage,\n          _vm.currentPage * _vm.itemsPerPage\n        )),function(item){return _c('div',{key:item.id,staticClass:\"column is-4-desktop is-3-widescreen is-half-tablet resource-card\"},[_c('resource-item-card',{attrs:{\"resourceItem\":item},on:{\"show-info\":_vm.showResourceItemInfo,\"select-tag\":function($event){return _vm.$emit('select-tag', $event)}}})],1)}),(_vm.allItems && _vm.allItems.length === 0)?_c('span',{staticClass:\"column\",staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"The list is empty.\")]):_vm._e()],2):_c('b-table',{attrs:{\"data\":_vm.allItems,\"detailed\":true,\"show-detail-icon\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [(_vm.siteConfig.table_view.columns.includes('name'))?_c('b-table-column',{attrs:{\"label\":\"Name\",\"width\":\"20\",\"field\":\"name\",\"sortable\":\"\"}},[_c('a',{on:{\"click\":function($event){return _vm.showResourceItemInfo(props.row)}}},[_vm._v(\" \"+_vm._s(props.row.name)+\" \")]),_c('p',[_vm._v(\" \"+_vm._s(props.row.description.slice(0, 100) + (props.row.description.length > 100 ? \"...\" : \"\"))+\" \")])]):_vm._e(),(_vm.siteConfig.table_view.columns.includes('authors'))?_c('b-table-column',{attrs:{\"label\":\"Author(s)\",\"width\":\"20\",\"sortable\":\"\",\"field\":\"authors\"}},_vm._l((props.row.authors),function(author){return _c('b-tooltip',{key:author.name,attrs:{\"label\":author.affiliation,\"position\":\"is-bottom\"}},[_c('span',[_vm._v(_vm._s(author.name))])])}),1):_vm._e(),(_vm.siteConfig.table_view.columns.includes('badges'))?_c('b-table-column',{attrs:{\"label\":\"Badges\",\"width\":\"50\",\"field\":\"badges\",\"sortable\":\"\"}},[(props.row.badges)?_c('div',{staticClass:\"badges\"},_vm._l((props.row.badges),function(badge){return _c('a',{key:badge.label,staticClass:\"badge\",attrs:{\"href\":badge.url,\"target\":\"_blank\"},on:{\"click\":function($event){!badge.url && badge.run && badge.run()}}},[(!badge.icon)?_c('b-taglist',{attrs:{\"attached\":\"\",\"rounded\":\"\"}},[_c('b-tag',{attrs:{\"type\":badge.label_type || 'is-dark'}},[_vm._v(_vm._s(badge.label))]),(badge.ext)?_c('b-tag',{attrs:{\"type\":badge.ext_type || 'is-success'}},[_vm._v(_vm._s(badge.ext))]):_vm._e()],1):_c('img',{attrs:{\"alt\":badge.label,\"src\":badge.icon}})],1)}),0):_vm._e()]):_vm._e(),(_vm.siteConfig.table_view.columns.includes('apps'))?_c('b-table-column',{attrs:{\"label\":\"Apps\",\"width\":\"30\",\"field\":\"apps\",\"sortable\":\"\"}},[_c('app-icons',{attrs:{\"apps\":props.row.apps}})],1):_vm._e()]}},{key:\"detail\",fn:function(props){return [_c('resource-item-card',{attrs:{\"resourceItem\":props.row},on:{\"show-info\":_vm.showResourceItemInfo,\"select-tag\":function($event){return _vm.$emit('select-tag', $event)}}})]}}])}),_c('b-pagination',{staticClass:\"resource-pagination\",attrs:{\"total\":_vm.totalItems,\"current\":_vm.currentPage,\"range-before\":3,\"range-after\":1,\"per-page\":_vm.itemsPerPage,\"icon-prev\":\"arrow-left\",\"icon-next\":\"arrow-right\",\"aria-next-label\":\"Next page\",\"aria-previous-label\":\"Previous page\",\"aria-page-label\":\"Page\",\"aria-current-label\":\"Current page\"},on:{\"update:current\":function($event){_vm.currentPage=$event}}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.apps)?_c('div',{staticClass:\"app-icons\"},[_vm._l((_vm.apps),function(app){return [_c('b-tooltip',{key:app.name,class:{ 'hover-show': app.show_on_hover && _vm.enableHover },attrs:{\"label\":app.name,\"position\":\"is-bottom\"}},[_c('b-button',{staticClass:\"is-small action-btn\",attrs:{\"rounded\":\"\",\"tag\":\"a\",\"href\":app.url,\"target\":\"_blank\"},on:{\"click\":function($event){!app.url && app.run && app.run()}}},[(!app.icon || app.icon === 'extension')?_c('b-icon',{attrs:{\"icon\":\"puzzle\",\"size\":\"is-small\"}}):(app.icon.startsWith('http'))?_c('img',{staticClass:\"app-icon\",attrs:{\"src\":app.icon,\"alt\":app.name}}):_c('b-icon',{attrs:{\"icon\":app.icon,\"size\":\"is-small\"}})],1)],1)]})],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"apps\" class=\"app-icons\">\n    <template v-for=\"app in apps\">\n      <b-tooltip\n        :class=\"{ 'hover-show': app.show_on_hover && enableHover }\"\n        :key=\"app.name\"\n        :label=\"app.name\"\n        position=\"is-bottom\"\n      >\n        <b-button\n          rounded\n          tag=\"a\"\n          :href=\"app.url\"\n          target=\"_blank\"\n          @click=\"!app.url && app.run && app.run()\"\n          class=\"is-small action-btn\"\n        >\n          <b-icon\n            v-if=\"!app.icon || app.icon === 'extension'\"\n            icon=\"puzzle\"\n            size=\"is-small\"\n          >\n          </b-icon>\n          <img\n            v-else-if=\"app.icon.startsWith('http')\"\n            class=\"app-icon\"\n            :src=\"app.icon\"\n            :alt=\"app.name\"\n          />\n          <b-icon v-else :icon=\"app.icon\" size=\"is-small\"> </b-icon>\n        </b-button>\n      </b-tooltip>\n    </template>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"AppIcons\",\n  props: {\n    apps: {\n      type: Array,\n      default: null\n    },\n    enableHover: {\n      type: Boolean,\n      default: false\n    }\n  }\n};\n</script>\n<style scoped>\n.app-icons {\n  margin-top: 5px;\n  margin-left: 5px;\n  display: inline-block;\n}\n.app-icon {\n  width: 20px !important;\n  max-width: 22px;\n  max-height: 22px;\n  object-fit: contain;\n  transform: translateY(2px);\n}\n.action-btn {\n  width: 33px;\n}\n.action-btn .icon {\n  font-size: 1.4rem;\n}\n\n.button.is-small {\n  border-radius: 30px;\n  font-size: 0.8rem;\n  background-color: rgba(255, 255, 255, 0.85);\n  color: #002e52;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppIcons.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppIcons.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppIcons.vue?vue&type=template&id=3c22306a&scoped=true&\"\nimport script from \"./AppIcons.vue?vue&type=script&lang=js&\"\nexport * from \"./AppIcons.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppIcons.vue?vue&type=style&index=0&id=3c22306a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c22306a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"resource-item-card\"},[_c('div',{staticClass:\"card is-shady\",style:({ 'box-shadow': _vm.boxShadow })},[_c('div',{staticClass:\"card-image\"},[(_vm.resourceItem.covers && _vm.resourceItem.covers.length > 0)?_c('b-carousel',{attrs:{\"indicator\":_vm.resourceItem.covers.length > 1,\"arrow\":_vm.resourceItem.covers.length > 1,\"autoplay\":false,\"pause-info\":false}},_vm._l((_vm.resourceItem.covers),function(cover){return _c('b-carousel-item',{key:cover,staticClass:\"carousel-image\"},[_c('img',{staticClass:\"cover-image\",attrs:{\"loading\":\"lazy\",\"src\":cover,\"alt\":_vm.resourceItem.name}})])}),1):_c('img',{staticClass:\"cover-image\",staticStyle:{\"background-color\":\"black\",\"width\":\"100%\",\"height\":\"160px\"},attrs:{\"loading\":\"lazy\"}})],1),_c('div',{staticClass:\"card-content\"},[_c('div',{staticClass:\"content\"},[_c('h4',{staticClass:\"resource-item-title truncated\",on:{\"click\":_vm.showResourceItemInfo}},[(_vm.icon.type === 'img')?_c('img',{staticClass:\"item-icon\",staticStyle:{\"border-radius\":\"4px\",\"background\":\"#ffffffd0\"},attrs:{\"src\":_vm.icon.src}}):(_vm.icon.type === 'animal')?_c('img',{staticClass:\"item-icon\",staticStyle:{\"border-radius\":\"50%\",\"background\":\"#167cf0b8\"},attrs:{\"src\":'/static/anonymousAnimals/' + _vm.icon.src + '.png'}}):_c('b-icon',{staticClass:\"item-icon\",attrs:{\"icon\":_vm.icon.src}}),_vm._v(\" \"+_vm._s(_vm.resourceItem.name)+\" \")],1),_c('div',{staticClass:\"buttons floating-buttons\"},[_c('app-icons',{attrs:{\"apps\":_vm.resourceItem.apps,\"enableHover\":!_vm.isTouchDevice}})],1),_c('span',{staticClass:\"authors\",attrs:{\"title\":_vm.affil(_vm.resourceItem.authors)}},[_vm._v(\" \"+_vm._s(_vm.resourceItem.authors && _vm.resourceItem.authors.length > 0 ? \"by \" + _vm.etAl(_vm.resourceItem.authors) : \"\")+\" \")]),(_vm.resourceItem.description)?_c('p',{staticClass:\"resource-item-description\"},[_vm._v(\" \"+_vm._s(_vm.resourceItem.description.slice(0, 60) + (_vm.resourceItem.description.length > 60 ? \"...\" : \"\"))+\" \")]):_vm._e(),_c('span',{staticStyle:{\"margin-top\":\"3px\",\"display\":\"block\"}},[_vm._l((_vm.resourceItem.tags.slice(0, 4)),function(t){return _c('span',{key:t},[_c('b-tag',{staticStyle:{\"cursor\":\"pointer\"},attrs:{\"rounded\":\"\"},nativeOn:{\"click\":function($event){return _vm.selectTag(t)}}},[_vm._v(_vm._s(t))])],1)}),(_vm.resourceItem.tags.length > 4)?_c('span',[_c('b-tag',{staticStyle:{\"cursor\":\"pointer\"},attrs:{\"rounded\":\"\"},nativeOn:{\"click\":function($event){return _vm.showResourceItemInfo($event)}}},[_vm._v(\"...\")])],1):_vm._e()],2),_c('badges',{staticClass:\"badges\",attrs:{\"badges\":_vm.resourceItem.badges}})],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.badges)?_c('div',{staticClass:\"badges\"},_vm._l((_vm.badges),function(badge){return _c('a',{key:badge.label,staticClass:\"badge\",attrs:{\"href\":badge.url,\"target\":\"_blank\"},on:{\"click\":function($event){!badge.url && badge.run && badge.run()}}},[(!badge.icon)?_c('b-taglist',{attrs:{\"attached\":\"\",\"rounded\":\"\"}},[_c('b-tag',{attrs:{\"type\":badge.label_type || 'is-dark'}},[_vm._v(_vm._s(badge.label))]),(badge.ext !== undefined)?_c('b-tag',{attrs:{\"type\":badge.ext_type || 'is-success'}},[_vm._v(_vm._s(badge.ext))]):_vm._e()],1):_c('img',{staticClass:\"badge-img\",attrs:{\"alt\":badge.label,\"src\":badge.icon}})],1)}),0):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"badges\" v-if=\"badges\">\n    <a\n      class=\"badge\"\n      v-for=\"badge in badges\"\n      :key=\"badge.label\"\n      :href=\"badge.url\"\n      target=\"_blank\"\n      @click=\"!badge.url && badge.run && badge.run()\"\n    >\n      <b-taglist v-if=\"!badge.icon\" attached rounded>\n        <b-tag :type=\"badge.label_type || 'is-dark'\">{{ badge.label }}</b-tag>\n        <b-tag\n          :type=\"badge.ext_type || 'is-success'\"\n          v-if=\"badge.ext !== undefined\"\n          >{{ badge.ext }}</b-tag\n        >\n      </b-taglist>\n\n      <img v-else class=\"badge-img\" :alt=\"badge.label\" :src=\"badge.icon\" />\n    </a>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Badges\",\n  props: {\n    badges: {\n      type: Array,\n      default: null\n    }\n  }\n};\n</script>\n<style scoped>\na.badge {\n  display: inline-block;\n  padding: 1px;\n}\n\n/* TODO: fix the badge position */\n.badge-img {\n  position: relative;\n  transform: translateY(6px);\n}\n\n.badge {\n  display: inline-block;\n  padding: 1px;\n  margin-top: -5px;\n  margin-bottom: -5px;\n}\n\n.tags:not(:last-child) {\n  margin-bottom: -10px;\n}\n.badges {\n  display: inline-block;\n}\n.tag:not(body) {\n  padding-left: 4px;\n  padding-right: 4px;\n  font-size: 0.7rem;\n  font-weight: 520;\n  height: 20px;\n  border-radius: 3px;\n  font-family: \"DejaVu Sans\", Verdana, Geneva, sans-serif;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Badges.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Badges.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Badges.vue?vue&type=template&id=37be7c04&scoped=true&\"\nimport script from \"./Badges.vue?vue&type=script&lang=js&\"\nexport * from \"./Badges.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Badges.vue?vue&type=style&index=0&id=37be7c04&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37be7c04\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"resource-item-card\">\n    <div class=\"card is-shady\" :style=\"{ 'box-shadow': boxShadow }\">\n      <div class=\"card-image\">\n        <b-carousel\n          v-if=\"resourceItem.covers && resourceItem.covers.length > 0\"\n          :indicator=\"resourceItem.covers.length > 1\"\n          :arrow=\"resourceItem.covers.length > 1\"\n          :autoplay=\"false\"\n          :pause-info=\"false\"\n        >\n          <b-carousel-item\n            class=\"carousel-image\"\n            v-for=\"cover in resourceItem.covers\"\n            :key=\"cover\"\n          >\n            <img\n              loading=\"lazy\"\n              :src=\"cover\"\n              :alt=\"resourceItem.name\"\n              class=\"cover-image\"\n            />\n          </b-carousel-item>\n        </b-carousel>\n        <img\n          v-else\n          loading=\"lazy\"\n          style=\"background-color: black;width: 100%;height:160px;\"\n          class=\"cover-image\"\n        />\n      </div>\n      <div class=\"card-content\">\n        <div class=\"content\">\n          <h4\n            class=\"resource-item-title truncated\"\n            @click=\"showResourceItemInfo\"\n          >\n            <img\n              v-if=\"icon.type === 'img'\"\n              style=\"border-radius: 4px; background: #ffffffd0;\"\n              class=\"item-icon\"\n              :src=\"icon.src\"\n            />\n            <img\n              v-else-if=\"icon.type === 'animal'\"\n              class=\"item-icon\"\n              style=\"border-radius: 50%;background: #167cf0b8;\"\n              :src=\"'/static/anonymousAnimals/' + icon.src + '.png'\"\n            />\n            <b-icon v-else class=\"item-icon\" :icon=\"icon.src\" />\n            {{ resourceItem.name }}\n          </h4>\n          <div class=\"buttons floating-buttons\">\n            <app-icons\n              :apps=\"resourceItem.apps\"\n              :enableHover=\"!isTouchDevice\"\n            ></app-icons>\n          </div>\n          <span class=\"authors\" :title=\"affil(resourceItem.authors)\">\n            {{\n              resourceItem.authors && resourceItem.authors.length > 0\n                ? \"by \" + etAl(resourceItem.authors)\n                : \"\"\n            }}\n          </span>\n\n          <p class=\"resource-item-description\" v-if=\"resourceItem.description\">\n            {{\n              resourceItem.description.slice(0, 60) +\n                (resourceItem.description.length > 60 ? \"...\" : \"\")\n            }}\n          </p>\n          <span style=\"margin-top:3px;display: block;\">\n            <span v-for=\"t in resourceItem.tags.slice(0, 4)\" :key=\"t\">\n              <b-tag\n                style=\"cursor: pointer;\"\n                rounded\n                @click.native=\"selectTag(t)\"\n                >{{ t }}</b-tag\n              >\n            </span>\n            <span v-if=\"resourceItem.tags.length > 4\">\n              <b-tag\n                style=\"cursor: pointer;\"\n                rounded\n                @click.native=\"showResourceItemInfo\"\n                >...</b-tag\n              >\n            </span>\n          </span>\n          <badges class=\"badges\" :badges=\"resourceItem.badges\"></badges>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Badges from \"./Badges\";\nimport AppIcons from \"./AppIcons\";\nimport siteConfig from \"../../site.config.json\";\n\nconst colorMap = {};\nfor (let it of siteConfig.resource_categories) {\n  colorMap[it.type] = it.outline_color;\n}\n\nconst isTouchDevice = (function() {\n  try {\n    document.createEvent(\"TouchEvent\");\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\nexport default {\n  name: \"ModelCard\",\n  props: {\n    resourceItem: {\n      type: Object,\n      default: null\n    }\n  },\n  data() {\n    return {\n      isTouchDevice: isTouchDevice\n    };\n  },\n  components: {\n    badges: Badges,\n    \"app-icons\": AppIcons\n  },\n  computed: {\n    boxShadow: function() {\n      const color = colorMap[this.resourceItem.type] || \"rgba(0,0,0,.2)\";\n      return `0 3px 1px -2px ${color}, 0 2px 2px 0 ${color}, 0 1px 5px 0 rgba(0,0,0,.12)`;\n    },\n    icon: function() {\n      if (this.resourceItem.icon) {\n        return { type: \"material\", src: this.resourceItem.icon };\n      } else {\n        return {};\n      }\n    }\n  },\n  methods: {\n    etAl(authors) {\n      authors = authors.map(author => {\n        return author.name.split(\";\")[0];\n      });\n      if (authors.length < 3) {\n        return authors.join(\", \");\n      } else {\n        return authors.slice(0, 3).join(\", \") + \" et al.\";\n      }\n    },\n    affil(authors) {\n      const affliations = authors.map(author => {\n        return author.affiliation;\n      });\n      return Array.from(new Set(affliations)).join(\"; \");\n    },\n    showResourceItemInfo() {\n      this.$emit(\"show-info\", this.resourceItem);\n    },\n    selectTag(tag) {\n      this.$emit(\"select-tag\", tag);\n    }\n  }\n};\n</script>\n<style scoped>\n.resource-item-card {\n  max-width: 500px;\n}\n.card {\n  height: 360px;\n}\n.card-image {\n  height: 160px;\n}\n.card-content {\n  padding-left: 1rem;\n  padding-right: 1rem;\n  padding-top: 4px;\n}\n.resource-item-title {\n  margin-bottom: 2px;\n  margin-top: 6px;\n  font-size: 1.2em;\n  font-weight: 400;\n  cursor: pointer;\n  color: #002e52;\n}\n.authors {\n  font-size: 0.9em;\n  font-weight: 600;\n}\n.resource-item-description {\n  font-size: 0.9em;\n}\n\n.floating-buttons {\n  position: absolute;\n  top: 0px;\n  left: 5px;\n}\n\n.cover-image {\n  height: 160px;\n  max-height: 180px;\n  object-fit: contain;\n}\n.carousel-image {\n  max-height: 180px;\n  background: black;\n  text-align: center;\n}\n.item-icon {\n  position: absolute;\n  top: 125px;\n  display: inline-block;\n  margin-top: auto;\n  margin-bottom: auto;\n  border: 3px solid #00000000;\n  margin-right: 4px;\n  width: 32px;\n  max-width: 100px;\n}\n\n.badges {\n  position: absolute;\n  left: 5px;\n  bottom: 5px;\n}\n\n.truncated {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResourceItemCard.vue?vue&type=template&id=119a5379&scoped=true&\"\nimport script from \"./ResourceItemCard.vue?vue&type=script&lang=js&\"\nexport * from \"./ResourceItemCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ResourceItemCard.vue?vue&type=style&index=0&id=119a5379&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"119a5379\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"resource-item-list\">\n    <div class=\"container content-wrapper\">\n      <div class=\"columns is-multiline\" v-if=\"displayMode === 'card'\">\n        <div\n          v-for=\"item in allItems.slice(\n            (currentPage - 1) * itemsPerPage,\n            currentPage * itemsPerPage\n          )\"\n          :key=\"item.id\"\n          class=\"column is-4-desktop is-3-widescreen is-half-tablet resource-card\"\n        >\n          <resource-item-card\n            @show-info=\"showResourceItemInfo\"\n            @select-tag=\"$emit('select-tag', $event)\"\n            :resourceItem=\"item\"\n          ></resource-item-card>\n        </div>\n        <span\n          style=\"text-align: center;\"\n          class=\"column\"\n          v-if=\"allItems && allItems.length === 0\"\n          >The list is empty.</span\n        >\n      </div>\n      <b-table\n        v-else\n        :data=\"allItems\"\n        :detailed=\"true\"\n        :show-detail-icon=\"true\"\n      >\n        <template slot-scope=\"props\">\n          <b-table-column\n            v-if=\"siteConfig.table_view.columns.includes('name')\"\n            label=\"Name\"\n            width=\"20\"\n            field=\"name\"\n            sortable\n          >\n            <a @click=\"showResourceItemInfo(props.row)\">\n              {{ props.row.name }}\n            </a>\n            <p>\n              {{\n                props.row.description.slice(0, 100) +\n                  (props.row.description.length > 100 ? \"...\" : \"\")\n              }}\n            </p>\n          </b-table-column>\n          <b-table-column\n            v-if=\"siteConfig.table_view.columns.includes('authors')\"\n            label=\"Author(s)\"\n            width=\"20\"\n            sortable\n            field=\"authors\"\n          >\n            <b-tooltip\n              v-for=\"author in props.row.authors\"\n              :key=\"author.name\"\n              :label=\"author.affiliation\"\n              position=\"is-bottom\"\n            >\n              <span>{{ author.name }}</span>\n            </b-tooltip>\n          </b-table-column>\n          <b-table-column\n            v-if=\"siteConfig.table_view.columns.includes('badges')\"\n            label=\"Badges\"\n            width=\"50\"\n            field=\"badges\"\n            sortable\n          >\n            <div class=\"badges\" v-if=\"props.row.badges\">\n              <a\n                class=\"badge\"\n                v-for=\"badge in props.row.badges\"\n                :key=\"badge.label\"\n                :href=\"badge.url\"\n                target=\"_blank\"\n                @click=\"!badge.url && badge.run && badge.run()\"\n              >\n                <b-taglist v-if=\"!badge.icon\" attached rounded>\n                  <b-tag :type=\"badge.label_type || 'is-dark'\">{{\n                    badge.label\n                  }}</b-tag>\n                  <b-tag\n                    :type=\"badge.ext_type || 'is-success'\"\n                    v-if=\"badge.ext\"\n                    >{{ badge.ext }}</b-tag\n                  >\n                </b-taglist>\n                <img v-else :alt=\"badge.label\" :src=\"badge.icon\" />\n              </a>\n            </div>\n          </b-table-column>\n          <b-table-column\n            v-if=\"siteConfig.table_view.columns.includes('apps')\"\n            label=\"Apps\"\n            width=\"30\"\n            field=\"apps\"\n            sortable\n          >\n            <app-icons :apps=\"props.row.apps\"></app-icons>\n          </b-table-column>\n        </template>\n        <template slot=\"detail\" slot-scope=\"props\">\n          <resource-item-card\n            @show-info=\"showResourceItemInfo\"\n            @select-tag=\"$emit('select-tag', $event)\"\n            :resourceItem=\"props.row\"\n          ></resource-item-card>\n        </template>\n      </b-table>\n      <b-pagination\n        class=\"resource-pagination\"\n        :total=\"totalItems\"\n        :current.sync=\"currentPage\"\n        :range-before=\"3\"\n        :range-after=\"1\"\n        :per-page=\"itemsPerPage\"\n        icon-prev=\"arrow-left\"\n        icon-next=\"arrow-right\"\n        aria-next-label=\"Next page\"\n        aria-previous-label=\"Previous page\"\n        aria-page-label=\"Page\"\n        aria-current-label=\"Current page\"\n      >\n      </b-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport AppIcons from \"./AppIcons\";\nimport ResourceItemCard from \"./ResourceItemCard\";\nimport siteConfig from \"../../site.config.json\";\nconst isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\nVue.component(\"label-selector\", {\n  props: [\"all-labels\"],\n  template: document.getElementById(\"label-selector\")\n});\n\nexport default {\n  name: \"ResourceItemList\",\n  components: {\n    \"resource-item-card\": ResourceItemCard,\n    \"app-icons\": AppIcons\n  },\n  props: {\n    allItems: {\n      type: Array,\n      default: null\n    },\n    displayMode: {\n      type: String,\n      default: \"card\"\n    }\n  },\n  computed: {\n    totalItems: function() {\n      return this.allItems ? this.allItems.length : 0;\n    },\n    filteredItems: function() {\n      const covered = this.allItems.filter(item => item.cover_image);\n      const items = covered.concat(\n        this.allItems.filter(item => !item.cover_image)\n      );\n      return items.filter(item =>\n        this.filters.every(label => item.allLabels.includes(label))\n      );\n    }\n  },\n  data() {\n    return {\n      isSafari: isSafari,\n      siteConfig: siteConfig,\n      currentPage: 1,\n      itemsPerPage: 16\n    };\n  },\n  mounted() {},\n  beforeDestroy() {},\n  methods: {\n    showResourceItemInfo(minfo) {\n      this.$emit(\"show-resource-item-info\", minfo);\n    }\n  }\n};\n</script>\n\n<style lang=\"css\" scoped>\n.resource-pagination {\n  margin-top: 10px;\n}\n.resource-item-list {\n  min-height: 60vh;\n}\n.badges {\n  left: 5px;\n  bottom: 5px;\n}\na.badge {\n  display: inline-block;\n  padding: 1px;\n}\n.action-btn {\n  width: 33px;\n}\n.action-btn .icon {\n  font-size: 1.4rem;\n}\n\n.button.is-small {\n  border-radius: 30px;\n  font-size: 0.8rem;\n  background-color: rgba(255, 255, 255, 0.85);\n  color: #002e52;\n}\n.resource-card {\n  height: 400px;\n  min-width: 320px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResourceItemList.vue?vue&type=template&id=c6579262&scoped=true&\"\nimport script from \"./ResourceItemList.vue?vue&type=script&lang=js&\"\nexport * from \"./ResourceItemList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ResourceItemList.vue?vue&type=style&index=0&id=c6579262&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c6579262\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.resourceItem)?_c('div',{staticClass:\"resource-item-info width-limited\"},[(_vm.resourceItem.apps)?_c('section',{staticStyle:{\"margin-bottom\":\"10px\"}},[_c('app-icons',{attrs:{\"apps\":_vm.resourceItem.apps}}),_vm._v(\" \"),_c('badges',{attrs:{\"badges\":_vm.resourceItem.badges}})],1):_vm._e(),_c('section',{staticStyle:{\"text-align\":\"center\"}},[(_vm.resourceItem.covers && _vm.resourceItem.covers.length > 0)?_c('b-carousel',{staticStyle:{\"max-width\":\"512px\"},attrs:{\"indicator\":_vm.resourceItem.covers.length > 1,\"arrow\":_vm.resourceItem.covers.length > 1,\"pause-info\":false}},_vm._l((_vm.resourceItem.covers),function(cover){return _c('b-carousel-item',{key:cover},[_c('figure',{staticClass:\"image is-16by9\"},[_c('img',{staticClass:\"cover-image\",attrs:{\"loading\":\"lazy\",\"src\":cover,\"alt\":_vm.resourceItem.name,\"data-target\":\"modal-image2\"}})])])}),1):_vm._e()],1),_c('span',{staticStyle:{\"margin-top\":\"3px\",\"display\":\"block\"}},_vm._l((_vm.resourceItem.tags),function(t){return _c('span',{key:t},[_c('b-tag',{staticStyle:{\"cursor\":\"pointer\"},attrs:{\"rounded\":\"\"}},[_vm._v(_vm._s(t))])],1)}),0),(_vm.resourceItem.description)?_c('p',{staticClass:\"description\"},[_vm._v(\" \"+_vm._s(_vm.resourceItem.description.slice(0, _vm.maxDescriptionLetters))+\" \"),(_vm.resourceItem.description.length > _vm.maxDescriptionLetters)?_c('a',{on:{\"click\":function($event){_vm.maxDescriptionLetters = _vm.resourceItem.description.length}}},[_vm._v(\"...show all.\")]):_vm._e()]):_vm._e(),(_vm.resourceItem.authors && _vm.resourceItem.authors.length > 0)?_c('p',{staticClass:\"text-info\"},[_vm._v(\" \"+_vm._s(_vm.resourceItem.authors.length > 1 ? \"Authors: \" : \"Author: \")+\" \"),_vm._l((_vm.resourceItem.authors),function(author){return _c('b-tooltip',{key:author.name,attrs:{\"label\":author.affiliation,\"position\":\"is-bottom\"}},[_c('span',{staticClass:\"text-info\"},[_vm._v(_vm._s(author.name)+\" \")])])})],2):_vm._e(),(_vm.resourceItem.uploaded_by)?_c('p',{staticClass:\"text-info\"},[_vm._v(\" Uploaded by: \"+_vm._s(_vm.resourceItem.uploaded_by)+\" \")]):_vm._e(),(_vm.resourceItem.contact_email)?_c('p',{staticClass:\"text-info\"},[_vm._v(\" Contact Email: \"),_c('a',{attrs:{\"href\":(\"mailto: \" + (_vm.resourceItem.contact_email) + \"?subject=About \" + (_vm.resourceItem.name) + \" (ShareLoc.XYZ)\")}},[_vm._v(_vm._s(_vm.resourceItem.contact_email))])]):_vm._e(),(!_vm.showAttachments && _vm.resourceItem.attachments)?_c('p',{staticClass:\"text-info\"},[_c('a',{staticClass:\"tag is-primary\",on:{\"click\":function($event){_vm.showAttachments = true}}},[_vm._v(\"+ click here to list the samples in the dataset\")])]):_vm._e(),_c('br'),(_vm.showAttachments)?_c('attachments',{attrs:{\"attachments\":_vm.resourceItem.attachments,\"focusTarget\":_vm.resourceItem._focus}}):_vm._e(),_c('div',{staticClass:\"markdown-body width-limited\"},[(_vm.resourceItem.docs)?_c('h1',{staticStyle:{\"margin-top\":\"20px\"}},[_vm._v(\"Documentation\")]):_vm._e(),(_vm.resourceItem.docs)?_c('markdown',{attrs:{\"baseUrl\":_vm.resourceItem.baseUrl,\"content\":_vm.resourceItem.docs}}):_vm._e(),_c('br'),(_vm.formatedCitation)?_c('h3',{attrs:{\"id\":\"citation\"}},[_vm._v(\"How to cite\")]):_vm._e(),(_vm.formatedCitation)?_c('ul',{staticClass:\"citation\"},_vm._l((_vm.formatedCitation),function(c){return _c('li',{key:c.text},[_vm._v(\" \"+_vm._s(c.text)+\" \"),(c.url)?_c('a',{attrs:{\"href\":c.url,\"target\":\"_blank\"}},[_vm._v(\"[\"+_vm._s(c.url_text)+\"]\")]):_vm._e()])}),0):_vm._e()],1)],1):_c('h2',[_vm._v(\"Resource not found: \"+_vm._s(_vm.resourceId))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"attachments\"},[_vm._l((_vm.normalizedAttachments),function(att_val,name){return [(att_val)?_c('h2',{key:name + '_title',staticStyle:{\"font-size\":\"2rem\",\"font-weight\":\"600\",\"margin-top\":\"24px\",\"margin-bottom\":\"16px\",\"text-transform\":\"capitalize\"},attrs:{\"id\":name}},[_vm._v(\" \"+_vm._s(name)+\" \")]):_vm._e(),(att_val)?_c('b-table',{key:name + '_table',attrs:{\"data\":_vm.convert2Array(att_val),\"detailed\":!!att_val.type,\"show-detail-icon\":!!att_val.type},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return _vm._l((_vm.availableColumns),function(col){return _c('b-table-column',{key:col.field,attrs:{\"field\":col.field,\"label\":col.label,\"width\":col.width || 40,\"sortable\":col.sortable}},[(props.row[col.field])?[(col.type === 'files')?_c('div',[_c('ul',_vm._l((props.row[col.field] || []),function(file,i){return _c('li',{key:i,staticStyle:{\"list-style\":\"disc\"}},[_c('a',{class:col.class,attrs:{\"href\":file.download_url,\"download\":props.row['name'] + file.name,\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(file.name)+\" \")]),(file.preview_url)?_c('span',[_vm._v(\"(\"),_c('a',{class:col.class,attrs:{\"href\":file.preview_url,\"target\":\"_blank\"}},[_vm._v(\" preview \")]),_vm._v(\")\")]):_vm._e(),(file.csv)?_c('span',[_vm._v(\"(\"),_vm._l((file.csv),function(csvFile){return _c('a',{key:csvFile.name,class:col.class,attrs:{\"href\":csvFile.url,\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(csvFile.name)+\" \")])}),_vm._v(\")\")],2):_vm._e()])}),0)]):(col.type === 'thumbnails')?_c('div',_vm._l((props.row[col.field] || []),function(view,i){return _c('div',{key:i,staticClass:\"item\"},[_c('img',{staticClass:\"image\",attrs:{\"loading\":\"lazy\",\"src\":view.image,\"alt\":\"Screenshot\"}})])}),0):(col.type === 'url')?_c('a',{class:col.class,attrs:{\"href\":props.row[col.field],\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(col.text)+\" \")]):_c('span',{class:col.class},[_vm._v(\" \"+_vm._s(props.row[col.field] && props.row[col.field].slice(0, col.max_length) + (props.row[col.field].length > col.max_length ? \"...\" : \"\"))+\" \")])]:_vm._e()],2)})}},{key:\"detail\",fn:function(props){return [_c('resource-item-card',{attrs:{\"resourceItem\":props.row}})]}}],null,true)}):_vm._e()]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"attachments\">\n    <template v-for=\"(att_val, name) in normalizedAttachments\">\n      <h2\n        style=\"font-size:2rem;font-weight: 600;margin-top: 24px;\n    margin-bottom: 16px; text-transform:capitalize;\"\n        :id=\"name\"\n        v-if=\"att_val\"\n        :key=\"name + '_title'\"\n      >\n        {{ name }}\n      </h2>\n      <b-table\n        v-if=\"att_val\"\n        :data=\"convert2Array(att_val)\"\n        :key=\"name + '_table'\"\n        :detailed=\"!!att_val.type\"\n        :show-detail-icon=\"!!att_val.type\"\n      >\n        <template slot-scope=\"props\">\n          <b-table-column\n            v-for=\"col in availableColumns\"\n            :key=\"col.field\"\n            :field=\"col.field\"\n            :label=\"col.label\"\n            :width=\"col.width || 40\"\n            :sortable=\"col.sortable\"\n          >\n            <template v-if=\"props.row[col.field]\">\n              <div v-if=\"col.type === 'files'\">\n                <ul>\n                  <li\n                    v-for=\"(file, i) in props.row[col.field] || []\"\n                    :key=\"i\"\n                    style=\"list-style: disc;\"\n                  >\n                    <a\n                      :class=\"col.class\"\n                      :href=\"file.download_url\"\n                      :download=\"props.row['name'] + file.name\"\n                      target=\"_blank\"\n                    >\n                      {{ file.name }}\n                    </a>\n                    <span v-if=\"file.preview_url\"\n                      >(<a\n                        :class=\"col.class\"\n                        :href=\"file.preview_url\"\n                        target=\"_blank\"\n                      >\n                        preview </a\n                      >)</span\n                    >\n                    <span v-if=\"file.csv\"\n                      >(<a\n                        v-for=\"csvFile in file.csv\"\n                        :key=\"csvFile.name\"\n                        :class=\"col.class\"\n                        :href=\"csvFile.url\"\n                        target=\"_blank\"\n                      >\n                        {{ csvFile.name }} </a\n                      >)</span\n                    >\n                  </li>\n                </ul>\n              </div>\n              <div v-else-if=\"col.type === 'thumbnails'\">\n                <div\n                  v-for=\"(view, i) in props.row[col.field] || []\"\n                  :key=\"i\"\n                  class=\"item\"\n                >\n                  <img\n                    class=\"image\"\n                    loading=\"lazy\"\n                    :src=\"view.image\"\n                    alt=\"Screenshot\"\n                  />\n                </div>\n              </div>\n              <a\n                v-else-if=\"col.type === 'url'\"\n                :class=\"col.class\"\n                :href=\"props.row[col.field]\"\n                target=\"_blank\"\n              >\n                {{ col.text }}\n              </a>\n              <span :class=\"col.class\" v-else>\n                {{\n                  props.row[col.field] &&\n                    props.row[col.field].slice(0, col.max_length) +\n                      (props.row[col.field].length > col.max_length\n                        ? \"...\"\n                        : \"\")\n                }}\n              </span>\n            </template>\n          </b-table-column>\n        </template>\n        <template slot=\"detail\" slot-scope=\"props\">\n          <resource-item-card :resourceItem=\"props.row\"></resource-item-card>\n        </template>\n      </b-table>\n    </template>\n  </div>\n</template>\n\n<script>\nimport ResourceItemCard from \"./ResourceItemCard\";\nimport siteConfig from \"../../site.config.json\";\nexport default {\n  name: \"Attachments\",\n  props: {\n    attachments: {\n      type: Object,\n      default: null\n    },\n    focusTarget: {\n      type: String,\n      default: null\n    }\n  },\n  components: {\n    \"resource-item-card\": ResourceItemCard\n  },\n  data() {\n    return {\n      siteConfig: siteConfig,\n      columns: []\n    };\n  },\n  mounted() {\n    // scroll into view\n    setTimeout(() => {\n      this.focus(this.focusTarget);\n    }, 100);\n  },\n  watch: {\n    focusTarget: function(newTarget) {\n      this.focus(newTarget);\n    }\n  },\n  computed: {\n    availableColumns: function() {\n      return siteConfig.attachment_table.columns.filter(c =>\n        this.columns.includes(c.field)\n      );\n    },\n    normalizedAttachments: function() {\n      const converted = {};\n      for (let k of Object.keys(this.attachments)) {\n        const items = this.attachments[k];\n        if (typeof items === \"object\") {\n          const arr = [];\n          for (let j of Object.keys(items)) {\n            // make a shallow copy\n            const item = Object.assign({}, items[j]);\n            item.name = item.name || j;\n            arr.push(item);\n          }\n          converted[k] = arr;\n        } else {\n          converted[k] = items;\n        }\n      }\n      return converted;\n    }\n  },\n  methods: {\n    focus(target) {\n      if (target) {\n        const el = document.getElementById(target);\n        if (el) {\n          el.scrollIntoView();\n        }\n      }\n    },\n    convert2Array(obj) {\n      const columns = [];\n      this.columns = columns;\n      if (obj instanceof Object && obj.constructor === Object) {\n        const values = [];\n        for (let k of Object.keys(obj)) {\n          if (obj[k] instanceof Object) {\n            obj[k][\"id\"] = k;\n            values.push(obj[k]);\n            for (let n of Object.keys(obj[k])) {\n              if (!columns.includes(n)) columns.push(n);\n            }\n          } else {\n            const temp = obj[k].split(\"/\");\n            const name = temp[temp.length - 1] || \"undefined\";\n            values.push({ download_url: obj[k], name: name });\n            if (!columns.includes(\"download_url\")) columns.push(\"download_url\");\n            if (!columns.includes(\"name\")) columns.push(\"name\");\n          }\n        }\n        return values;\n      } else if (Array.isArray(obj)) {\n        const values = [];\n        for (let k = 0; k < obj.length; k++) {\n          if (obj[k] instanceof Object) {\n            obj[k][\"id\"] = k;\n            values.push(obj[k]);\n            for (let n of Object.keys(obj[k])) {\n              if (!columns.includes(n)) columns.push(n);\n            }\n          } else {\n            const temp = obj[k].split(\"/\");\n            // sometimes the url is ended with '/'\n            const name =\n              temp[temp.length - 1] || temp[temp.length - 2] || \"undefined\";\n            values.push({ download_url: obj[k], name: name });\n            if (!columns.includes(\"download_url\")) columns.push(\"download_url\");\n            if (!columns.includes(\"name\")) columns.push(\"name\");\n          }\n        }\n        return values;\n      } else {\n        console.warn(\"Failed to convert: \", obj);\n        return [];\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n.item {\n  flex: 1;\n  max-width: 150px;\n  margin: 3px;\n}\n\n.item > .image {\n  display: inline-flex;\n  border-radius: 6px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Attachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Attachments.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Attachments.vue?vue&type=template&id=772bbdbc&scoped=true&\"\nimport script from \"./Attachments.vue?vue&type=script&lang=js&\"\nexport * from \"./Attachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Attachments.vue?vue&type=style&index=0&id=772bbdbc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"772bbdbc\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"resource-item-info width-limited\" v-if=\"resourceItem\">\n    <section style=\"margin-bottom:10px;\" v-if=\"resourceItem.apps\">\n      <app-icons :apps=\"resourceItem.apps\"></app-icons>\n      &nbsp;&nbsp;<badges :badges=\"resourceItem.badges\"></badges>\n    </section>\n    <section style=\"text-align:center;\">\n      <b-carousel\n        style=\"max-width: 512px;\"\n        v-if=\"resourceItem.covers && resourceItem.covers.length > 0\"\n        :indicator=\"resourceItem.covers.length > 1\"\n        :arrow=\"resourceItem.covers.length > 1\"\n        :pause-info=\"false\"\n      >\n        <b-carousel-item v-for=\"cover in resourceItem.covers\" :key=\"cover\">\n          <figure class=\"image is-16by9\">\n            <img\n              loading=\"lazy\"\n              :src=\"cover\"\n              :alt=\"resourceItem.name\"\n              class=\"cover-image\"\n              data-target=\"modal-image2\"\n            />\n          </figure>\n        </b-carousel-item>\n      </b-carousel>\n    </section>\n\n    <span style=\"margin-top:3px;display: block;\">\n      <span v-for=\"t in resourceItem.tags\" :key=\"t\">\n        <b-tag style=\"cursor: pointer;\" rounded>{{ t }}</b-tag>\n      </span>\n    </span>\n    <p class=\"description\" v-if=\"resourceItem.description\">\n      {{ resourceItem.description.slice(0, maxDescriptionLetters) }}\n      <a\n        v-if=\"resourceItem.description.length > maxDescriptionLetters\"\n        @click=\"maxDescriptionLetters = resourceItem.description.length\"\n        >...show all.</a\n      >\n    </p>\n    <p\n      class=\"text-info\"\n      v-if=\"resourceItem.authors && resourceItem.authors.length > 0\"\n    >\n      {{ resourceItem.authors.length > 1 ? \"Authors: \" : \"Author: \" }}\n      <b-tooltip\n        v-for=\"author in resourceItem.authors\"\n        :key=\"author.name\"\n        :label=\"author.affiliation\"\n        position=\"is-bottom\"\n      >\n        <span class=\"text-info\">{{ author.name }} </span>\n      </b-tooltip>\n    </p>\n    <p class=\"text-info\" v-if=\"resourceItem.uploaded_by\">\n      Uploaded by: {{ resourceItem.uploaded_by }}\n    </p>\n    <p class=\"text-info\" v-if=\"resourceItem.contact_email\">\n      Contact Email:\n      <a\n        :href=\"\n          `mailto: ${resourceItem.contact_email}?subject=About ${resourceItem.name} (ShareLoc.XYZ)`\n        \"\n        >{{ resourceItem.contact_email }}</a\n      >\n    </p>\n    <p class=\"text-info\" v-if=\"!showAttachments && resourceItem.attachments\">\n      <a class=\"tag is-primary\" @click=\"showAttachments = true\"\n        >+ click here to list the samples in the dataset</a\n      >\n    </p>\n\n    <br />\n\n    <attachments\n      v-if=\"showAttachments\"\n      :attachments=\"resourceItem.attachments\"\n      :focusTarget=\"resourceItem._focus\"\n    ></attachments>\n\n    <div class=\"markdown-body width-limited\">\n      <h1 style=\"margin-top: 20px;\" v-if=\"resourceItem.docs\">Documentation</h1>\n      <markdown\n        v-if=\"resourceItem.docs\"\n        :baseUrl=\"resourceItem.baseUrl\"\n        :content=\"resourceItem.docs\"\n      ></markdown>\n\n      <br />\n      <h3 v-if=\"formatedCitation\" id=\"citation\">How to cite</h3>\n      <ul v-if=\"formatedCitation\" class=\"citation\">\n        <li v-for=\"c in formatedCitation\" :key=\"c.text\">\n          {{ c.text }}\n          <a v-if=\"c.url\" :href=\"c.url\" target=\"_blank\">[{{ c.url_text }}]</a>\n        </li>\n      </ul>\n    </div>\n    <!-- <comment-box :title=\"resourceItem.name\"></comment-box> -->\n  </div>\n  <h2 v-else>Resource not found: {{ resourceId }}</h2>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport Badges from \"@/components/Badges.vue\";\nimport AppIcons from \"@/components/AppIcons.vue\";\nimport Attachments from \"@/components/Attachments.vue\";\nimport Markdown from \"@/components/Markdown.vue\";\n// import CommentBox from \"@/components/CommentBox.vue\";\nimport { randId } from \"../utils\";\n\nexport default {\n  name: \"ResourceItemInfo\",\n  props: [\"resourceId\"],\n  components: {\n    markdown: Markdown,\n    badges: Badges,\n    attachments: Attachments,\n    \"app-icons\": AppIcons\n    // \"comment-box\": CommentBox\n  },\n  data() {\n    return {\n      resourceItem: null,\n      maxDescriptionLetters: 100,\n      showSource: false,\n      showAttachments: false\n    };\n  },\n  mounted() {\n    this.init();\n  },\n  computed: {\n    formatedCitation: function() {\n      let cites = this.resourceItem.cite;\n      if (this.resourceItem.cite && !Array.isArray(this.resourceItem.cite)) {\n        cites = [this.resourceItem.cite];\n      }\n      if (!cites || cites.length <= 0) {\n        if (this.resourceItem.doi)\n          return [{ text: \"DOI: \" + this.resourceItem.doi }];\n        else {\n          return null;\n        }\n      }\n      const citations = [];\n      for (let c of cites) {\n        if (typeof c === \"string\") {\n          citations.push({\n            text: c\n          });\n        } else {\n          let url = c.url;\n          let url_text = \"link\";\n          if (c.doi) {\n            if (c.doi.startsWith(\"http\")) url = c.doi;\n            else url = \"https://doi.org/\" + c.doi;\n            url_text = \"doi\";\n          }\n          citations.push({\n            text: c.text,\n            url,\n            url_text\n          });\n        }\n      }\n      return citations;\n    },\n    ...mapState({\n      siteConfig: state => state.siteConfig,\n      loadedUrl: state => state.loadedUrl,\n      resourceItems: state => state.resourceItems\n    })\n  },\n  methods: {\n    async init() {\n      if (!this.loadedUrl) {\n        const repo = this.siteConfig.rdf_root_repo;\n        let manifest_url = this.siteConfig.manifest_url;\n        await this.$store.dispatch(\"fetchResourceItems\", {\n          repo,\n          manifest_url\n        });\n      }\n      const resourceItem = this.resourceItems.filter(item => {\n        return item.id === this.resourceId;\n      })[0];\n      if (!resourceItem) {\n        alert(\"Item not found: \" + this.resourceId);\n        throw new Error(\"Item not found: \" + this.resourceId);\n      }\n      this.resourceItem = resourceItem;\n      const focus = () => {\n        if (this.resourceItem._focus) {\n          const el = document.getElementById(this.resourceItem._focus);\n          if (el) {\n            el.parentNode.scrollTop = el.offsetTop - 40;\n          }\n        }\n      };\n      if (this.resourceItem.documentation)\n        this.getDocs(this.resourceItem).then(focus);\n    },\n    async getDocs(resourceItem) {\n      resourceItem.docs = \"@loading...\";\n      try {\n        let docsUrl;\n        if (!resourceItem.documentation.startsWith(\"http\"))\n          docsUrl = new URL(resourceItem.documentation, resourceItem.root_url)\n            .href;\n        else {\n          docsUrl = resourceItem.documentation;\n        }\n        if (docsUrl.includes(\"github.\")) docsUrl = docsUrl + \"?\" + randId();\n        const response = await fetch(docsUrl);\n        if (response.status == 200) {\n          const raw_docs = await response.text();\n          let baseUrl;\n          if (!this.resourceItem.documentation.startsWith(\"http\")) {\n            const temp = (\n              this.resourceItem.root_url +\n              \"/\" +\n              this.resourceItem.documentation\n            ).split(\"/\");\n            baseUrl = temp.slice(0, temp.length - 1).join(\"/\");\n          } else {\n            const temp = this.resourceItem.documentation.split(\"/\");\n            baseUrl = temp.slice(0, temp.length - 1).join(\"/\");\n          }\n          if (resourceItem.documentation.endsWith(\".md\")) {\n            resourceItem.baseUrl = baseUrl;\n            resourceItem.docs = raw_docs;\n          } else if (resourceItem.documentation) {\n            resourceItem.docs = `### [Documentation](${resourceItem.documentation})`;\n          }\n        } else {\n          resourceItem.docs = null;\n        }\n        this.$forceUpdate();\n      } catch (e) {\n        resourceItem.docs = null;\n        this.$forceUpdate();\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n.resource-item-info {\n  padding: 20px;\n  height: calc(100% - 50px);\n  overflow: auto;\n  /* overscroll-behavior: contain; */\n}\n\n.width-limited {\n  max-width: 1080px;\n  margin-left: auto !important;\n  margin-right: auto !important;\n  float: none !important;\n}\n\n@media screen and (max-width: 768px) {\n  .resource-item-info {\n    padding: 5px;\n  }\n}\n.card-image {\n  max-height: 500px;\n}\n.citation {\n  list-style-type: circle;\n}\n.cover-image {\n  object-fit: contain;\n}\n.badge {\n  display: inline-block;\n  padding: 1px;\n  margin-top: -5px;\n  margin-bottom: -5px;\n}\n.tags:not(:last-child) {\n  margin-bottom: -10px;\n}\n.description {\n  margin: 10px;\n}\n.text-info {\n  margin-left: 10px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResourceItemInfo.vue?vue&type=template&id=e39a61ea&scoped=true&\"\nimport script from \"./ResourceItemInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./ResourceItemInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ResourceItemInfo.vue?vue&type=style&index=0&id=e39a61ea&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e39a61ea\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload\"},[(_vm.client.isSandbox)?_c('b-notification',{attrs:{\"type\":\"is-warning\",\"has-icon\":\"\",\"aria-close-label\":\"Close notification\",\"role\":\"alert\"}},[_vm._v(\" You are using the SANDBOX mode for testing purposes. This means files will be uploaded to the sandbox version of Zenodo (https://sandbox.zenodo.org) and the uploaded files can be removed from Zenodo at any time without notice. If you are ready to publish your dataset, please \"),_c('a',{on:{\"click\":function($event){return _vm.switchToProduction()}}},[_vm._v(\"switch to the production mode\")]),_vm._v(\". \")]):_c('b-notification',{attrs:{\"type\":\"is-info\",\"has-icon\":\"\",\"aria-close-label\":\"Close notification\",\"role\":\"alert\"}},[_vm._v(\" You are using the PRODUCTION mode, this means files will be uploaded to Zenodo (https://zenodo.org) and they will be permanently stored. If you want to test the upload feature, please \"),_c('a',{on:{\"click\":function($event){return _vm.switchToSandbox()}}},[_vm._v(\"switch to the sanbox mode\")]),_vm._v(\". \")]),_c('b-steps',{staticClass:\"width-limited\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"position\":\"left\",\"has-navigation\":false,\"label-position\":\"right\"},model:{value:(_vm.stepIndex),callback:function ($$v) {_vm.stepIndex=$$v},expression:\"stepIndex\"}},[_c('b-step-item',{attrs:{\"disabled\":_vm.rdfYaml,\"label\":\"Start\",\"icon\":\"file\"}},[(_vm.imjoy)?_c('b-button',{staticClass:\"button is-fullwidth\",staticStyle:{\"text-transform\":\"none\"},attrs:{\"expanded\":\"\"},on:{\"click\":_vm.gettingStarted}},[_vm._v(\"New to ShareLoc.XYZ? Watch the Step-by-step Guide\")]):_vm._e(),_c('br'),(!_vm.client.credential)?_c('b-field',{attrs:{\"label\":\"Please login or sign up to Zenodo.org\",\"message\":\"ShareLoc.XYZ uses https://zenodo.org as storage service, you will need to sign up or login to Zenodo, and allow ShareLoc.XYZ to upload files to zenodo on your behalf.\",\"expanded\":\"\"}},[_c('b-button',{staticClass:\"button is-fullwidth is-primary\",staticStyle:{\"text-transform\":\"none\"},attrs:{\"expanded\":\"\",\"icon-left\":\"login\"},on:{\"click\":function($event){return _vm.login()}}},[_vm._v(\"Login to Zenodo\")])],1):_c('b-field',{attrs:{\"label\":\"You have already logged in via Zenodo\",\"message\":\"ShareLoc.XYZ uses https://zenodo.org as storage service, you will need to sign up or login to Zenodo, and allow ShareLoc.XYZ to upload files to zenodo on your behalf.\",\"expanded\":\"\"}},[_c('b-button',{staticClass:\"button is-small\",staticStyle:{\"text-transform\":\"none\"},attrs:{\"icon-left\":\"logout\"},on:{\"click\":function($event){return _vm.client.logout()}}},[_vm._v(\"Logout\")])],1),(_vm.client.credential)?_c('b-field',{attrs:{\"label\":\"Option 1: Create a new deposit\",\"expanded\":\"\",\"message\":\"With this option, you can upload a dataset or application to ShareLoc (via Zenodo), please make sure you have prepared a set of files. Also note that each dataset can contain files with the total size up to 50GB, if you have more than that, you should either split the files into several deposits or contact Zenodo to increase the quota.\"}},[_c('b-button',{staticClass:\"button is-fullwidth\",staticStyle:{\"text-transform\":\"none\"},attrs:{\"expanded\":\"\",\"disabled\":!_vm.client.credential},on:{\"click\":_vm.startUpload}},[_vm._v(\"Start Upload\")])],1):_vm._e(),(_vm.client.credential)?_c('b-field',{attrs:{\"label\":\"Option 2: Update an existing deposit\",\"message\":\"With this option, you can update an existing dataset or application. A Zenodo DOI or URL should be provided.\"}},[_c('b-input',{attrs:{\"type\":\"url\",\"placeholder\":\"Type a DOI or URL here\"},model:{value:(_vm.URI4Load),callback:function ($$v) {_vm.URI4Load=$$v},expression:\"URI4Load\"}})],1):_vm._e(),(_vm.client.credential)?_c('b-button',{staticClass:\"button is-fullwidth\",staticStyle:{\"text-transform\":\"none\"},attrs:{\"expanded\":\"\",\"disabled\":!_vm.client.credential},on:{\"click\":function($event){return _vm.loadRdfFromURL(_vm.URI4Load)}}},[_vm._v(\"Load\")]):_vm._e(),_c('br'),_c('b-notification',{attrs:{\"aria-close-label\":\"Close notification\"}},[_c('h1',[_vm._v(\" You can also create an application card for your software tool! \")]),_c('p',[_vm._v(\" If you developed a software tool for facilitating data acquisiton or analysis of SMLM data, please consider adding an `application` card to ShareLoc.XYZ so people who used your tool can link their datasets to your tool. You can also make an \"),_c('a',{attrs:{\"target\":\"_blank\",\"href\":\"https://imjoy.io\"}},[_vm._v(\"ImJoy\")]),_vm._v(\" plugin for your tool so users can directly run it from within ShareLoc. For detailed instructions on how to contribute an application, please \"),_c('a',{attrs:{\"target\":\"_blank\",\"href\":\"https://github.com/imodpasteur/ShareLoc.XYZ/blob/main/docs/contribute-applications.md\"}},[_vm._v(\"read here\")]),_vm._v(\". \")])])],1),_c('b-step-item',{attrs:{\"label\":\"Edit\",\"icon\":\"pencil\",\"disabled\":!_vm.rdfYaml}},[(_vm.stepIndex == 1)?_c('section',[_c('upload-form',{attrs:{\"init-rdf\":_vm.rdf},on:{\"submit\":_vm.submitRDF}})],1):_vm._e()]),_c('b-step-item',{attrs:{\"label\":\"Upload\",\"icon\":\"upload\"}},[(_vm.rdfYaml)?_c('b-field',{staticStyle:{\"height\":\"260px\",\"overflow\":\"auto\"},attrs:{\"label\":\"Upload Summary\"}},[(_vm.rdfYaml)?_c('markdown',{attrs:{\"baseUrl\":\"\",\"content\":_vm.formatedModelYaml}}):_vm._e()],1):_vm._e(),(_vm.editedFiles)?_c('b-field',{attrs:{\"label\":\"Files\",\"message\":\"These files will be uploaded or updated\"}},[_c('b-taglist',{attrs:{\"attached\":\"\",\"rounded\":\"\"}},_vm._l((_vm.editedFiles),function(file){return _c('b-tag',{key:file.sampleName + '/' + file.name,attrs:{\"rounded\":\"\"}},[_vm._v(_vm._s((file.sampleName ? file.sampleName + \"/\" : \"\") + file.name))])}),1)],1):_vm._e(),_c('br'),(_vm.similarDeposits && _vm.similarDeposits.length > 0)?_c('div',[_c('label',{staticClass:\"label\"},[_vm._v(\"Similar Existing Items\")]),_c('p',[_vm._v(\" The following published deposit(s) are similar to yours (matched by name), please make sure you are using distinctive names to avoid confusion to the users. \")]),_vm._l((_vm.similarDeposits),function(item){return _c('b-notification',{key:item.id,attrs:{\"type\":item.name === _vm.rdf.name ? 'is-danger' : null,\"aria-close-label\":\"Close notification\"}},[_c('h1',[_c('a',{attrs:{\"href\":item.config._deposit.links.html,\"target\":\"_blank\"}},[_vm._v(_vm._s(item.name))])]),_c('p',[_vm._v(_vm._s(item.description.slice(0, 200)))]),_c('p',[_vm._v(\" Authors: \"+_vm._s(item.authors && item.authors .map(function (author) { return author.name.split(\";\")[0]; }) .join(\",\"))+\" \")]),_c('p',[_vm._v(\"Uploaded: \"+_vm._s(item.config._deposit.updated))]),_c('br'),_c('div',{staticClass:\"columns\"},[(_vm.userId && item.owners && item.owners.includes(_vm.userId))?_c('b-button',{staticClass:\"column button is-primary is-light is-fullwidth\",attrs:{\"expanded\":\"\",\"icon-left\":\"autorenew\"},on:{\"click\":function($event){return _vm.createOrUpdateDeposit(item.config._deposit.id, false)}}},[_c('span',[_vm._v(\"Update as a new version\")])]):_vm._e()],1)])}),_c('b-button',{staticClass:\"button is-fullwidth\",class:{\n            'is-primary': _vm.sameNameDeposits && _vm.sameNameDeposits.length > 0\n          },staticStyle:{\"text-transform\":\"none\"},attrs:{\"expanded\":\"\",\"icon-left\":\"arrow-left\"},on:{\"click\":function($event){_vm.stepIndex = 1}}},[_vm._v(\"Go back to rename\")])],2):_vm._e(),_c('br'),_c('b-field',[_c('b-switch',{model:{value:(_vm.requestedJoinCommunity),callback:function ($$v) {_vm.requestedJoinCommunity=$$v},expression:\"requestedJoinCommunity\"}},[_vm._v(\" Apply for listing in the \"),_c('a',{attrs:{\"href\":_vm.client.baseURL +\n                '/communities/' +\n                _vm.siteConfig.zenodo_config.community,\"target\":\"_blank\"}},[_vm._v(\"ShareLoc.XYZ community list\")])])],1),(_vm.uploadStatus)?_c('p',[_vm._v(_vm._s(_vm.uploadStatus))]):_vm._e(),(_vm.uploadProgress)?_c('b-progress',{attrs:{\"type\":\"is-primary\",\"value\":_vm.uploadProgress,\"size\":\"is-small\",\"expanded\":\"\"}}):_vm._e(),_c('div',{staticClass:\"columns\"},[(_vm.client && _vm.editedFiles)?_c('div',{staticClass:\"column\"},[_c('b-button',{staticClass:\"button is-primary is-light is-fullwidth\",attrs:{\"disabled\":_vm.uploadProgress ||\n                (_vm.sameNameDeposits && _vm.sameNameDeposits.length > 0),\"expanded\":\"\",\"icon-left\":\"plus\"},on:{\"click\":function($event){return _vm.createOrUpdateDeposit()}}},[_c('span',[_vm._v(\"Upload as new deposit\")])])],1):_vm._e(),(_vm.client && _vm.editedFiles && _vm.depositId)?_c('div',{staticClass:\"column\"},[_c('b-button',{staticClass:\"button is-primary is-light is-fullwidth\",attrs:{\"disabled\":_vm.uploadProgress,\"expanded\":\"\",\"icon-left\":\"autorenew\"},on:{\"click\":function($event){return _vm.createOrUpdateDeposit(_vm.depositId, false)}}},[_c('span',[_vm._v(\"Add new version to deposit\")])])],1):_vm._e()])],1),_c('b-step-item',{attrs:{\"label\":\"Publish\",\"icon\":\"share-variant\",\"disabled\":\"\"}},[(_vm.publishedUrl)?_c('b-notification',{attrs:{\"type\":\"is-success\",\"has-icon\":\"\",\"aria-close-label\":\"Close notification\"}},[_c('h1',[_vm._v(\"Published on Zenodo\")]),_c('h2',[_vm._v(\"DOI: \"+_vm._s(_vm.publishedDOI))]),_c('h2',[_c('a',{attrs:{\"href\":_vm.publishedUrl,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.publishedUrl))])]),_c('p',[_vm._v(\" Note: Newly uploaded item may not appear immediately in the resource list. \")]),(_vm.requestedJoinCommunity)?_c('p',[_vm._v(\" To be listed as part of the verified ShareLoc.XYZ community list, a notification will be sent to the admin team aand we will review request soon. \")]):_vm._e()]):(_vm.prereserveDOI)?_c('b-notification',{attrs:{\"has-icon\":\"\",\"aria-close-label\":\"Close notification\"}},[_c('h1',[_vm._v(\"Ready to publish\")]),_c('h2',[_vm._v(\"Preserved DOI: \"+_vm._s(_vm.prereserveDOI.doi))]),_c('h2',[_vm._v(\" You can also review and add additional information on Zenodo: \"),_c('a',{attrs:{\"href\":_vm.prereserveUrl,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.prereserveUrl))])]),_c('p',[_vm._v(\" Note: Please check carefully before publishing. It is generally not possible to remove items after they have been published. Changes will be added as a new version, but will not erase the previous version. \")])]):_vm._e(),(_vm.uploadMode === 'update')?_c('b-notification',{attrs:{\"has-icon\":\"\",\"type\":\"is-info\",\"aria-close-label\":\"Close notification\"}},[_c('p',[_vm._v(\" Note: After publishing the updated deposit, you may see the item disappear from the website, this is normal because Zenodo need some time to index the new version. It should combe back in a while. \")])]):_vm._e(),(_vm.client && _vm.client.credential && _vm.uploaded && !_vm.publishedUrl)?_c('b-button',{staticClass:\"button is-primary is-fullwidth\",attrs:{\"expanded\":\"\"},on:{\"click\":function($event){return _vm.publishDeposition()}}},[_c('b-icon',{attrs:{\"icon\":\"upload\"}}),_c('span',[_vm._v(\"Publish\")])],1):_vm._e()],1)],1),_c('section',{staticStyle:{\"padding\":\"10px\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('label',{staticClass:\"label\",attrs:{\"for\":_vm.item.label}},[_vm._v(\" \"+_vm._s(_vm.item.label)+\" \"),_c('span',{staticClass:\"helpLabel has-text-grey-light is-size-7 is-italic\",staticStyle:{\"margin-left\":\".5rem\",\"font-weight\":\"400\"}},[_vm._v(_vm._s(_vm.item.help))]),(_vm.item.isRequired !== false)?_c('sup',{staticClass:\"has-text-grey-light is-size-7\"},[_vm._v(\"*\")]):_vm._e()]),_c('div',{staticClass:\"control\"},[_c('b-taginput',{attrs:{\"id\":_vm.item.label,\"data\":_vm.filteredTags,\"allow-new\":_vm.item.allow_new !== false,\"open-on-focus\":_vm.item.options && _vm.item.options.length > 0,\"autocomplete\":\"\",\"icon\":_vm.item.icon || 'label',\"placeholder\":_vm.item.placeholder},on:{\"input\":function($event){return _vm.$emit('input', _vm.value)},\"typing\":_vm.getFilteredTags},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),(_vm.error)?_c('p',{staticClass:\"help is-danger\"},[_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <label :for=\"item.label\" class=\"label\">\n      {{ item.label }}\n      <span\n        class=\"helpLabel has-text-grey-light is-size-7 is-italic\"\n        style=\"margin-left: .5rem;font-weight: 400;\"\n        >{{ item.help }}</span\n      >\n      <sup\n        class=\"has-text-grey-light is-size-7\"\n        v-if=\"item.isRequired !== false\"\n        >*</sup\n      >\n    </label>\n    <div class=\"control\">\n      <b-taginput\n        :id=\"item.label\"\n        v-model=\"value\"\n        :data=\"filteredTags\"\n        :allow-new=\"item.allow_new !== false\"\n        :open-on-focus=\"item.options && item.options.length > 0\"\n        autocomplete\n        @input=\"$emit('input', value)\"\n        :icon=\"item.icon || 'label'\"\n        :placeholder=\"item.placeholder\"\n        @typing=\"getFilteredTags\"\n      >\n      </b-taginput>\n      <p v-if=\"error\" class=\"help is-danger\">\n        {{ error }}\n      </p>\n    </div>\n  </div>\n</template>\n<script>\nimport { debounce } from \"../utils\";\n\nasync function getCompletion(text) {\n  const url = `https://www.ebi.ac.uk/ols/api/suggest?q=${text}`;\n  let response = await fetch(url);\n  if (response.ok) {\n    const ret = await response.json();\n    let results = [];\n    if (ret.response.numFound > 0) {\n      results = ret.response.docs.map(d => d.autosuggest);\n    }\n    const url = `https://www.ebi.ac.uk/ols/api/select?q=${text}`;\n    response = await fetch(url);\n    if (response.ok) {\n      const ret = await response.json();\n      if (ret.response.numFound > 0) {\n        results = results.concat(ret.response.docs.map(d => d.label));\n      }\n    }\n    // results = results.map(r => r.toLowerCase())\n    results = results.filter(function(item, pos) {\n      return results.indexOf(item) == pos;\n    });\n    return results;\n  } else {\n    console.error(`Failed to fetch compeltion from ebi ols: ${url}`, response);\n  }\n}\nexport default {\n  name: \"tags\",\n  props: {\n    error: {\n      type: String,\n      default: null\n    },\n    item: {\n      type: Object,\n      required: true\n    }\n  },\n  data: () => ({\n    value: undefined,\n    filteredTags: []\n  }),\n  mounted() {\n    this.filteredTags = this.item.options;\n  },\n  created() {\n    this.value = this.item.value;\n    this.item.value && this.$emit(\"input\", this.item.value);\n  },\n  methods: {\n    getFilteredTags(text) {\n      debounce(async () => {\n        this.filteredTags = await getCompletion(text);\n        // this.filteredTags = this.filteredTags.concat(newTags);\n        this.$forceUpdate();\n      }, 500)();\n\n      this.filteredTags =\n        this.item.options &&\n        this.item.options.filter(option => {\n          return (\n            option\n              .toString()\n              .toLowerCase()\n              .indexOf(text.toLowerCase()) >= 0\n          );\n        });\n    }\n  }\n};\n</script>\n<style>\n.autocomplete > .dropdown-menu > .dropdown-content {\n  display: block !important;\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagInputField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagInputField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TagInputField.vue?vue&type=template&id=ef0eb9dc&\"\nimport script from \"./TagInputField.vue?vue&type=script&lang=js&\"\nexport * from \"./TagInputField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TagInputField.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('label',{staticClass:\"label\",attrs:{\"for\":_vm.item.label}},[_vm._v(\" \"+_vm._s(_vm.item.label)+\" \"),(_vm.item.isRequired !== false)?_c('sup',{staticClass:\"has-text-grey-light is-size-7\"},[_vm._v(\"*\")]):_vm._e()]),_c('div',{staticClass:\"control\"},[_c('section',[_c('b-field',[_c('b-upload',{attrs:{\"id\":_vm.item.label,\"multiple\":\"\",\"drag-drop\":\"\",\"expanded\":\"\"},on:{\"input\":function($event){return _vm.updateFiles()}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_c('section',{staticClass:\"section\"},[_c('div',{staticClass:\"content has-text-centered\"},[_c('b-icon',{attrs:{\"icon\":\"upload\",\"size\":\"is-large\"}}),_vm._v(\" Drop additional files here \"),_c('br'),_vm._l((_vm.value),function(file,index){return _c('span',{key:index,staticClass:\"tag is-primary\"},[_vm._v(\" \"+_vm._s(file.name.slice(0, 20) + (file.name.length > 20 ? \"...\" : \"\"))+\" \"),_c('button',{staticClass:\"delete is-small\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.removeFile(_vm.item.label, index)}}})])}),_c('br'),(_vm.value && _vm.value.length > 0)?_c('b-button',{staticClass:\"is-small\",on:{\"click\":function($event){$event.preventDefault();return _vm.clearFiles()}}},[_vm._v(\"Clear files\")]):_vm._e()],2)])])],1)],1),(_vm.error)?_c('p',{staticClass:\"help is-danger\"},[_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <label :for=\"item.label\" class=\"label\">\n      {{ item.label }}\n      <sup\n        class=\"has-text-grey-light is-size-7\"\n        v-if=\"item.isRequired !== false\"\n        >*</sup\n      >\n    </label>\n    <div class=\"control\">\n      <section>\n        <b-field>\n          <b-upload\n            :id=\"item.label\"\n            v-model=\"value\"\n            @input=\"updateFiles()\"\n            multiple\n            drag-drop\n            expanded\n          >\n            <section class=\"section\">\n              <div class=\"content has-text-centered\">\n                <b-icon icon=\"upload\" size=\"is-large\"></b-icon>\n\n                Drop additional files here\n                <br />\n                <span\n                  v-for=\"(file, index) in value\"\n                  :key=\"index\"\n                  class=\"tag is-primary\"\n                >\n                  {{\n                    file.name.slice(0, 20) +\n                      (file.name.length > 20 ? \"...\" : \"\")\n                  }}\n                  <button\n                    class=\"delete is-small\"\n                    type=\"button\"\n                    @click.prevent=\"removeFile(item.label, index)\"\n                  ></button>\n                </span>\n                <br />\n                <b-button\n                  v-if=\"value && value.length > 0\"\n                  class=\"is-small\"\n                  @click.prevent=\"clearFiles()\"\n                  >Clear files</b-button\n                >\n              </div>\n            </section>\n          </b-upload>\n        </b-field>\n      </section>\n      <p v-if=\"error\" class=\"help is-danger\">\n        {{ error }}\n      </p>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"files\",\n  props: {\n    error: {\n      type: String,\n      default: null\n    },\n    item: {\n      type: Object,\n      required: true\n    }\n  },\n  data: () => ({\n    value: undefined\n  }),\n  created() {\n    this.value = this.item.value;\n    this.item.value && this.$emit(\"input\", this.item.value);\n  },\n  methods: {\n    removeFile(label, index) {\n      this.value.splice(index, 1);\n      this.$forceUpdate();\n    },\n    clearFiles() {\n      this.value = null;\n      this.$emit(\"input\", null);\n      this.$forceUpdate();\n    },\n    updateFiles() {\n      this.$emit(\"input\", this.value);\n      // we need this because otherwise we cannot update the list on the interface\n      this.$forceUpdate();\n    },\n    trimEllip(str, length) {\n      if (!str) return str;\n      if (typeof str === \"object\") str = str.toString();\n      return str.length > length ? str.substring(0, length) + \"...\" : str;\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DropFilesField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DropFilesField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DropFilesField.vue?vue&type=template&id=1de4cb25&\"\nimport script from \"./DropFilesField.vue?vue&type=script&lang=js&\"\nexport * from \"./DropFilesField.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dataset\"},[(_vm.jsonFields && _vm.jsonFields.length > 0)?_c('form-json',{attrs:{\"btnReset\":{ value: 'Reset' },\"btnSubmit\":{ value: 'OK' },\"camelizePayloadKeys\":false,\"formFields\":_vm.jsonFields,\"formName\":'metadata',\"components\":_vm.components},on:{\"formSubmitted\":_vm.formSubmitted}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.item.showLabel)?_c('label',{staticClass:\"label\",attrs:{\"for\":_vm.item.label}},[_vm._v(\" \"+_vm._s(_vm.item.label)+\" \"),_c('span',{staticClass:\"helpLabel has-text-grey-light is-size-7 is-italic\",staticStyle:{\"margin-left\":\".5rem\",\"font-weight\":\"400\"}},[_vm._v(_vm._s(_vm.item.help))]),(_vm.item.isRequired !== false)?_c('sup',{staticClass:\"has-text-grey-light is-size-7\"},[_vm._v(\"*\")]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"control\"},[_c('section',[_c('b-button',{staticClass:\"is-primary\",attrs:{\"size\":\"is-small\",\"icon-left\":\"plus\"},on:{\"click\":_vm.addNewSample}},[_vm._v(\" New Sample \")]),(_vm.samples && _vm.samples.length > 0)?_c('b-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"size\":\"is-small\",\"icon-left\":\"plus\"},on:{\"click\":function($event){return _vm.addNewChannel()}}},[_vm._v(\" Add Channel or Modality \")]):_vm._e(),_c('b-tabs',{attrs:{\"multiline\":\"\"},on:{\"input\":function($event){_vm.currentSample = _vm.samples[_vm.activeSample]}},model:{value:(_vm.activeSample),callback:function ($$v) {_vm.activeSample=$$v},expression:\"activeSample\"}},[_vm._l((_vm.samples),function(sample,k){return [_c('b-tab-item',{key:k,attrs:{\"value\":k,\"label\":sample.name},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [(_vm.currentSample === sample)?_c('b-input',{staticClass:\"input-title\",attrs:{\"placeholder\":\"Sample Name\"},model:{value:(sample.name),callback:function ($$v) {_vm.$set(sample, \"name\", $$v)},expression:\"sample.name\"}}):_c('a',{on:{\"click\":function($event){_vm.currentSample = sample}}},[_vm._v(\" \"+_vm._s(sample.name)+\" \")]),(_vm.currentSample === sample)?_c('button',{staticClass:\"delete is-small\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.removeSample(sample, k)}}}):_vm._e()]},proxy:true}],null,true)},[_c('b-table',{attrs:{\"data\":sample.channels,\"checkbox-position\":\"left\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('b-table-column',{attrs:{\"field\":\"name\",\"label\":\"Channel/Modality\"}},[_c('span',[_vm._v(_vm._s(props.row.name))])]),_c('b-table-column',{attrs:{\"field\":\"files\",\"label\":\"Files\"}},[(!props.row.files || props.row.files.length <= 0)?_c('span',{staticStyle:{\"color\":\"#f39f07\"}},[_vm._v(\"Not selected\")]):_c('span',[_vm._v(_vm._s(props.row.files.length)+\" files (\"+_vm._s(_vm.totalSize(props.row.files))+\")\")])]),_c('b-table-column',{attrs:{\"field\":\"actions\",\"label\":\"Actions\"}},[_c('b-upload',{staticClass:\"file-label\",staticStyle:{\"display\":\"inline-block\"},attrs:{\"multiple\":\"\",\"drag-drop\":\"\"},on:{\"input\":function($event){return _vm.fileSelected(sample, props.row, $event)}},model:{value:(props.row.files),callback:function ($$v) {_vm.$set(props.row, \"files\", $$v)},expression:\"props.row.files\"}},[_c('span',{staticClass:\"file-cta\"},[_c('b-icon',{staticClass:\"file-icon\",attrs:{\"icon\":\"upload\"}}),(!props.row.files || props.row.files.length <= 0)?_c('span',{staticClass:\"file-label\"},[_vm._v(\"Select or Drag&Drop File(s)\")]):_c('span',{staticClass:\"file-label\"},[_vm._v(\"Add More File(s)\")])],1)]),(props.row.files && props.row.files.length > 0)?_c('span',{staticClass:\"file-cta\",staticStyle:{\"display\":\"inline-block\",\"width\":\"50px\",\"margin-top\":\"5px\",\"cursor\":\"pointer\"},on:{\"click\":function($event){$event.stopPropagation();props.row.files = []}}},[_c('b-icon',{staticClass:\"file-icon\",staticStyle:{\"margin-top\":\"4px\"},attrs:{\"icon\":\"close\"}})],1):_vm._e()],1)]}},{key:\"empty\",fn:function(){return [_c('div',{staticClass:\"has-text-centered\"},[_vm._v(\"No file selected\")])]},proxy:true}],null,true)}),(sample.files && sample.files.length > 0)?_c('p',[_vm._v(\" Screenshots \")]):_vm._e(),(sample.files && sample.files.length > 0)?_c('div',{staticClass:\"snapshot-container\"},[_vm._l((sample.views || []),function(view,i){return _c('div',{key:i,staticClass:\"item\"},[_c('b-button',{staticClass:\"close-button\",attrs:{\"size\":\"is-small\",\"icon-left\":\"close\"},on:{\"click\":function($event){return _vm.removeScreenshot(sample.views, i)}}}),_c('img',{staticClass:\"image\",attrs:{\"src\":view.image,\"alt\":\"Screenshot\"}})],1)}),_c('a',{staticStyle:{\"text-align\":\"center\"},on:{\"click\":function($event){return _vm.previewSample(sample)}}},[_c('img',{staticClass:\"image\",staticStyle:{\"width\":\"100px\",\"margin-left\":\"50px\",\"margin-right\":\"50px\"},attrs:{\"src\":\"static/img/preview-screenshot.png\",\"alt\":\"Add button\"}}),_vm._v(\" Preview & Screenshot \")])],2):_vm._e()],1)]})],2),_c('b-field',[_c('b-switch',{attrs:{\"value\":_vm.enableConversion}},[_vm._v(\" Convert to SMLM format (Recommended) \")])],1)],1),(_vm.isDatasetValid)?_c('p',{staticClass:\"help is-danger\"},[_vm._v(\" You should add at least one sample and take some screenshots for the cover. \")]):_vm._e(),(_vm.error)?_c('p',{staticClass:\"help is-danger\"},[_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <label v-if=\"item.showLabel\" :for=\"item.label\" class=\"label\">\n      {{ item.label }}\n      <span\n        class=\"helpLabel has-text-grey-light is-size-7 is-italic\"\n        style=\"margin-left: .5rem;font-weight: 400;\"\n        >{{ item.help }}</span\n      >\n      <sup\n        class=\"has-text-grey-light is-size-7\"\n        v-if=\"item.isRequired !== false\"\n        >*</sup\n      >\n    </label>\n    <div class=\"control\">\n      <section>\n        <b-button\n          size=\"is-small\"\n          class=\"is-primary\"\n          icon-left=\"plus\"\n          @click=\"addNewSample\"\n        >\n          New Sample\n        </b-button>\n\n        <b-button\n          style=\"margin-left:10px;\"\n          v-if=\"samples && samples.length > 0\"\n          size=\"is-small\"\n          icon-left=\"plus\"\n          @click=\"addNewChannel()\"\n        >\n          Add Channel or Modality\n        </b-button>\n        <b-tabs\n          v-model=\"activeSample\"\n          @input=\"currentSample = samples[activeSample]\"\n          multiline\n        >\n          <template v-for=\"(sample, k) in samples\">\n            <b-tab-item :key=\"k\" :value=\"k\" :label=\"sample.name\">\n              <template #header>\n                <b-input\n                  class=\"input-title\"\n                  v-if=\"currentSample === sample\"\n                  v-model=\"sample.name\"\n                  placeholder=\"Sample Name\"\n                ></b-input>\n                <a v-else @click=\"currentSample = sample\">\n                  {{ sample.name }}\n                </a>\n                <button\n                  v-if=\"currentSample === sample\"\n                  class=\"delete is-small\"\n                  type=\"button\"\n                  @click.stop=\"removeSample(sample, k)\"\n                ></button>\n              </template>\n              <!-- <p>Files</p> -->\n              <!-- <div\n                v-for=\"(file, index) in sample.files\"\n                :key=\"index\"\n                class=\"tag is-info\"\n                style=\"cursor: pointer;margin:2px;\"\n                @click=\"previewSample({ files: [file], name: file.name })\"\n              >\n                {{\n                  file.name.slice(0, 20) + (file.name.length > 20 ? \"...\" : \"\")\n                }}\n                <button\n                  class=\"delete is-small\"\n                  type=\"button\"\n                  @click.stop=\"removeFile(sample.files, index)\"\n                ></button>\n              </div> -->\n              <b-table :data=\"sample.channels\" checkbox-position=\"left\">\n                <template slot-scope=\"props\">\n                  <b-table-column field=\"name\" label=\"Channel/Modality\">\n                    <span>{{ props.row.name }}</span>\n                  </b-table-column>\n                  <b-table-column field=\"files\" label=\"Files\">\n                    <span\n                      style=\"color: #f39f07;\"\n                      v-if=\"!props.row.files || props.row.files.length <= 0\"\n                      >Not selected</span\n                    >\n                    <span v-else\n                      >{{ props.row.files.length }} files ({{\n                        totalSize(props.row.files)\n                      }})</span\n                    >\n                  </b-table-column>\n                  <b-table-column field=\"actions\" label=\"Actions\">\n                    <b-upload\n                      v-model=\"props.row.files\"\n                      multiple\n                      style=\"display: inline-block;\"\n                      class=\"file-label\"\n                      drag-drop\n                      @input=\"fileSelected(sample, props.row, $event)\"\n                    >\n                      <span class=\"file-cta\">\n                        <b-icon class=\"file-icon\" icon=\"upload\"></b-icon>\n                        <span\n                          class=\"file-label\"\n                          v-if=\"!props.row.files || props.row.files.length <= 0\"\n                          >Select or Drag&Drop File(s)</span\n                        >\n                        <span class=\"file-label\" v-else>Add More File(s)</span>\n                      </span>\n                    </b-upload>\n                    <span\n                      class=\"file-cta\"\n                      style=\"display: inline-block;width: 50px; margin-top: 5px; cursor:pointer;\"\n                      v-if=\"props.row.files && props.row.files.length > 0\"\n                      @click.stop=\"props.row.files = []\"\n                    >\n                      <b-icon\n                        class=\"file-icon\"\n                        style=\"margin-top: 4px;\"\n                        icon=\"close\"\n                      ></b-icon>\n                    </span>\n                  </b-table-column>\n                </template>\n\n                <template #empty>\n                  <div class=\"has-text-centered\">No file selected</div>\n                </template>\n              </b-table>\n\n              <!-- <b-upload\n                :drag-drop=\"!sample.files || sample.files.length <= 0\"\n                v-model=\"sample.files\"\n                @input=\"updateFiles(sample)\"\n                multiple\n                expanded\n              >\n                <section v-if=\"!sample.files || sample.files.length <= 0\" class=\"section\">\n                  <div class=\"content has-text-centered\">\n                    <b-icon icon=\"upload\" size=\"is-large\"></b-icon>\n\n                    <p>Drag and drop files here</p>\n                    <p>\n                      For multi-channel image, drag the files for all the\n                      channels together.\n                    </p>\n                  </div>\n                </section>\n                <span v-else class=\"file-cta\">\n                    <b-icon class=\"file-icon\" icon=\"upload\"></b-icon>\n                    <span class=\"file-label\">Add new file</span>\n                </span>\n              </b-upload> -->\n              <p v-if=\"sample.files && sample.files.length > 0\">\n                Screenshots\n              </p>\n              <div\n                class=\"snapshot-container\"\n                v-if=\"sample.files && sample.files.length > 0\"\n              >\n                <div\n                  v-for=\"(view, i) in sample.views || []\"\n                  :key=\"i\"\n                  class=\"item\"\n                >\n                  <b-button\n                    size=\"is-small\"\n                    class=\"close-button\"\n                    icon-left=\"close\"\n                    @click=\"removeScreenshot(sample.views, i)\"\n                  >\n                  </b-button>\n                  <img class=\"image\" :src=\"view.image\" alt=\"Screenshot\" />\n                </div>\n                <a @click=\"previewSample(sample)\" style=\"text-align: center;\">\n                  <img\n                    class=\"image\"\n                    style=\"width:100px;margin-left:50px;margin-right: 50px;\"\n                    src=\"static/img/preview-screenshot.png\"\n                    alt=\"Add button\"\n                  />\n                  Preview & Screenshot\n                </a>\n              </div>\n            </b-tab-item>\n          </template>\n        </b-tabs>\n\n        <b-field>\n          <b-switch :value=\"enableConversion\">\n            Convert to SMLM format (Recommended)\n          </b-switch>\n        </b-field>\n      </section>\n      <p v-if=\"isDatasetValid\" class=\"help is-danger\">\n        You should add at least one sample and take some screenshots for the\n        cover.\n      </p>\n      <p v-if=\"error\" class=\"help is-danger\">\n        {{ error }}\n      </p>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapState } from \"vuex\";\nimport { fetchFile, randId } from \"../utils\";\nfunction getSampleFiles(sample) {\n  const files = [];\n  for (let ch of sample.channels) {\n    for (let fn = 0; fn < ch.files.length; fn++) {\n      const file = ch.files[fn];\n      let newFile;\n      // rename local file\n      if (file instanceof Blob) {\n        newFile = new File(\n          [file],\n          (ch.files.length > 1 ? ch.name + \"-\" + fn : ch.name) +\n            \".\" +\n            file.name.split(\".\").pop(),\n          { type: file.type, lastModified: file.lastModified }\n        );\n      } else {\n        // don't change remote file\n        newFile = Object.assign({}, file);\n      }\n      // backup the original name\n      newFile.originalName = file.name;\n      newFile.sampleName = sample.name;\n      files.push(newFile);\n    }\n  }\n  return files;\n}\nexport default {\n  name: \"file-preview\",\n  props: {\n    error: {\n      type: String,\n      default: null\n    },\n    item: {\n      type: Object,\n      required: true\n    }\n  },\n  data: () => ({\n    viewer: null,\n    activeSample: 0,\n    samples: [],\n    fileCache: {},\n    currentFile: null,\n    enableConversion: true,\n    currentSample: null,\n    sampleChannels: [],\n    sampleRunningNumber: 0\n  }),\n  created() {\n    this.samples = this.item.value || [];\n    for (let sample of this.samples) {\n      if (sample.files) {\n        const files = sample.files;\n        sample.channels = [];\n        for (let file of files) {\n          const name = file.name.split(\"-\")[0].split(\".\")[0];\n          if (!sample.channels.map(ch => ch.name).includes(name)) {\n            sample.channels.push({ name, files: [file] });\n          } else {\n            const channel = sample.channels.find(ch => ch.name === name);\n            channel.files.push(file);\n          }\n        }\n      }\n    }\n    this.commitValue();\n  },\n  computed: {\n    isDatasetValid() {\n      if (this.samples.length <= 0) return false;\n      let screenshots = [];\n      for (let sample of this.samples) {\n        if (sample.views) {\n          screenshots = screenshots.concat(sample.views);\n        }\n      }\n      return screenshots.length > 0;\n    },\n    ...mapState({\n      imjoyReady: state => state.imjoyReady,\n      imjoy: state => state.imjoy\n    })\n  },\n  watch: {\n    activeSample(newVal) {\n      this.currentSample = this.samples[newVal];\n      this.$forceUpdate();\n    }\n  },\n  methods: {\n    fileSelected(sample, channel, files) {\n      if (!files[0] || !files[0].name) {\n        alert(\n          \"Invalid file(s)! If you are uploading network shared files, please copy them to a local folder.\"\n        );\n        channel.files = [];\n        return;\n      }\n      if (sample.name.match(/$sample-[0-9]+/)) {\n        sample.name = files[0].name.split(/[-, .|:_]+/)[0];\n        if (sample.name.length < 3) {\n          sample.name = sample.name + \"-\" + this.samples.length;\n        }\n      }\n      this.commitValue();\n    },\n    totalSize(files) {\n      const size =\n        files.reduce((size, file) => size + file.size, 0) / 1024 / 1024; // unit: MB\n      if (isNaN(size)) return \"unkown\";\n      else return (size > 1 ? Math.round(size) : size.toFixed(1)) + \"MB\";\n    },\n    addNewChannel(name) {\n      if (!name) {\n        name = prompt(\n          \"Please give a unique name for the new channel or modality in lower case, e.g. smlm, raw, widefield, actin, alpha_tubulin.\",\n          \"default\"\n        );\n        if (name && name.includes(\"-\")) {\n          alert(\n            `\"Hyphen(-) is not allowed in the name, please remove it or use underscore instead.`\n          );\n          return;\n        }\n        if (name && this.sampleChannels.includes(name.toLowerCase())) {\n          alert(\n            `\"${name.toLowerCase()}\" already exists, please choose another name.`\n          );\n          return;\n        }\n      }\n      if (name) {\n        name = name.toLowerCase();\n        if (this.sampleChannels.includes(name)) {\n          alert(`\"${name}\" already exists, please choose another name.`);\n          return;\n        }\n        this.sampleChannels.push(name);\n        for (let sample of this.samples) {\n          sample.channels = sample.channels || [];\n          if (!sample.channels.find(ch => ch.name === name))\n            sample.channels.push({ name, files: [] });\n        }\n      } else {\n        throw new Error(\"Empty channel name\");\n      }\n    },\n    addNewSample() {\n      if (!this.sampleChannels || this.sampleChannels.length <= 0) {\n        this.addNewChannel();\n      }\n      this.sampleRunningNumber += 1;\n      this.samples.push({\n        name: \"sample-\" + this.sampleRunningNumber,\n        channels: this.sampleChannels.map(ch => {\n          return { name: ch, files: [] };\n        })\n      });\n      this.activeSample = this.samples.length - 1;\n      this.currentSample = this.samples[this.samples.length - 1];\n      this.commitValue();\n    },\n    commitValue() {\n      for (let sample of this.samples) {\n        sample.files = getSampleFiles(sample);\n      }\n\n      const samples = this.samples.filter(\n        sample => sample.files && sample.files.length > 0\n      );\n      samples.enableConversion = this.enableConversion;\n      this.$emit(\"input\", samples);\n      this.$forceUpdate();\n    },\n    removeScreenshot(screenshots, index) {\n      screenshots.splice(index, 1);\n      // this.selectedScreenshot = screenshots.length-1;\n      this.commitValue();\n      this.$forceUpdate();\n    },\n    async capture() {\n      const img = await this.viewer.captureImage();\n      const config = await this.viewer.getViewConfig();\n      config[\"files\"] = this.currentFiles && this.currentFiles.map(f => f.name);\n      config[\"viewer_type\"] = this.viewer.config.type;\n      this.currentSample.views = this.currentSample.views || [];\n      if (this.currentSample.views.filter(s => s.image === img).length <= 0)\n        this.currentSample.views.push({ config, image: img });\n      else\n        this.imjoy.api.showMessage(\n          \"Please change the image to another view and try again.\"\n        );\n      // this.selectedScreenshot = this.currentSample.views.length-1;\n      this.commitValue();\n      this.imjoy.api.showMessage(\"New screenshot added!\");\n      this.$forceUpdate();\n    },\n    removeSample(sample, index) {\n      // if (this.currentSample && this.currentSample === sample)\n      //   this.currentSample = null;\n      this.samples.splice(index, 1);\n      this.activeSample = index - 1;\n      this.commitValue();\n      this.$forceUpdate();\n    },\n    removeFile(files, index) {\n      const file = files[index];\n      if (this.currentFiles && this.currentFiles.includes(file))\n        this.currentFiles = null;\n      files.splice(index, 1);\n      this.commitValue();\n      this.$forceUpdate();\n    },\n    // async updateFiles(sample) {\n    //   // If the user drag and drop a samba shared file, it won't work\n    //   if (!sample.files[0] || !sample.files[0].name) {\n    //     alert(\n    //       \"Invalid file(s)! If you are uploading network shared files, please copy them to a local folder.\"\n    //     );\n    //     return;\n    //   }\n    //   let comm = sample.files[0].name; // FIXME:\n    //   comm = comm.split(\".\")[0];\n    //   for (let i = 1; i < sample.files.length; i++) {\n    //     comm = longestCommonSubstring(comm, sample.files[i].name);\n    //   }\n    //   if (comm.length > 2) sample.name = comm;\n    //   else sample.name = \"sample-\" + this.samples.length;\n    //   this.commitValue();\n    // },\n    trimEllip(str, length) {\n      if (!str) return str;\n      if (typeof str === \"object\") str = str.toString();\n      return str.length > length ? str.substring(0, length) + \"...\" : str;\n    },\n    async displayImage(file, dialogID) {\n      const loadingComponent = this.$buefy.loading.open({\n        container: this.$el,\n        canCancel: true\n      });\n      try {\n        this.viewer = await this.imjoy.api.showDialog({\n          name: file.name.slice(0, 40),\n          src: \"https://kaibu.org/#/app\",\n          w: 10,\n          h: 5,\n          config: { open_sidebar: false },\n          window_id: dialogID\n        });\n\n        // encode the file using the FileReader API\n        const base64 = await new Promise((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onloadend = () => {\n            // use a regex to remove data url part\n            resolve(reader.result);\n          };\n          reader.onerror = reject;\n          reader.readAsDataURL(file);\n        });\n\n        await this.viewer.view_image(base64);\n\n        return;\n      } catch (e) {\n        console.error(e);\n        throw e;\n      } finally {\n        loadingComponent.close();\n      }\n    },\n    async fetchRemoteFile(file) {\n      // fetch remote file\n      try {\n        if (!this.fileCache[file.url]) {\n          const newFile = await fetchFile(\n            file.url,\n            file.name,\n            this.imjoy && this.imjoy.api.showMessage\n          );\n          // remember the remote file\n          newFile.remote = file;\n          // replace the file with the actual one\n          this.fileCache[file.url] = newFile;\n          file = newFile;\n        } else {\n          file = this.fileCache[file.url];\n        }\n      } catch (e) {\n        console.error(e);\n        alert(`Failed to fetch file from ${file.url}: ${e}`);\n      }\n      return file;\n    },\n    markFileConversion(sample, locFiles) {\n      // We always use data as the converted file name\n      let saveFileName = \"data\";\n      if (!saveFileName.endsWith(\".smlm\"))\n        saveFileName = saveFileName + \".smlm\";\n\n      sample.convert = async () => {\n        const smlmPlugin = await this.imjoy.api.getPlugin(\"SMLM File IO\");\n        const smlm = await smlmPlugin.load(locFiles);\n        const zip = await smlm.save(saveFileName);\n        zip.sampleName = sample.name;\n        zip.converted = locFiles;\n        return zip;\n      };\n      sample.converted = locFiles;\n      sample.convertFileName = saveFileName;\n    },\n    async previewSample(sample) {\n      this.currentSample = sample;\n      const files = getSampleFiles(sample);\n      files.forEach(file => (file.sampleName = sample.name));\n      const api = this.imjoy.api;\n      const loadingComponent = this.$buefy.loading.open({\n        canCancel: true,\n        container: this.$el\n      });\n      // const container = document.getElementById(this.containerId);\n      // const w = container.getBoundingClientRect().width;\n      // container.style.height = w / 2 + 111 + \"px\"; // add 111px for the plane slider\n      const dialogID = randId();\n      const normalizedFiles = [];\n      for (let file of files) {\n        if (file.type === \"remote\") {\n          normalizedFiles.push(await this.fetchRemoteFile(file));\n        } else if (file.type === \"generator\") {\n          normalizedFiles.push(await file.generate());\n        } else {\n          normalizedFiles.push(file);\n        }\n      }\n      this.currentFiles = normalizedFiles;\n\n      // display SMLM file\n      try {\n        let smlmFiles = [];\n        const locFiles = normalizedFiles.filter(\n          file =>\n            file.name.endsWith(\".smlm\") ||\n            file.name.endsWith(\".csv\") ||\n            file.name.endsWith(\".tsv\") ||\n            file.name.endsWith(\".xls\") ||\n            file.name.endsWith(\".txt\")\n        );\n        if (locFiles.length <= 0) {\n          // display image\n          // TODO: how to display the image sample with multiple images\n          const fn = normalizedFiles[0].name.toLowerCase();\n          if (\n            fn.endsWith(\".png\") ||\n            fn.endsWith(\".jpeg\") ||\n            fn.endsWith(\".jpg\")\n          ) {\n            try {\n              await this.displayImage(normalizedFiles[0], dialogID);\n            } catch (e) {\n              alert(`${e}`);\n            }\n            loadingComponent.close();\n            return;\n          } else\n            alert(\n              \"No localization file found (only support .smlm, .csv, .tsv, .xls and .txt files)\"\n            );\n          return;\n        }\n        const smlmPlugin = await api.getPlugin(\"SMLM File IO\");\n        for (let file of locFiles) {\n          // display SMLM file\n          try {\n            const smlm = await smlmPlugin.load(file);\n            smlmFiles = smlmFiles.concat(smlm.files);\n          } catch (e) {\n            console.error(e);\n            alert(`${e}`);\n          } finally {\n            loadingComponent.close();\n          }\n        }\n\n        // this will mark the file conversion\n        // the convert function will be called during upload\n        this.markFileConversion(sample, locFiles);\n        const baseUrl = window.location.origin + window.location.pathname;\n        this.viewer = await api.showDialog({\n          name: sample.name.slice(0, 40),\n          src: baseUrl + \"FairyDust.imjoy.html\",\n          data: smlmFiles,\n          window_id: dialogID\n        });\n\n        smlmFiles = null;\n\n        // inject take screenshot button\n        if (this.viewer.captureImage) {\n          const windowContainer = document.getElementById(dialogID);\n          const snapButton = document.createElement(\"button\");\n          snapButton.innerHTML = \"Take a screenshot\";\n          snapButton.classList.add(\"button\");\n          snapButton.classList.add(\"snap-button\");\n          snapButton.onclick = () => {\n            this.capture();\n          };\n          windowContainer.appendChild(snapButton);\n        }\n        await api.showMessage(\n          \"Done! Please use the 'Take a screenshot' button to create more cover images.\"\n        );\n        // container.style.height = w / 2 + 111 + \"px\"; // add 111px for the plane slider\n        if (!this.currentSample.views || this.currentSample.views.length <= 0) {\n          setTimeout(() => {\n            this.capture();\n          }, 1000);\n        }\n        // document.getElementById(this.containerId + \"-files\").scrollIntoView();\n      } catch (e) {\n        console.error(e);\n        alert(`${e}`);\n      } finally {\n        loadingComponent.close();\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n.snapshot-container {\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n}\n\n.snapshot-container .item {\n  flex: 1;\n  max-width: 20%;\n  margin: 3px;\n}\n\n.snapshot-container .item > .image {\n  border-radius: 6px;\n}\n.close-button {\n  opacity: 0;\n  position: absolute;\n  z-index: 1;\n  background: #ffffff8f;\n}\n\n.snapshot-container:hover .close-button {\n  opacity: 1;\n}\n\n.tab-content {\n  margin: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePreviewField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilePreviewField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FilePreviewField.vue?vue&type=template&id=c2aba96e&scoped=true&\"\nimport script from \"./FilePreviewField.vue?vue&type=script&lang=js&\"\nexport * from \"./FilePreviewField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FilePreviewField.vue?vue&type=style&index=0&id=c2aba96e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c2aba96e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('label',{staticClass:\"label\",attrs:{\"for\":_vm.item.label}},[_vm._v(\" \"+_vm._s(_vm.item.label)+\" \"),_c('span',{staticClass:\"helpLabel has-text-grey-light is-size-7 is-italic\",staticStyle:{\"margin-left\":\".5rem\",\"font-weight\":\"400\"}},[_vm._v(_vm._s(_vm.item.help))]),(_vm.item.isRequired !== false)?_c('sup',{staticClass:\"has-text-grey-light is-size-7\"},[_vm._v(\"*\")]):_vm._e()]),_c('div',{staticClass:\"control\"},[_vm._l((_vm.value),function(citation,i){return _c('div',{key:i},[_c('b-field',[_c('b-input',{attrs:{\"type\":\"text\",\"placeholder\":\"Citation text\",\"maxlength\":\"1000\"},on:{\"input\":_vm.commitValue},model:{value:(citation.text),callback:function ($$v) {_vm.$set(citation, \"text\", $$v)},expression:\"citation.text\"}}),_c('b-input',{attrs:{\"type\":\"text\",\"placeholder\":\"DOI (optional)\",\"maxlength\":\"100\"},on:{\"input\":_vm.commitValue},model:{value:(citation.doi),callback:function ($$v) {_vm.$set(citation, \"doi\", $$v)},expression:\"citation.doi\"}}),_c('b-input',{attrs:{\"type\":\"text\",\"placeholder\":\"URL (optional)\",\"maxlength\":\"1000\"},on:{\"input\":_vm.commitValue},model:{value:(citation.url),callback:function ($$v) {_vm.$set(citation, \"url\", $$v)},expression:\"citation.url\"}}),(_vm.value.length > 1)?_c('b-button',{staticClass:\"button\",staticStyle:{\"text-transform\":\"none\"},attrs:{\"icon-left\":\"delete\"},on:{\"click\":function($event){return _vm.removeCitation(citation)}}}):_vm._e(),(\n            i === _vm.value.length - 1 &&\n              !(!citation.text || citation.text === '')\n          )?_c('b-button',{staticClass:\"button\",staticStyle:{\"text-transform\":\"none\"},attrs:{\"icon-left\":\"plus\"},on:{\"click\":_vm.addNewCitation}}):_vm._e()],1)],1)}),(_vm.error)?_c('p',{staticClass:\"help is-danger\"},[_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <label :for=\"item.label\" class=\"label\">\n      {{ item.label }}\n      <span\n        class=\"helpLabel has-text-grey-light is-size-7 is-italic\"\n        style=\"margin-left: .5rem;font-weight: 400;\"\n        >{{ item.help }}</span\n      >\n      <sup\n        class=\"has-text-grey-light is-size-7\"\n        v-if=\"item.isRequired !== false\"\n        >*</sup\n      >\n    </label>\n    <div class=\"control\">\n      <div v-for=\"(citation, i) in value\" :key=\"i\">\n        <b-field>\n          <b-input\n            @input=\"commitValue\"\n            type=\"text\"\n            placeholder=\"Citation text\"\n            v-model=\"citation.text\"\n            maxlength=\"1000\"\n          >\n          </b-input>\n          <b-input\n            @input=\"commitValue\"\n            type=\"text\"\n            placeholder=\"DOI (optional)\"\n            v-model=\"citation.doi\"\n            maxlength=\"100\"\n          >\n          </b-input>\n          <b-input\n            @input=\"commitValue\"\n            type=\"text\"\n            placeholder=\"URL (optional)\"\n            v-model=\"citation.url\"\n            maxlength=\"1000\"\n          >\n          </b-input>\n          <b-button\n            v-if=\"value.length > 1\"\n            style=\"text-transform:none;\"\n            class=\"button\"\n            icon-left=\"delete\"\n            @click=\"removeCitation(citation)\"\n          ></b-button>\n          <b-button\n            v-if=\"\n              i === value.length - 1 &&\n                !(!citation.text || citation.text === '')\n            \"\n            style=\"text-transform:none;\"\n            class=\"button\"\n            icon-left=\"plus\"\n            @click=\"addNewCitation\"\n          ></b-button>\n        </b-field>\n      </div>\n      <p v-if=\"error\" class=\"help is-danger\">\n        {{ error }}\n      </p>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"citation\",\n  props: {\n    error: {\n      type: String,\n      default: null\n    },\n    item: {\n      type: Object,\n      required: true\n    }\n  },\n  data: () => ({\n    value: undefined,\n    filteredTags: []\n  }),\n  mounted() {\n    this.filteredTags = this.item.options;\n  },\n  created() {\n    this.value = this.item.value;\n    if (typeof this.value === \"string\") this.value = [{ text: this.value }];\n    if (this.value && !Array.isArray(this.value)) this.value = [this.value];\n    this.value = this.value || [];\n    if (this.value.length <= 0) {\n      this.value.push({\n        text: \"\",\n        doi: \"\",\n        url: \"\"\n      });\n    }\n    this.commitValue();\n  },\n  methods: {\n    commitValue() {\n      if (this.value.length <= 0) this.$emit(\"input\", null);\n      else {\n        if (this.value[this.value.length - 1].text === \"\")\n          this.$emit(\"input\", this.value.slice(0, this.value.length - 1));\n        else this.$emit(\"input\", this.value);\n      }\n    },\n    addNewCitation() {\n      if (this.value[this.value.length - 1].text !== \"\") {\n        this.value.push({});\n      }\n      this.commitValue();\n    },\n    removeCitation(citation) {\n      const index = this.value.indexOf(citation);\n      if (index >= 0) {\n        this.value.splice(index, 1);\n      }\n      this.commitValue();\n    }\n  }\n};\n</script>\n<style>\n.autocomplete > .dropdown-menu > .dropdown-content {\n  display: block !important;\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CitationInputField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CitationInputField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CitationInputField.vue?vue&type=template&id=81e5987a&\"\nimport script from \"./CitationInputField.vue?vue&type=script&lang=js&\"\nexport * from \"./CitationInputField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CitationInputField.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('label',{staticClass:\"label\",attrs:{\"for\":_vm.item.label}},[_vm._v(\" \"+_vm._s(_vm.item.label)+\" \"),_c('span',{staticClass:\"helpLabel has-text-grey-light is-size-7 is-italic\",staticStyle:{\"margin-left\":\".5rem\",\"font-weight\":\"400\"}},[_vm._v(_vm._s(_vm.item.help))]),(_vm.item.isRequired !== false)?_c('sup',{staticClass:\"has-text-grey-light is-size-7\"},[_vm._v(\"*\")]):_vm._e()]),_c('div',{staticClass:\"control\"},[_vm._l((_vm.value),function(author,i){return _c('div',{key:i},[_c('b-field',[_c('b-input',{attrs:{\"type\":\"text\",\"placeholder\":\"Full Name\",\"maxlength\":\"1000\"},on:{\"input\":_vm.commitValue},model:{value:(author.name),callback:function ($$v) {_vm.$set(author, \"name\", $$v)},expression:\"author.name\"}}),_c('b-input',{attrs:{\"type\":\"text\",\"placeholder\":\"Affiliation (optional)\",\"maxlength\":\"100\"},on:{\"input\":_vm.commitValue},model:{value:(author.affiliation),callback:function ($$v) {_vm.$set(author, \"affiliation\", $$v)},expression:\"author.affiliation\"}}),_c('b-input',{attrs:{\"type\":\"text\",\"placeholder\":\"ORCID (optional)\",\"maxlength\":\"1000\"},on:{\"input\":_vm.commitValue},model:{value:(author.orcid),callback:function ($$v) {_vm.$set(author, \"orcid\", $$v)},expression:\"author.orcid\"}}),(_vm.value.length > 1)?_c('b-button',{staticClass:\"button\",staticStyle:{\"text-transform\":\"none\"},attrs:{\"icon-left\":\"delete\"},on:{\"click\":function($event){return _vm.removeAuthor(author)}}}):_vm._e(),(\n            i === _vm.value.length - 1 && !(!author.name || author.name === '')\n          )?_c('b-button',{staticClass:\"button\",staticStyle:{\"text-transform\":\"none\"},attrs:{\"icon-left\":\"plus\"},on:{\"click\":_vm.addNewAuthor}}):_vm._e()],1)],1)}),(_vm.error)?_c('p',{staticClass:\"help is-danger\"},[_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <label :for=\"item.label\" class=\"label\">\n      {{ item.label }}\n      <span\n        class=\"helpLabel has-text-grey-light is-size-7 is-italic\"\n        style=\"margin-left: .5rem;font-weight: 400;\"\n        >{{ item.help }}</span\n      >\n      <sup\n        class=\"has-text-grey-light is-size-7\"\n        v-if=\"item.isRequired !== false\"\n        >*</sup\n      >\n    </label>\n    <div class=\"control\">\n      <div v-for=\"(author, i) in value\" :key=\"i\">\n        <b-field>\n          <b-input\n            @input=\"commitValue\"\n            type=\"text\"\n            placeholder=\"Full Name\"\n            v-model=\"author.name\"\n            maxlength=\"1000\"\n          >\n          </b-input>\n          <b-input\n            @input=\"commitValue\"\n            type=\"text\"\n            placeholder=\"Affiliation (optional)\"\n            v-model=\"author.affiliation\"\n            maxlength=\"100\"\n          >\n          </b-input>\n          <b-input\n            @input=\"commitValue\"\n            type=\"text\"\n            placeholder=\"ORCID (optional)\"\n            v-model=\"author.orcid\"\n            maxlength=\"1000\"\n          >\n          </b-input>\n\n          <b-button\n            v-if=\"value.length > 1\"\n            style=\"text-transform:none;\"\n            class=\"button\"\n            icon-left=\"delete\"\n            @click=\"removeAuthor(author)\"\n          ></b-button>\n          <b-button\n            v-if=\"\n              i === value.length - 1 && !(!author.name || author.name === '')\n            \"\n            style=\"text-transform:none;\"\n            class=\"button\"\n            icon-left=\"plus\"\n            @click=\"addNewAuthor\"\n          ></b-button>\n        </b-field>\n      </div>\n      <p v-if=\"error\" class=\"help is-danger\">\n        {{ error }}\n      </p>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"author\",\n  props: {\n    error: {\n      type: String,\n      default: null\n    },\n    item: {\n      type: Object,\n      required: true\n    }\n  },\n  data: () => ({\n    value: undefined,\n    filteredTags: []\n  }),\n  mounted() {\n    this.filteredTags = this.item.options;\n  },\n  created() {\n    this.value = this.item.value;\n    if (this.value && !Array.isArray(this.value)) this.value = [this.value];\n    this.value = this.value || [];\n    this.value = this.value.filter(v => v.name && v.name != \"\");\n    this.commitValue();\n\n    if (this.value.length <= 0) {\n      this.value.push({});\n    }\n  },\n  methods: {\n    commitValue() {\n      if (this.value.length <= 0) this.$emit(\"input\", null);\n      else {\n        if (this.value[this.value.length - 1].name === \"\")\n          this.$emit(\"input\", this.value.slice(0, this.value.length - 1));\n        else this.$emit(\"input\", this.value);\n      }\n    },\n    addNewAuthor() {\n      if (this.value[this.value.length - 1].name !== \"\") {\n        this.value.push({});\n      }\n      this.commitValue();\n    },\n    removeAuthor(author) {\n      const index = this.value.indexOf(author);\n      if (index >= 0) {\n        this.value.splice(index, 1);\n      }\n      this.commitValue();\n    }\n  }\n};\n</script>\n<style>\n.autocomplete > .dropdown-menu > .dropdown-content {\n  display: block !important;\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AuthorInputField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AuthorInputField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AuthorInputField.vue?vue&type=template&id=0ca0e1e2&\"\nimport script from \"./AuthorInputField.vue?vue&type=script&lang=js&\"\nexport * from \"./AuthorInputField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AuthorInputField.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"dataset\">\n    <form-json\n      v-if=\"jsonFields && jsonFields.length > 0\"\n      :btnReset=\"{ value: 'Reset' }\"\n      :btnSubmit=\"{ value: 'OK' }\"\n      :camelizePayloadKeys=\"false\"\n      :formFields=\"jsonFields\"\n      :formName=\"'metadata'\"\n      @formSubmitted=\"formSubmitted\"\n      :components=\"components\"\n    >\n    </form-json>\n    <!-- <b-menu class=\"is-custom-mobile\">\n            <b-menu-list label=\"Menu\">\n              <b-menu-item\n                icon=\"information-outline\"\n                label=\"Info\"\n              ></b-menu-item>\n              <b-menu-item\n                active\n                expanded\n                icon=\"settings\"\n                label=\"Administrator\"\n              >\n                <b-menu-item icon=\"account\" label=\"Users\"></b-menu-item>\n                <b-menu-item\n                  icon=\"cellphone-link\"\n                  label=\"Devices\"\n                ></b-menu-item>\n                <b-menu-item\n                  icon=\"cash-multiple\"\n                  label=\"Payments\"\n                  disabled\n                ></b-menu-item>\n              </b-menu-item>\n              <b-menu-item icon=\"account\" label=\"My Account\">\n                <b-menu-item\n                  icon=\"account-box\"\n                  label=\"Account data\"\n                ></b-menu-item>\n                <b-menu-item\n                  icon=\"home-account\"\n                  label=\"Addresses\"\n                ></b-menu-item>\n              </b-menu-item>\n            </b-menu-list>\n            <b-menu-list>\n              <b-menu-item label=\"Expo\" icon=\"link\"></b-menu-item>\n            </b-menu-list>\n            <b-menu-list label=\"Actions\">\n              <b-menu-item icon=\"logout\" label=\"Logout\"></b-menu-item>\n            </b-menu-list>\n          </b-menu> -->\n  </div>\n</template>\n<script>\nimport spdxLicenseList from \"spdx-license-list/full\";\nimport \"vue-form-json/dist/vue-form-json.css\";\nimport formJson from \"vue-form-json/dist/vue-form-json.common.js\";\n// import Markdown from \"@/components/Markdown.vue\";\nimport TagInputField from \"@/components/TagInputField.vue\";\nimport DropFilesField from \"@/components/DropFilesField.vue\";\nimport FilePreviewField from \"@/components/FilePreviewField.vue\";\nimport CitationInputField from \"@/components/CitationInputField.vue\";\nimport AuthorInputField from \"@/components/AuthorInputField.vue\";\n// import marked from \"marked\";\n// import DOMPurify from \"dompurify\";\nimport { mapState } from \"vuex\";\n\nimport { dataURLtoFile, resizeImage } from \"../utils\";\n\nexport default {\n  name: \"upload-form\",\n  props: [\"resourceId\", \"initRdf\"],\n  components: {\n    \"form-json\": formJson,\n    // markdown: Markdown,\n    // eslint-disable-next-line vue/no-unused-components\n    TagInputField,\n    // eslint-disable-next-line vue/no-unused-components\n    DropFilesField,\n    // eslint-disable-next-line vue/no-unused-components\n    FilePreviewField,\n    // eslint-disable-next-line vue/no-unused-components\n    CitationInputField,\n    // eslint-disable-next-line vue/no-unused-components\n    AuthorInputField\n  },\n  computed: {\n    components: () => ({\n      TagInputField,\n      DropFilesField,\n      FilePreviewField,\n      CitationInputField,\n      AuthorInputField\n    }),\n    ...mapState({\n      client: state => state.zenodoClient,\n      resourceItems: state => state.resourceItems,\n      allTags: state => state.allTags\n    })\n  },\n  data() {\n    return {\n      jsonFields: [],\n      expandOnHover: false,\n      expandWithDelay: false,\n      reduce: false,\n      rdf: null\n    };\n  },\n  mounted() {\n    this.initializeRdfForm(this.initRdf);\n    this.$root.$on(\"formSubmitted\", this.formSubmitted);\n  },\n  methods: {\n    transformFields(fields) {\n      const typeMapping = {};\n      for (let k in this.components) {\n        typeMapping[this.components[k].name] = k;\n      }\n      // mapping type to component name\n      for (let field of fields) {\n        if (typeMapping[field.type]) {\n          field.is = typeMapping[field.type];\n          delete field.type;\n        }\n      }\n      return fields;\n    },\n    async formSubmitted(result) {\n      const editedFiles = [];\n      const rdfNameMapping = {\n        // type: \"Type\",\n        name: \"Dataset Name\",\n        description: \"Description\",\n        // version: \"Version\",\n        license: \"License\",\n        authors: \"Authors\",\n        uploaded_by: \"Uploaded by\",\n        contact_email: \"Contact Email\",\n        // source: \"Source\",\n        // git_repo: \"Git Repository\",\n        tags: \"Tags\",\n        cite: \"Citation\",\n        links: \"Links\"\n      };\n      const values = result.values;\n      this.rdf = {};\n      for (let k in rdfNameMapping) {\n        this.rdf[k] = values[rdfNameMapping[k]];\n      }\n      try {\n        // save it for next time\n        localStorage.setItem(\"license\", this.rdf.license);\n        localStorage.setItem(\"uploaded_by\", this.rdf.uploaded_by);\n        localStorage.setItem(\"contact_email\", this.rdf.contact_email);\n      } catch (e) {\n        console.error(e);\n      }\n      let rdfFileName = \"rdf.yaml\";\n      this.rdf.type = \"dataset\";\n      this.rdf.links = this.rdf.links || [];\n      this.rdf.tags = this.rdf.tags || [];\n      this.rdf.config = this.rdf.config || {};\n      this.rdf.config._rdf_file = \"./\" + rdfFileName;\n      this.rdf.config._docstring = values[\"Documentation\"];\n      const samples = values[\"Samples\"];\n\n      if (!this.rdf.tags.includes(\"smlm\")) this.rdf.tags.push(\"smlm\");\n\n      // Add documentation\n      if (this.rdf.config._docstring) {\n        const blob = new Blob([this.rdf.config._docstring], {\n          type: \"text/markdown\"\n        });\n        const file = new File([blob], \"README.md\");\n        this.rdf.documentation = \"./README.md\";\n        editedFiles.push(file);\n        delete this.rdf.config._docstring;\n      }\n      // Add views and screenshots\n      if (samples && samples.length > 0) {\n        this.rdf.covers = this.rdf.covers || [];\n        this.rdf.config = this.rdf.config || {};\n        let maxScreenshotCount = 10;\n        for (let sample of samples) {\n          // we add a file generator\n          if (samples.enableConversion && sample.convert) {\n            const converted =\n              (sample.converted && sample.converted.map(file => file.name)) ||\n              [];\n            // remove the original files, e.g. the csv files\n            sample.files = sample.files.filter(\n              f =>\n                !converted.includes(f.name) && f.name !== sample.convertFileName\n            );\n            const originalName = sample.converted.map(f => f.originalName);\n            // replace with converted files\n            sample.files.push({\n              type: \"generator\",\n              name: sample.convertFileName,\n              sampleName: sample.name,\n              generate: sample.convert,\n              originalName\n            });\n          }\n          // we will also add all the files here\n          // note that after conversion, some files will be removed\n          for (let file of sample.files) {\n            if (file.type !== \"remote\") {\n              editedFiles.push(file);\n            }\n          }\n          let count = 0;\n          if (!sample.views) {\n            alert(\"Please take screenshots for \" + sample.name);\n            throw new Error(\"No screenshot found for \" + sample.name);\n          }\n          const baseURL = this.rdf.config?._deposit?.links?.bucket;\n          for (let screenshot of sample.views) {\n            const { image } = screenshot;\n            let blob;\n            // skip adding remote screenshot\n            if (image.startsWith(\"http\")) {\n              // extract file name from URL\n              const filename = image\n                .split(\"?\")[0]\n                .split(\"/\")\n                .pop();\n\n              if (\n                baseURL &&\n                image === `${baseURL}/${sample.name}/${filename}`\n              ) {\n                this.rdf.covers.push(`./${sample.name}/${filename}`);\n                continue;\n              } else {\n                blob = await (await fetch(image)).blob();\n              }\n            } else blob = dataURLtoFile(image);\n            const existingNames = editedFiles.map(f => f.name);\n            // check for naming colision\n            while (\n              existingNames.includes(\"screenshot-\" + count + \".png\") ||\n              existingNames.includes(\"screenshot-\" + count + \"_thumbnail.png\")\n            ) {\n              count++;\n            }\n            const fileName = \"screenshot-\" + count;\n            const file = new File([blob], fileName + \".png\", {\n              type: blob.type\n            });\n            file.sampleName = sample.name;\n            editedFiles.push(file);\n\n            // delete screenshot.image;\n            screenshot.image_name = fileName + \".png\";\n\n            // limit the cover image number\n            if (maxScreenshotCount >= 0) {\n              // generate thumbnail for the cover\n              const resizedImage = await resizeImage({\n                file,\n                maxSize: 256\n              });\n\n              const fileSmall = new File(\n                [resizedImage],\n                fileName + \"_thumbnail.png\",\n                {\n                  type: resizedImage.type\n                }\n              );\n              fileSmall.sampleName = sample.name;\n              editedFiles.push(fileSmall);\n\n              this.rdf.covers.push(\n                `./${sample.name}/${fileName}_thumbnail.png`\n              );\n              maxScreenshotCount--;\n            }\n          }\n        }\n      }\n\n      this.rdf.attachments = this.rdf.attachments || {};\n      this.rdf.attachments.samples = samples.map(sample => {\n        return {\n          name: sample.name,\n          views: sample.views,\n          files: sample.files.map(file => {\n            return {\n              name: file.name,\n              size: file.size || null,\n              originalName: file.originalName || null\n            };\n          })\n        };\n      });\n\n      // TODO: fix attachments.files for the packager\n      const rdf = Object.assign({}, this.rdf);\n      delete rdf._metadata;\n      console.log(\"RDF: \", rdf);\n\n      this.rdf.config._files = editedFiles;\n      this.$emit(\"submit\", this.rdf);\n    },\n    initializeRdfForm(rdf) {\n      this.rdf = rdf || {};\n      this.rdf.type = \"dataset\";\n      this.rdf.format_version = this.rdf.format_version || \"0.2.0\";\n      // this.rdf.links = this.rdf.links || [];\n      this.rdf.config = this.rdf.config || {};\n\n      this.rdf.attachments = this.rdf.attachments || {};\n      try {\n        this.rdf.license = this.rdf.license || localStorage.getItem(\"license\");\n        this.rdf.uploaded_by =\n          this.rdf.uploaded_by || localStorage.getItem(\"uploaded_by\");\n        this.rdf.contact_email =\n          this.rdf.contact_email || localStorage.getItem(\"contact_email\");\n      } catch (e) {\n        // eslint-disable-next-line no-empty\n      }\n      // clear license if not valid\n      if (!Object.keys(spdxLicenseList).includes(this.rdf.license))\n        this.rdf.license = null;\n      this.rdf.license = this.rdf.license || \"CC-BY-4.0\";\n      this.jsonFields = this.transformFields([\n        // {\n        //   label: \"Type\",\n        //   type: \"select\",\n        //   placeholder: \"Select resource type\",\n        //   help:\n        //     \"If you want to upload data, choose `dataset`; For uploading tools, choose `application`.\",\n        //   options: [\"dataset\", \"application\"].map(opt => {\n        //     return {\n        //       text: opt,\n        //       value: opt,\n        //       selected: this.rdf.type === opt\n        //     };\n        //   })\n        // },\n        {\n          label: \"Dataset Name\",\n          placeholder: \"dataset name\",\n          value: this.rdf.name,\n          help:\n            \"A human-readable descriptive name for your dataset to be uploaded. You can capitalize and use spaces (instead of underscores) to separate words, for example: `Xenopus NPC exmperiment-1`.\"\n        },\n        {\n          html: `<p class='label'>Samples<span\n        class=\"helpLabel has-text-grey-light is-size-7 is-italic\"\n        style=\"margin-left: .5rem;font-weight: 400;\"\n        >Add samples to the dataset. A dataset contains multiple samples, each sample may contain one or more files for the same field of view, with single or multiple channels/modalities. Click \"NEW SAMPLE\" to add a new sample. If you want to add more channels, widefield, or raw tif stack for each sample, click \"ADD CHANNEL OR MODALITY\". The total file size for one dataset should be less than 50GB, otherwise please split into several datasets. Each sample should contain at lease one supported localization file (.smlm, .csv, .tsv, .xls and .txt), and you can test whether they are supported with the preview button. If you have other localization file format which is not supported yet, please <a href=\"https://www.dropbox.com/request/IyZ7HkzHUpB0t5Mkp46l\" target=\"_blank\">upload a sample file</a>, and <a href=\"https://oeway.typeform.com/to/rdkPmd\" target=\"_blank\">send us a message</a> to describe your file format, we will try to support your file format.</span><sup class='has-text-grey-light is-size-7'> *</sup></p>`\n        },\n        {\n          label: \"Samples\",\n          type: \"file-preview\",\n          showLabel: false,\n          value: this.rdf.attachments.samples,\n          isRequired: true\n        },\n        {\n          label: \"Description\",\n          placeholder: \"description of the dataset\",\n          value: this.rdf.description,\n          help:\n            \"A short description in one sentence. Example: `Nuclear pore protein gp120 in extracted nuclear envelope of Xenopus eggs.`\"\n        },\n        {\n          label: \"Authors\",\n          type: \"author\",\n          value: this.rdf.authors,\n          help: \"The authors who contributed to this dataset\"\n        },\n        {\n          label: \"Uploaded by\",\n          value: this.rdf.uploaded_by,\n          placeholder: \"Full Name\",\n          help: \"The name of person who is uploading this dataset\"\n        },\n        {\n          label: \"Contact Email\",\n          type: \"email\",\n          value: this.rdf.contact_email,\n          help:\n            \"A contact email for anwsering enquiry of the dataset, or potential change request from the admin from ShareLoc team.\"\n        },\n        // {\n        //   label: \"Source\",\n        //   placeholder: \"A doi or URL to the source of the item\",\n        //   isRequired: false,\n        //   value: this.rdf.version\n        // },\n        // {\n        //   label: \"Version\",\n        //   placeholder: \"Version in MAJOR.MINOR.PATCH format(e.g. 0.1.0)\",\n        //   isRequired: false,\n        //   value: this.rdf.version || \"0.1.0\"\n        // },\n        {\n          html: `<p class='label'>License<span\n        class=\"helpLabel has-text-grey-light is-size-7 is-italic\"\n        style=\"margin-left: .5rem;font-weight: 400;\"\n        >Choose the license that fits you most, we recommend to use <a target=\"_blank\" href=\"https://creativecommons.org/licenses/by/4.0/\">CC-BY-4.0</a> (free to share and adapt under the condition of attribution). For other license options, please visit here <a target=\"_blank\" href=\"https://spdx.org/licenses\">https://spdx.org/licenses<a></span><sup class='has-text-grey-light is-size-7'> *</sup></p>`\n        },\n        {\n          label: \"License\",\n          showLabel: false,\n          type: \"select\",\n          placeholder: \"Select your license\",\n          options: Object.keys(spdxLicenseList).map(opt => {\n            return {\n              text: opt,\n              value: opt,\n              selected: this.rdf.license === opt\n            };\n          })\n        },\n        {\n          label: \"Tags\",\n          type: \"tags\",\n          value: this.rdf.tags,\n          placeholder: \"Add a tag and press ENTER to confirm\",\n          options: this.allTags,\n          allow_new: true,\n          // pattern: /^[-0-9a-z+*#;./%@:]*$/,\n          icon: \"label\",\n          help:\n            \"Please use multiple tags to describe imaging modality, cell line, imaged structure(s), fluorophore, labeling strategy, target protein, dimension, camera, buffer, fixation etc. Here are some examples: `dstorm`, `u373`, `microtubules`, `alexa-647`, `secondary-antibody`, `alpha-tubulin`,`2d`,`em-ccd`,`pfa+gluta`, `thunderstorm`. Tag suggestions are obtained from the EBI ontology service (https://www.ebi.ac.uk/ols/), please try to reuse existing ontology terms, and only add new tags if necessary.\",\n          isRequired: true\n        },\n        {\n          label: \"Documentation\",\n          placeholder: \"\",\n          type: \"textarea\",\n          value: this.rdf.config._docstring,\n          help:\n            \"Full documentation in markdown format, covering how the dataset is obtained and link to publications etc.\",\n          isRequired: false\n        },\n        {\n          label: \"Citation\",\n          type: \"citation\",\n          value: this.rdf.cite,\n          placeholder: \"Add a citation\",\n          help: \"Indicate how this dataset should be cited\",\n          isRequired: false\n        },\n        {\n          label: \"Links\",\n          type: \"tags\",\n          value: this.rdf.links,\n          placeholder: \"Add a link (resource item ID)\",\n          options: this.resourceItems.map(item => item.id),\n          allow_new: true,\n          help:\n            \"Optinally, you can link to other uploaded datasets or applications\",\n          icon: \"vector-link\",\n          isRequired: false\n        }\n      ]);\n    }\n  }\n};\n</script>\n<style>\n.dataset {\n  height: 100%;\n}\n.p-1 {\n  padding: 1em;\n}\n.sidebar-page {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  min-height: 100%;\n}\n.sidebar-layout {\n  display: flex;\n  flex-direction: row;\n  min-height: 100%;\n}\n.sidebar-content {\n  height: 100% !important;\n}\n.viewer {\n  width: 100%;\n  height: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadForm.vue?vue&type=template&id=321d1a82&\"\nimport script from \"./UploadForm.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UploadForm.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"upload\">\n    <b-notification\n      v-if=\"client.isSandbox\"\n      type=\"is-warning\"\n      has-icon\n      aria-close-label=\"Close notification\"\n      role=\"alert\"\n    >\n      You are using the SANDBOX mode for testing purposes. This means files will\n      be uploaded to the sandbox version of Zenodo (https://sandbox.zenodo.org)\n      and the uploaded files can be removed from Zenodo at any time without\n      notice. If you are ready to publish your dataset, please\n      <a @click=\"switchToProduction()\">switch to the production mode</a>.\n    </b-notification>\n    <b-notification\n      v-else\n      type=\"is-info\"\n      has-icon\n      aria-close-label=\"Close notification\"\n      role=\"alert\"\n    >\n      You are using the PRODUCTION mode, this means files will be uploaded to\n      Zenodo (https://zenodo.org) and they will be permanently stored. If you\n      want to test the upload feature, please\n      <a @click=\"switchToSandbox()\">switch to the sanbox mode</a>.\n    </b-notification>\n    <b-steps\n      style=\"margin-top: 20px;\"\n      class=\"width-limited\"\n      position=\"left\"\n      :has-navigation=\"false\"\n      v-model=\"stepIndex\"\n      label-position=\"right\"\n    >\n      <b-step-item :disabled=\"rdfYaml\" label=\"Start\" icon=\"file\">\n        <b-button\n          v-if=\"imjoy\"\n          style=\"text-transform:none;\"\n          class=\"button is-fullwidth\"\n          @click=\"gettingStarted\"\n          expanded\n          >New to ShareLoc.XYZ? Watch the Step-by-step Guide</b-button\n        >\n        <br />\n        <b-field\n          v-if=\"!client.credential\"\n          label=\"Please login or sign up to Zenodo.org\"\n          message=\"ShareLoc.XYZ uses https://zenodo.org as storage service, you will need to sign up or login to Zenodo, and allow ShareLoc.XYZ to upload files to zenodo on your behalf.\"\n          expanded\n        >\n          <b-button\n            style=\"text-transform:none;\"\n            class=\"button is-fullwidth is-primary\"\n            @click=\"login()\"\n            expanded\n            icon-left=\"login\"\n            >Login to Zenodo</b-button\n          >\n        </b-field>\n        <b-field\n          v-else\n          label=\"You have already logged in via Zenodo\"\n          message=\"ShareLoc.XYZ uses https://zenodo.org as storage service, you will need to sign up or login to Zenodo, and allow ShareLoc.XYZ to upload files to zenodo on your behalf.\"\n          expanded\n        >\n          <b-button\n            style=\"text-transform:none;\"\n            class=\"button is-small\"\n            @click=\"client.logout()\"\n            icon-left=\"logout\"\n            >Logout</b-button\n          >\n        </b-field>\n        <b-field\n          v-if=\"client.credential\"\n          label=\"Option 1: Create a new deposit\"\n          expanded\n          message=\"With this option, you can upload a dataset or application to ShareLoc (via Zenodo), please make sure you have prepared a set of files. Also note that each dataset can contain files with the total size up to 50GB, if you have more than that, you should either split the files into several deposits or contact Zenodo to increase the quota.\"\n        >\n          <b-button\n            style=\"text-transform:none;\"\n            class=\"button is-fullwidth\"\n            @click=\"startUpload\"\n            expanded\n            :disabled=\"!client.credential\"\n            >Start Upload</b-button\n          >\n        </b-field>\n        <b-field\n          v-if=\"client.credential\"\n          label=\"Option 2: Update an existing deposit\"\n          message=\"With this option, you can update an existing dataset or application. A Zenodo DOI or URL should be provided.\"\n        >\n          <b-input\n            type=\"url\"\n            placeholder=\"Type a DOI or URL here\"\n            v-model=\"URI4Load\"\n          >\n          </b-input>\n        </b-field>\n\n        <b-button\n          v-if=\"client.credential\"\n          style=\"text-transform:none;\"\n          class=\"button is-fullwidth\"\n          @click=\"loadRdfFromURL(URI4Load)\"\n          expanded\n          :disabled=\"!client.credential\"\n          >Load</b-button\n        >\n        <br />\n        <b-notification aria-close-label=\"Close notification\">\n          <h1>\n            You can also create an application card for your software tool!\n          </h1>\n          <p>\n            If you developed a software tool for facilitating data acquisiton or\n            analysis of SMLM data, please consider adding an `application` card\n            to ShareLoc.XYZ so people who used your tool can link their datasets\n            to your tool. You can also make an\n            <a target=\"_blank\" href=\"https://imjoy.io\">ImJoy</a> plugin for your\n            tool so users can directly run it from within ShareLoc. For detailed\n            instructions on how to contribute an application, please\n            <a\n              target=\"_blank\"\n              href=\"https://github.com/imodpasteur/ShareLoc.XYZ/blob/main/docs/contribute-applications.md\"\n              >read here</a\n            >.\n          </p>\n        </b-notification>\n      </b-step-item>\n\n      <b-step-item label=\"Edit\" icon=\"pencil\" :disabled=\"!rdfYaml\">\n        <section v-if=\"stepIndex == 1\">\n          <upload-form @submit=\"submitRDF\" :init-rdf=\"rdf\"></upload-form>\n        </section>\n      </b-step-item>\n\n      <b-step-item label=\"Upload\" icon=\"upload\">\n        <b-field\n          label=\"Upload Summary\"\n          style=\"height: 260px; overflow: auto;\"\n          v-if=\"rdfYaml\"\n        >\n          <markdown\n            v-if=\"rdfYaml\"\n            baseUrl=\"\"\n            :content=\"formatedModelYaml\"\n          ></markdown>\n        </b-field>\n        <b-field\n          v-if=\"editedFiles\"\n          label=\"Files\"\n          message=\"These files will be uploaded or updated\"\n        >\n          <b-taglist attached rounded>\n            <b-tag\n              v-for=\"file in editedFiles\"\n              :key=\"file.sampleName + '/' + file.name\"\n              rounded\n              >{{\n                (file.sampleName ? file.sampleName + \"/\" : \"\") + file.name\n              }}</b-tag\n            >\n          </b-taglist>\n        </b-field>\n        <br />\n        <div v-if=\"similarDeposits && similarDeposits.length > 0\">\n          <label class=\"label\">Similar Existing Items</label>\n          <p>\n            The following published deposit(s) are similar to yours (matched by\n            name), please make sure you are using distinctive names to avoid\n            confusion to the users.\n          </p>\n          <b-notification\n            v-for=\"item in similarDeposits\"\n            :key=\"item.id\"\n            :type=\"item.name === rdf.name ? 'is-danger' : null\"\n            aria-close-label=\"Close notification\"\n          >\n            <h1>\n              <a :href=\"item.config._deposit.links.html\" target=\"_blank\">{{\n                item.name\n              }}</a>\n            </h1>\n            <p>{{ item.description.slice(0, 200) }}</p>\n\n            <p>\n              Authors:\n              {{\n                item.authors &&\n                  item.authors\n                    .map(author => author.name.split(\";\")[0])\n                    .join(\",\")\n              }}\n            </p>\n            <p>Uploaded: {{ item.config._deposit.updated }}</p>\n            <br />\n            <div class=\"columns\">\n              <b-button\n                v-if=\"userId && item.owners && item.owners.includes(userId)\"\n                @click=\"createOrUpdateDeposit(item.config._deposit.id, false)\"\n                class=\"column button is-primary is-light is-fullwidth\"\n                expanded\n                icon-left=\"autorenew\"\n              >\n                <span>Update as a new version</span>\n              </b-button>\n            </div>\n          </b-notification>\n          <b-button\n            style=\"text-transform:none;\"\n            class=\"button is-fullwidth\"\n            @click=\"stepIndex = 1\"\n            expanded\n            :class=\"{\n              'is-primary': sameNameDeposits && sameNameDeposits.length > 0\n            }\"\n            icon-left=\"arrow-left\"\n            >Go back to rename</b-button\n          >\n        </div>\n        <br />\n        <b-field>\n          <b-switch v-model=\"requestedJoinCommunity\">\n            Apply for listing in the\n            <a\n              :href=\"\n                client.baseURL +\n                  '/communities/' +\n                  siteConfig.zenodo_config.community\n              \"\n              target=\"_blank\"\n              >ShareLoc.XYZ community list</a\n            >\n          </b-switch>\n        </b-field>\n        <p v-if=\"uploadStatus\">{{ uploadStatus }}</p>\n        <b-progress\n          v-if=\"uploadProgress\"\n          type=\"is-primary\"\n          :value=\"uploadProgress\"\n          size=\"is-small\"\n          expanded\n        >\n        </b-progress>\n        <div class=\"columns\">\n          <div v-if=\"client && editedFiles\" class=\"column\">\n            <b-button\n              :disabled=\"\n                uploadProgress ||\n                  (sameNameDeposits && sameNameDeposits.length > 0)\n              \"\n              @click=\"createOrUpdateDeposit()\"\n              class=\"button is-primary is-light is-fullwidth\"\n              expanded\n              icon-left=\"plus\"\n            >\n              <span>Upload as new deposit</span>\n            </b-button>\n          </div>\n          <div v-if=\"client && editedFiles && depositId\" class=\"column\">\n            <b-button\n              :disabled=\"uploadProgress\"\n              @click=\"createOrUpdateDeposit(depositId, false)\"\n              class=\"button is-primary is-light is-fullwidth\"\n              expanded\n              icon-left=\"autorenew\"\n            >\n              <span>Add new version to deposit</span>\n            </b-button>\n          </div>\n        </div>\n      </b-step-item>\n      <b-step-item label=\"Publish\" icon=\"share-variant\" disabled>\n        <b-notification\n          v-if=\"publishedUrl\"\n          type=\"is-success\"\n          has-icon\n          aria-close-label=\"Close notification\"\n        >\n          <h1>Published on Zenodo</h1>\n          <h2>DOI: {{ publishedDOI }}</h2>\n          <h2>\n            <a :href=\"publishedUrl\" target=\"_blank\">{{ publishedUrl }}</a>\n          </h2>\n          <p>\n            Note: Newly uploaded item may not appear immediately in the resource\n            list.\n          </p>\n          <p v-if=\"requestedJoinCommunity\">\n            To be listed as part of the verified ShareLoc.XYZ community list, a\n            notification will be sent to the admin team aand we will review\n            request soon.\n          </p>\n        </b-notification>\n        <b-notification\n          v-else-if=\"prereserveDOI\"\n          has-icon\n          aria-close-label=\"Close notification\"\n        >\n          <h1>Ready to publish</h1>\n          <h2>Preserved DOI: {{ prereserveDOI.doi }}</h2>\n          <h2>\n            You can also review and add additional information on Zenodo:\n            <a :href=\"prereserveUrl\" target=\"_blank\">{{ prereserveUrl }}</a>\n          </h2>\n          <p>\n            Note: Please check carefully before publishing. It is generally not\n            possible to remove items after they have been published. Changes\n            will be added as a new version, but will not erase the previous\n            version.\n          </p>\n        </b-notification>\n\n        <b-notification\n          v-if=\"uploadMode === 'update'\"\n          has-icon\n          type=\"is-info\"\n          aria-close-label=\"Close notification\"\n        >\n          <p>\n            Note: After publishing the updated deposit, you may see the item\n            disappear from the website, this is normal because Zenodo need some\n            time to index the new version. It should combe back in a while.\n          </p>\n        </b-notification>\n\n        <b-button\n          v-if=\"client && client.credential && uploaded && !publishedUrl\"\n          @click=\"publishDeposition()\"\n          class=\"button is-primary is-fullwidth\"\n          expanded\n        >\n          <b-icon icon=\"upload\"></b-icon>\n          <span>Publish</span>\n        </b-button>\n      </b-step-item>\n    </b-steps>\n\n    <section style=\"padding: 10px;\"></section>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport yaml from \"js-yaml\";\n\nimport {\n  rdfToMetadata,\n  resolveDOI,\n  getFullRdfFromDeposit,\n  fetchFile,\n  depositionToRdf\n} from \"../utils\";\nimport Markdown from \"@/components/Markdown.vue\";\nimport TagInputField from \"@/components/TagInputField.vue\";\nimport DropFilesField from \"@/components/DropFilesField.vue\";\nimport UploadForm from \"./UploadForm.vue\";\nimport doiRegex from \"doi-regex\";\nimport marked from \"marked\";\nimport DOMPurify from \"dompurify\";\n\nexport default {\n  name: \"upload\",\n  props: [\"updateDepositId\"],\n  components: {\n    markdown: Markdown,\n    // eslint-disable-next-line vue/no-unused-components\n    TagInputField,\n    // eslint-disable-next-line vue/no-unused-components\n    DropFilesField,\n    UploadForm\n  },\n  mounted() {\n    this.dropFiles = null;\n    this.uploadStatus = \"\";\n    this.uploadProgress = 0;\n    if (!this.loadedUrl) {\n      const repo = this.siteConfig.rdf_root_repo;\n      let manifest_url = this.siteConfig.manifest_url;\n      this.$store.dispatch(\"fetchResourceItems\", {\n        repo,\n        manifest_url\n      });\n    }\n    if (this.updateDepositId === \"bookmarks\") {\n      this.imjoyReady.then(imjoy => {\n        this.startFromBookmarks(imjoy).catch(e => {\n          alert(`Failed to load from deposit URL: ${e}`);\n        });\n      });\n    } else if (this.updateDepositId) {\n      this.startFromDepositURL().catch(e => {\n        alert(`Failed to load from deposit URL: ${e}`);\n      });\n    }\n  },\n  computed: {\n    sameNameDeposits() {\n      return (\n        this.similarDeposits &&\n        this.similarDeposits.filter(item => item.name === this.rdf.name)\n      );\n    },\n    formatedModelYaml() {\n      return this.rdfYaml && \"```yaml\\n\" + this.rdfYaml + \"\\n```\\n\";\n    },\n    prereserveUrl() {\n      if (this.prereserveDOI) {\n        return `${this.$store.state.zenodoBaseURL}/deposit/${this.prereserveDOI.recid}`;\n      } else {\n        return null;\n      }\n    },\n    userId() {\n      return this.client && this.client.getUserId();\n    },\n    ...mapState({\n      imjoyReady: state => state.imjoyReady,\n      imjoy: state => state.imjoy,\n      siteConfig: state => state.siteConfig,\n      loadedUrl: state => state.loadedUrl,\n      resourceItems: state => state.resourceItems,\n      client: state => state.zenodoClient,\n      zenodoBaseURL: state => state.zenodoBaseURL,\n      bookmarks: state => state.bookmarks\n    })\n  },\n  data() {\n    return {\n      // rdfFiles: null,\n      dropFiles: null,\n      uploadProgress: 0,\n      uploadStatus: \"\",\n      uploaded: false,\n      jsonFields: null,\n      rdfYaml: null,\n      rdf: null,\n      stepIndex: 0,\n      publishedUrl: null,\n      publishedDOI: null,\n      requestedJoinCommunity: true,\n      rdfType: \"model\",\n      editedFiles: null,\n      prereserveDOI: null,\n      URI4Load: null,\n      similarDeposits: null,\n      depositId: null,\n      uploadMode: null\n    };\n  },\n  methods: {\n    switchToSandbox() {\n      const query = Object.assign({}, this.$route.query);\n      query.sandbox = 1;\n      delete query.production;\n      this.$router.replace({ query: query });\n      this.$router.go(this.$router.currentRoute);\n    },\n    switchToProduction() {\n      const query = Object.assign({}, this.$route.query);\n      query.production = 1;\n      delete query.sandbox;\n      this.$router.replace({ query: query });\n      this.$router.go(this.$router.currentRoute);\n    },\n    async gettingStarted() {\n      await this.imjoy.api.showDialog({\n        src:\n          \"https://slides.imjoy.io/?slides=https://raw.githubusercontent.com/imodpasteur/ShareLoc.XYZ/main/docs/how-to-upload-slides.md\",\n        passive: true,\n        name: \"Getting Started\",\n        fullscreen: true\n      });\n    },\n    async startFromBookmarks(imjoy) {\n      this.rdf = (await this.generateYamlFile(this.bookmarks[0])).rdf;\n      let samples = [];\n      for (let item of this.bookmarks) {\n        if (item?.attachments?.samples) {\n          samples = samples.concat(item.attachments.samples);\n        }\n        // add all the tags\n        item.tags.forEach(tag => {\n          if (!this.rdf.tags.includes(tag)) this.rdf.tags.push(tag);\n        });\n        if (item.download_url) {\n          const filename = item.download_url\n            .split(\"?\")[0]\n            .split(\"/\")\n            .pop();\n          samples.push({\n            name: item.name,\n            files: [\n              {\n                type: \"generator\",\n                async generate() {\n                  const file = await fetchFile(\n                    item.download_url,\n                    filename,\n                    msg => {\n                      imjoy.api.showMessage(msg);\n                    }\n                  );\n                  file.originalName = file.name;\n                  file.converted = [file];\n                  file.sampleName = item.name;\n                  return file;\n                },\n                size: item.size,\n                sampleName: item.name,\n                name: filename,\n                url: item.download_url\n              }\n            ],\n            views: item.covers.map(cover => {\n              return {\n                image: cover,\n                image_name: cover\n                  .split(\"?\")[0]\n                  .split(\"/\")\n                  .pop()\n              };\n            })\n          });\n        }\n      }\n      this.rdf.attachments = this.rdf.attachments || {};\n      this.rdf.attachments.samples = samples;\n      this.stepIndex = 1;\n    },\n    async startFromDepositURL() {\n      const loadingComponent = this.$buefy.loading.open({\n        container: this.$el\n      });\n      try {\n        if (!this.client.credential) await this.login();\n        this.URI4Load = `${this.zenodoBaseURL}/record/${this.updateDepositId}`;\n        await this.loadRdfFromURL(this.URI4Load);\n      } catch (e) {\n        alert(\"Failed to load resource: \" + this.updateDepositId);\n      } finally {\n        loadingComponent.close();\n      }\n    },\n    startUpload() {\n      this.rdf = {};\n      // this.rdfFiles = [];\n      this.stepIndex = 1;\n    },\n    submitRDF(rdf) {\n      this.$nextTick(async () => {\n        this.rdfYaml = (await this.generateYamlFile(rdf)).text;\n        this.editedFiles = rdf.config._files;\n        delete rdf.config._files;\n        this.rdf = rdf;\n\n        this.similarDeposits = await this.client.getResourceItems({\n          community: this.siteConfig.zenodo_config.community,\n          sort: \"bestmatch\",\n          query: rdf.name\n        });\n        console.log(\"Similar deposits:\", this.similarDeposits);\n        // if there is any similar items, we can try to login first\n        if (this.similarDeposits.length > 0)\n          await this.client.getCredential(true);\n\n        this.stepIndex = 2;\n        this.$forceUpdate();\n      });\n    },\n    async loadRdfFromURL(url) {\n      try {\n        const doiURLRegex = doiRegex.resolvePath();\n        if (doiURLRegex.test(url)) {\n          url = await resolveDOI(url.match(doiURLRegex)[4]);\n        } else if (doiRegex().test(url)) {\n          url = await resolveDOI(url);\n        }\n        const zenodoRegex = /zenodo.org\\/(record|deposit)\\/([0-9]+)/;\n        const m = zenodoRegex.exec(url);\n        if (m) {\n          this.depositId = parseInt(m[2]);\n          let depositionInfo;\n          if (url.includes(\"/record/\"))\n            depositionInfo = await this.client.getDeposit(this.depositId);\n          else {\n            await this.client.getCredential(true);\n            depositionInfo = await this.client.retrieve(this.depositId);\n          }\n          console.log(\"orcid matched: \" + this.depositId, depositionInfo);\n          const rdf = depositionToRdf(depositionInfo);\n          this.rdf = await getFullRdfFromDeposit(rdf);\n          console.log(\"Full RDF:\", this.rdf);\n          // this.files = depositionInfo.files.map(item => {\n          //   return {\n          //     type: \"remote\",\n          //     name: item.filename || item.key, // depending on what api we use, it may be in two different format\n          //     size: item.filesize || item.size,\n          //     url: item.links.self,\n          //     checksum: item.checksum\n          //   };\n          // });\n          // load files\n          // this.rdfFiles = depositionInfo.files.map(item => {\n          //   return {\n          //     type: \"remote\",\n          //     name: item.filename || item.key, // depending on what api we use, it may be in two different format\n          //     size: item.filesize || item.size,\n          //     url: item.links.self,\n          //     checksum: item.checksum\n          //   };\n          // });\n          if (this.rdf.documentation) {\n            const baseUrl = depositionInfo.links.bucket + \"/\";\n            const docsUrl = this.rdf.documentation.startsWith(\"http\")\n              ? this.rdf.documentation\n              : new URL(this.rdf.documentation, baseUrl).href;\n            const response = await fetch(docsUrl);\n            this.rdf.config._docstring = await response.text();\n          }\n          this.stepIndex = 1;\n        } else {\n          alert(`Failed to parse RDF URL: ${url}`);\n        }\n      } catch (e) {\n        console.error(e);\n        alert(`Failed to fetch RDF from ${url}, error: ${e}`);\n      }\n    },\n\n    async publishDeposition() {\n      const loadingComponent = this.$buefy.loading.open({\n        container: this.$el\n      });\n      try {\n        const result = await this.client.publish(this.depositId);\n        console.log(\"Published\", result);\n        this.publishedDOI = result.doi;\n        this.publishedUrl = `${this.$store.state.zenodoBaseURL}/record/${this.depositId}`;\n      } catch (e) {\n        console.error(e);\n        alert(`Failed to publish: ${e}`);\n      } finally {\n        loadingComponent.close();\n      }\n    },\n    async login() {\n      try {\n        await this.client.getCredential(true);\n        this.$forceUpdate();\n      } catch (e) {\n        alert(`Failed to login: ${e}`);\n      }\n    },\n    async generateYamlFile(rdf) {\n      const rdfCopy = Object.assign({}, rdf);\n      // TODO: is there any field in the config we want to preserve?\n      delete rdfCopy.config;\n      let rdfYaml = yaml.dump(rdfCopy);\n      rdfYaml = yaml.load(rdfYaml);\n      if (rdfYaml?.attachments?.samples)\n        rdfYaml.attachments.samples.forEach(sample => {\n          sample.views.forEach(screenshot => {\n            delete screenshot.image;\n          });\n        });\n      rdfYaml = yaml.dump(rdfYaml);\n      const blob = new Blob([rdfYaml], {\n        type: \"application/yaml\"\n      });\n      const file = new File([blob], \"rdf.yaml\", { type: \"application/yaml\" });\n      file.text = rdfYaml;\n      file.rdf = rdfCopy;\n      return file;\n    },\n    async createOrUpdateDeposit(depositId, skipUpload) {\n      try {\n        await this.client.getCredential(true, 40); // make sure we have at least 40 minutes\n        this.$forceUpdate();\n      } catch (e) {\n        alert(`Failed to login: ${e}`);\n        return;\n      }\n      const loadingComponent = this.$buefy.loading.open({\n        container: this.$el\n      });\n      this.similarDeposits = null;\n      try {\n        this.uploadProgress = 1;\n        let depositionInfo;\n        this.uploadMode = \"new\";\n        if (depositId) {\n          try {\n            depositionInfo = await this.client.retrieve(depositId);\n\n            // enter edit mode if submitted\n            // if deposit.state == 'inprogress', the metadata can be updated\n            // if deposit.submitted == false files can be updated as well.\n            if (!skipUpload) {\n              // The response body of this action is NOT the new version deposit, but the original resource.\n              // The new version deposition can be accessed through the \"latest_draft\" under \"links\" in the response body.\n              const deposit = await this.client.createNewVersion(\n                depositionInfo\n              );\n              // e.g. https://sandbox.zenodo.org/api/deposit/depositions/868929\n              const tmp = deposit.links.latest_draft.split(\"/\");\n              depositId = parseInt(tmp[tmp.length - 1]);\n              depositionInfo = await this.client.retrieve(depositId);\n            }\n            if (\n              depositionInfo.state !== \"inprogress\" &&\n              depositionInfo.state !== \"unsubmitted\"\n            )\n              await this.client.edit(depositId);\n            this.uploadMode = \"new\";\n          } catch (e) {\n            console.error(e);\n            if (\n              !confirm(\n                `Failed to retrieve existing deposit (id: ${depositId}), would you like to create a new deposit instead?`\n              )\n            ) {\n              return;\n            }\n          }\n        } else depositionInfo = await this.client.createDeposition();\n\n        this.depositId = depositionInfo.id;\n        const baseUrl = `${this.client.baseURL}/record/${this.depositId}/files/`; //\"file:///\"; //depositionInfo.links.bucket + \"/\";\n\n        let docstring = null;\n        if (\n          this.rdf.documentation &&\n          !this.rdf.documentation.startsWith(\"http\") &&\n          this.rdf.documentation.endsWith(\".md\")\n        ) {\n          const file = this.editedFiles.filter(\n            fn => fn === this.rdf.documentation.replace(\"./\", \"\")\n          )[0];\n          if (file) {\n            docstring = await file.async(\"string\"); // get markdown\n            docstring = DOMPurify.sanitize(marked(docstring));\n          }\n        }\n        this.rdf.config = this.rdf.config || {};\n        this.rdf.config._deposit = depositionInfo;\n\n        const metadata = rdfToMetadata(this.rdf, baseUrl, docstring);\n        // this will send a email request to the admin of bioimgae-io team\n        if (this.requestedJoinCommunity) {\n          metadata.communities.push({\n            identifier: this.siteConfig.zenodo_config.community\n          });\n        }\n        metadata.prereserve_doi = true; // we will generate the doi and store it in the model yaml file\n        depositionInfo = await this.client.updateMetadata(\n          depositionInfo,\n          metadata\n        );\n\n        // transform the RDF here\n        this.prereserveDOI = depositionInfo.metadata.prereserve_doi;\n        this.rdf.id = this.prereserveDOI.doi; //doi and recid\n        this.rdf.config._doi = depositionInfo.metadata.prereserve_doi.doi;\n        // concept doi can be undefined for new deposition\n        this.rdf.config._conceptdoi = depositionInfo.conceptdoi;\n        if (skipUpload) {\n          this.stepIndex = 3;\n          return depositionInfo;\n        }\n        console.log(\"Edited files\", this.editedFiles);\n        const uploadFiles = this.editedFiles.filter(\n          file => file.type !== \"remote\"\n        );\n        // sort the files so we will upload the covers in the end\n        // this allows zenodo to display it as preview\n        if (this.rdf.covers && this.rdf.covers.length > 0) {\n          const covers = this.rdf.covers;\n          uploadFiles.sort((a, b) => {\n            if (\n              covers.includes(\"./\" + a.name) &&\n              !covers.includes(\"./\" + b.name)\n            )\n              return 1;\n            else if (\n              !covers.includes(\"./\" + a.name) &&\n              covers.includes(\"./\" + b.name)\n            )\n              return -1;\n            else return 0;\n          });\n        }\n        for (let i = 0; i < uploadFiles.length; i++) {\n          let file = uploadFiles[i];\n          if (file.type === \"generator\") {\n            // assuming we already have the generated name fixed\n            file = await file.generate();\n            if (file.sampleName) {\n              // fix the converted file name and size in the attachments\n              const sample = this.rdf.attachments.samples.find(\n                sample => sample.name === file.sampleName\n              );\n              // set the converted size\n              const f = sample.files.find(f => f.name === file.name);\n              if (f) f.size = file.size;\n            }\n          }\n\n          const newName = file.sampleName\n            ? file.sampleName + \"/\" + file.name\n            : file.name;\n          await this.client.uploadFile(depositionInfo, file, newName, size => {\n            this.uploadProgress = Math.round((size / file.size) * 100);\n            this.uploadStatus = `Uploading ${i + 1}/${uploadFiles.length}(${\n              this.uploadProgress\n            }%): ${file.name.slice(0, 40)}... `;\n            this.$forceUpdate();\n          });\n        }\n\n        // upload RDF file\n        const rdfFile = await this.generateYamlFile(this.rdf);\n        await this.client.uploadFile(depositionInfo, rdfFile);\n        this.rdfYaml = rdfFile.text;\n\n        this.uploadProgress = 0;\n        this.uploadStatus = `Successfully uploaded ${uploadFiles.length} files.`;\n        this.uploaded = true;\n        this.stepIndex = 3;\n      } catch (e) {\n        console.error(e);\n        alert(`Oops, failed to upload file: ${e}`);\n      } finally {\n        this.uploadProgress = 0;\n        loadingComponent.close();\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n.upload {\n  padding: 10px;\n  width: 100%;\n  overflow: auto;\n  display: block;\n}\n.width-limited {\n  max-width: 1080px;\n  margin-left: auto !important;\n  margin-right: auto !important;\n  float: none !important;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Upload.vue?vue&type=template&id=7946b1f4&scoped=true&\"\nimport script from \"./Upload.vue?vue&type=script&lang=js&\"\nexport * from \"./Upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Upload.vue?vue&type=style&index=0&id=7946b1f4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7946b1f4\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"home\">\n    <section\n      class=\"hero is-link is-fullheight is-fullheight-with-navbar\"\n      style=\"max-height: 1024px!important;min-height:380px;background-image:url(/static/img/bg.jpg)\"\n    >\n      <b-notification\n        v-if=\"zenodoClient.isSandbox\"\n        type=\"is-warning\"\n        has-icon\n        aria-close-label=\"Close notification\"\n        role=\"alert\"\n      >\n        You are using the SANDBOX mode for testing purposes. You can also\n        <a @click=\"switchToProduction()\">switch to the production mode</a>.\n      </b-notification>\n      <b-notification\n        v-else-if=\"siteConfig.zenodo_config.use_sandbox\"\n        type=\"is-info\"\n        has-icon\n        aria-close-label=\"Close notification\"\n        role=\"alert\"\n      >\n        You are using the PRODUCTION mode, if you want to test the website\n        features, please\n        <a @click=\"switchToSandbox()\">switch to the sanbox mode</a>.\n      </b-notification>\n      <div class=\"hero-body\" style=\"position: relative;\">\n        <img\n          class=\"background-img\"\n          v-if=\"selectedPartner\"\n          :src=\"selectedPartner.background_image\"\n        />\n        <img class=\"background-img\" v-else :src=\"siteConfig.background_image\" />\n\n        <div class=\"container\" v-if=\"selectedPartner\">\n          <h1 class=\"title is-1\">\n            {{ selectedPartner.splash_title }}\n          </h1>\n          <h2 class=\"subtitle is-3\">\n            {{ selectedPartner.splash_subtitle }}\n          </h2>\n          <ul class=\"feature-list\" v-if=\"selectedPartner.splash_feature_list\">\n            <li\n              v-for=\"feature in selectedPartner.splash_feature_list\"\n              :key=\"feature\"\n            >\n              {{ feature }}\n            </li>\n          </ul>\n          <br />\n          <b-button\n            v-if=\"selectedPartner.about_url\"\n            rounded\n            style=\"text-transform:none;\"\n            @click=\"showAboutPartner(selectedPartner)\"\n          >\n            <span class=\"explore-btn\">About</span></b-button\n          >\n          &nbsp;\n          <!-- <b-button rounded style=\"text-transform:none;\" @click=\"enter\">\n            <span class=\"explore-btn\">{{\n              selectedPartner.explore_button_text\n            }}</span></b-button\n          > -->\n        </div>\n\n        <div class=\"container\" v-else>\n          <h1 class=\"title is-1\">\n            {{ siteConfig.splash_title }}\n          </h1>\n          <h2 class=\"subtitle is-3\">\n            {{ siteConfig.splash_subtitle }}\n          </h2>\n          <ul class=\"feature-list\" v-if=\"siteConfig.splash_feature_list\">\n            <li\n              v-for=\"feature in siteConfig.splash_feature_list\"\n              :key=\"feature\"\n            >\n              {{ feature }}\n            </li>\n          </ul>\n          <br />\n          <!-- <b-button rounded style=\"text-transform:none;\" @click=\"enter\">\n            <span class=\"explore-btn\">{{\n              siteConfig.explore_button_text\n            }}</span></b-button\n          > -->\n        </div>\n      </div>\n    </section>\n    <br />\n    <section style=\"margin-top: -30px;opacity: 0.6;\">\n      <b-progress :value=\"progress\"></b-progress>\n    </section>\n    <br />\n    <span ref=\"search_anchor\"></span>\n    <div\n      class=\"container\"\n      v-if=\"resourceCategories.length > 1\"\n      style=\"text-align:center;\"\n    >\n      <b-tooltip label=\"List all items\" position=\"is-bottom\">\n        <div\n          class=\"item-lists is-link\"\n          style=\"width:30px; margin-left: -16px;border-bottom-color: gray;\"\n          @click=\"\n            selectedCategory = null;\n            updateQueryTags();\n          \"\n          :class=\"{ active: !selectedCategory }\"\n        >\n          All\n        </div>\n      </b-tooltip>\n      <b-tooltip\n        v-for=\"list in resourceCategories\"\n        :key=\"list.name\"\n        :label=\"list.description\"\n        position=\"is-bottom\"\n      >\n        <div\n          class=\"item-lists is-link\"\n          @click=\"\n            selectedCategory = list;\n            updateQueryTags();\n          \"\n          :style=\"{ 'border-bottom-color': list.outline_color }\"\n          :class=\"{ active: selectedCategory === list }\"\n        >\n          {{ list.name }}\n        </div>\n      </b-tooltip>\n    </div>\n    <resource-item-selector\n      @selection-changed=\"updateResourceItemList\"\n      :allItems=\"resourceItems\"\n      :tagCategories=\"tagCategories\"\n      :type=\"selectedCategory && selectedCategory.type\"\n      :showDisplayMode=\"screenWidth > 700\"\n      @display-mode-change=\"displayModeChanged\"\n      :searchTags=\"searchTags\"\n      @tags-updated=\"updateQueryTags\"\n      @input-change=\"removePartner\"\n    ></resource-item-selector>\n\n    <br />\n    <resource-item-list\n      @show-resource-item-info=\"showResourceItemInfo\"\n      @select-tag=\"searchTags = [$event]\"\n      v-if=\"selectedItems\"\n      :allItems=\"selectedItems\"\n      :displayMode=\"screenWidth > 700 ? displayMode : 'card'\"\n    />\n    <br />\n\n    <footer class=\"footer\">\n      <div class=\"columns is-mobile is-centered\" v-if=\"siteConfig.footer\">\n        <div\n          v-for=\"item in siteConfig.footer\"\n          :key=\"item.label\"\n          class=\"column is-one-quarter\"\n          style=\"text-align: center\"\n        >\n          <b-tooltip :label=\"item.tooltip\" position=\"is-top\"\n            ><a :href=\"item.url\" target=\"_blank\">\n              <figure>\n                <img :src=\"item.logo\" style=\"max-height: 55px;\" />\n                <figcaption class=\"hide-on-small-screen\">\n                  {{ item.label }}\n                </figcaption>\n              </figure>\n            </a>\n          </b-tooltip>\n        </div>\n      </div>\n      <div style=\"text-align: center\" v-if=\"siteConfig.footnote\">\n        <p>{{ siteConfig.footnote }}</p>\n      </div>\n    </footer>\n    <modal\n      name=\"window-modal-dialog\"\n      :resizable=\"!dialogWindowConfig.fullscreen\"\n      :width=\"dialogWindowConfig.width\"\n      height=\"auto\"\n      :adaptive_size=\"dialogWindowConfig.adaptive_size\"\n      :minWidth=\"200\"\n      :minHeight=\"150\"\n      :fullscreen=\"dialogWindowConfig.fullscreen\"\n      style=\"max-width: 100%; max-height:100%;z-index: 9999;\"\n      draggable=\".drag-handle\"\n      :scrollable=\"true\"\n    >\n      <div\n        v-if=\"selectedDialogWindow\"\n        @dblclick=\"maximizeDialogWindow()\"\n        :class=\"{ 'drag-handle': !isTouchDevice }\"\n        class=\"dialog-header\"\n      >\n        <div style=\"position: absolute; left:2px; margin-top: -1px;\">\n          <button\n            @click=\"closeDialogWindow(selectedDialogWindow)\"\n            class=\"noselect dialog-control-button\"\n            style=\"background:#ff0000c4;\"\n          >\n            x\n          </button>\n          <button\n            v-if=\"screenWidth > 700\"\n            @click=\"minimizeDialogWindow()\"\n            class=\"noselect dialog-control-button\"\n            style=\"background:#00cdff61;\"\n          >\n            -\n          </button>\n          <button\n            v-if=\"screenWidth > 700\"\n            @click=\"maximizeDialogWindow()\"\n            class=\"noselect dialog-control-button\"\n            style=\"background:#00cdff61;\"\n          >\n            {{ dialogWindowConfig.fullscreen ? \"=\" : \"+\" }}\n          </button>\n        </div>\n        <span class=\"noselect dialog-title\">\n          {{ selectedDialogWindow.name }}</span\n        >\n\n        <b-dropdown\n          aria-role=\"list\"\n          style=\"position:absolute;right:1px;\"\n          position=\"is-bottom-left\"\n        >\n          <button\n            class=\"button\"\n            style=\"background: rgba(0, 205, 255, 0.38);color:white;width:34px;\"\n            slot=\"trigger\"\n          >\n            <b-icon icon=\"dots-horizontal\"></b-icon>\n          </button>\n\n          <b-dropdown-item\n            aria-role=\"listitem\"\n            v-for=\"w in dialogWindows\"\n            @click=\"selectWindow(w)\"\n            :key=\"w.id\"\n            >{{ w.name }}</b-dropdown-item\n          >\n        </b-dropdown>\n      </div>\n      <template v-for=\"wdialog in dialogWindows\">\n        <div\n          :key=\"wdialog.window_id\"\n          v-show=\"wdialog === selectedDialogWindow\"\n          style=\"height: calc(100% - 40px);overflow:auto;\"\n        >\n          <div\n            :id=\"wdialog.window_id\"\n            class=\"noselect\"\n            style=\"width: 100%;height: 100%;\"\n          ></div>\n        </div>\n      </template>\n    </modal>\n    <modal\n      name=\"info-dialog\"\n      :resizable=\"true\"\n      :minWidth=\"200\"\n      :minHeight=\"150\"\n      height=\"auto\"\n      :width=\"800\"\n      style=\"max-width:100%;max-height:100%;\"\n      :fullscreen=\"infoDialogFullscreen\"\n      draggable=\".drag-handle\"\n      :scrollable=\"true\"\n    >\n      <div\n        @dblclick=\"maximizeInfoWindow()\"\n        :class=\"{ 'drag-handle': !isTouchDevice }\"\n        class=\"dialog-header\"\n      >\n        <div style=\"position: absolute; left:2px; margin-top: -1px;\">\n          <button\n            @click=\"closeInfoWindow()\"\n            class=\"noselect dialog-control-button\"\n            style=\"background:#ff0000c4;\"\n          >\n            x\n          </button>\n          <button\n            v-if=\"screenWidth > 700\"\n            @click=\"maximizeInfoWindow()\"\n            class=\"noselect dialog-control-button\"\n            style=\"background:#00cdff61;\"\n          >\n            {{ infoDialogFullscreen ? \"=\" : \"+\" }}\n          </button>\n        </div>\n        <span class=\"noselect dialog-title\"> {{ infoDialogTitle }}</span>\n      </div>\n      <div class=\"modal-dialog-content\">\n        <about\n          v-if=\"showInfoDialogMode === 'about'\"\n          @contribute=\"showUploadDialog\"\n        ></about>\n        <upload\n          v-else-if=\"showInfoDialogMode === 'upload'\"\n          :site-config=\"siteConfig\"\n          :deposition-id=\"null\"\n        ></upload>\n        <iframe\n          v-else-if=\"showInfoDialogMode === 'viewer'\"\n          style=\"padding-bottom: 64px;width: 100%;\n    height: 100%;\"\n          :src=\"viewerUrl\"\n          width=\"640\"\n          height=\"852\"\n          frameborder=\"0\"\n          marginheight=\"0\"\n          marginwidth=\"0\"\n          >Loading</iframe\n        >\n        <div v-else-if=\"showInfoDialogMode === 'edit'\">\n          <upload\n            :site-config=\"siteConfig\"\n            :deposition-id=\"currentDepositionId\"\n          ></upload>\n        </div>\n        <div\n          class=\"markdown-container\"\n          v-else-if=\"showInfoDialogMode === 'markdown'\"\n        >\n          <markdown\n            :content=\"infoMarkdownContent\"\n            :url=\"infoMarkdownUrl\"\n          ></markdown>\n          <!-- <comment-box\n          v-if=\"infoCommentBoxTitle\"\n          :title=\"infoCommentBoxTitle\"\n        ></comment-box> -->\n        </div>\n        <div\n          class=\"markdown-container\"\n          v-else-if=\"\n            showInfoDialogMode === 'attachments' && selectedResourceItem\n          \"\n        >\n          <attachments\n            :attachments=\"selectedResourceItem.attachments\"\n            :focusTarget=\"selectedResourceItem._focus\"\n          ></attachments>\n        </div>\n\n        <iframe\n          v-else-if=\"showInfoDialogMode === 'subscribe'\"\n          style=\"padding-bottom: 64px;width: 100%;\n    height: 100%;\"\n          :src=\"siteConfig.subscribe_url\"\n          width=\"640\"\n          height=\"852\"\n          frameborder=\"0\"\n          marginheight=\"0\"\n          marginwidth=\"0\"\n          >Loading</iframe\n        >\n        <resource-item-info\n          v-else-if=\"showInfoDialogMode === 'item' && selectedResourceItem\"\n          :resource-id=\"selectedResourceItem.id\"\n        ></resource-item-info>\n      </div>\n    </modal>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport ResourceItemSelector from \"@/components/ResourceItemSelector.vue\";\nimport ResourceItemList from \"@/components/ResourceItemList.vue\";\nimport ResourceItemInfo from \"@/components/ResourceItemInfo.vue\";\nimport Upload from \"@/components/Upload.vue\";\nimport Attachments from \"@/components/Attachments.vue\";\n// import CommentBox from \"@/components/CommentBox.vue\";\nimport About from \"@/views/About.vue\";\nimport Markdown from \"@/components/Markdown.vue\";\nimport { getFullRdfFromDeposit } from \"../utils\";\n\nconst DEFAULT_ICONS = {\n  notebook: \"notebook-outline\",\n  dataset: \"database\",\n  application: \"puzzle\",\n  model: \"hubspot\"\n};\nimport { runAppForItem, runAppForAllItems } from \"../bioEngine\";\nimport { debounce } from \"../utils\";\n\nfunction titleCase(str) {\n  return str.replace(/_/g, \" \").replace(/(^|\\s)\\S/g, function(t) {\n    return t.toUpperCase();\n  });\n}\n\nconst isTouchDevice = (function() {\n  try {\n    document.createEvent(\"TouchEvent\");\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\nasync function updateFullRDF(item) {\n  if (item.rdf_source) {\n    const newRDF = await getFullRdfFromDeposit(item, true);\n    for (let k of Object.keys(newRDF)) {\n      if (k !== \"config\") {\n        item[k] = newRDF[k];\n      }\n    }\n  }\n}\n\nfunction connectApps(self, item) {\n  if (item.config && item.config._linked) return;\n  item.config = item.config || {};\n  item.apps = item.apps || [];\n  item.apps.unshift({\n    name: \"Share\",\n    icon: \"share-variant\",\n    show_on_hover: true,\n    run() {\n      const query = Object.assign({}, self.$route.query);\n      query.id = item.id;\n      self.$router.replace({ query: query }).catch(() => {});\n      self.$buefy.dialog.alert({\n        title: \"Sharing \" + item.type,\n        hasIcon: true,\n        icon: \"share\",\n        message: `Here is the URL for sharing ${item.name}: <br> <code>${window.location.href}</code>`,\n        confirmText: \"OK\"\n      });\n    }\n  });\n\n  if (item.source && item.source.startsWith(\"http\"))\n    item.apps.unshift({\n      name: \"Source\",\n      icon: \"code-tags\",\n      show_on_hover: true,\n      run() {\n        self.showSource(item);\n      }\n    });\n\n  item.apps.unshift({\n    name: \"Add bookmark\",\n    icon: \"bookmark-plus\",\n    show_on_hover: true,\n    run() {\n      self.$store.commit(\"addBookmark\", item);\n      self.showMessage(item.name + \" added to the bookmarks!\");\n    }\n  });\n\n  if (item.type === \"application\") {\n    if (self.allApps[item.id]) {\n      item.apps.unshift({\n        name: \"Run\",\n        icon: \"play\",\n        run() {\n          runAppForAllItems(self, self.allApps[item.id], self.resourceItems);\n        }\n      });\n    } else if (item.tags.includes(\"colab\") && item.source.endsWith(\".ipynb\")) {\n      // convert github raw url to colab url\n      item.config = item.config || {};\n\n      if (item.source.startsWith(\"https://raw.githubusercontent.com/\")) {\n        const b = item.source.split(\"/\");\n        item.config._colab_url = `https://colab.research.google.com/github/${\n          b[3]\n        }/${b[4]}/blob/${b[5]}/${b.slice(6).join(\"/\")}`;\n        item.apps.unshift({\n          name: \"Run\",\n          icon: \"play\",\n          run() {\n            window.open(item.config._colab_url);\n          }\n        });\n      } else {\n        console.warn(\n          \"Invalid colab source URL: \" +\n            item.source +\n            \" (the URL must be a raw github URL starts with https://raw.githubusercontent.com/)\"\n        );\n      }\n    }\n  }\n\n  if (item.links) {\n    item.links = [...new Set(item.links)];\n    for (let link_key of item.links) {\n      const linked = self.resourceItems.filter(item => item.id === link_key);\n      for (let lit of linked) {\n        item.apps.unshift({\n          name: lit.name,\n          icon: lit.icon || DEFAULT_ICONS[lit.type],\n          async run() {\n            if (self.allApps[link_key]) {\n              await updateFullRDF(item);\n              runAppForItem(self, self.allApps[link_key], item);\n            } else self.showResourceItemInfo(lit);\n          }\n        });\n      }\n    }\n  }\n\n  if (item.owners) {\n    if (item.owners.includes(self.userId)) {\n      item.apps.unshift({\n        name: \"Edit\",\n        icon: \"pencil\",\n        show_on_hover: false,\n        run() {\n          self.$router.push({\n            name: \"Update\",\n            params: { updateDepositId: item.id }\n          });\n        }\n      });\n    }\n  }\n\n  const linkedItems = self.resourceItems.filter(\n    m => m.links && m.links.includes(item.id)\n  );\n  for (let it of linkedItems) {\n    if (item.attachments[it.type]) item.attachments[it.type].push(it);\n    else item.attachments[it.type] = [it];\n  }\n\n  // for (let att_name of Object.keys(item.attachments)) {\n  //   if (Array.isArray(item.attachments[att_name]) && att_name !== \"files\") {\n  //     item.badges.unshift({\n  //       label: att_name,\n  //       label_type: \"is-dark\",\n  //       ext: item.attachments[att_name].length,\n  //       ext_type: \"is-primary\",\n  //       run() {\n  //         self.showAttachmentsDialog(item, att_name);\n  //       }\n  //     });\n  //   }\n  // }\n\n  if (item.stats && item.stats.downloads !== undefined)\n    item.badges.unshift({\n      label: \"downloads\",\n      label_type: \"is-dark\",\n      ext: item.stats.downloads,\n      run() {\n        self.showStatsDialog(item);\n      }\n    });\n\n  if (item.doi) {\n    item.badges.unshift({\n      label: item.doi,\n      label_type: \"is-dark\",\n      label_short: self.zenodoClient.isSandbox ? \"Zenodo\" : \"DOI\",\n      url: self.zenodoClient.isSandbox\n        ? `https://sandbox.zenodo.org/record/${item.id}`\n        : `https://doi.org/${item.doi}`\n    });\n  }\n  item.config._linked = true;\n}\n\nexport default {\n  name: \"Home\",\n  props: [\"resourceId\"],\n  components: {\n    \"resource-item-list\": ResourceItemList,\n    \"resource-item-selector\": ResourceItemSelector,\n    \"resource-item-info\": ResourceItemInfo,\n    // \"comment-box\": CommentBox,\n    upload: Upload,\n    attachments: Attachments,\n    markdown: Markdown,\n    about: About\n  },\n  data() {\n    return {\n      initialized: false,\n      progress: 100,\n      searchTags: null,\n      isTouchDevice: isTouchDevice,\n      rawResourceItems: null,\n      selectedItems: null,\n      showMenu: false,\n      applications: [],\n      dialogWindowConfig: {\n        width: \"800px\",\n        height: \"670px\",\n        draggable: true,\n        fullscreen: false\n      },\n      dialogWindows: [],\n      selectedWindowsStack: [],\n      selectedDialogWindow: null,\n      selectedResourceItem: null,\n      infoDialogFullscreen: false,\n      screenWidth: 1000,\n      showInfoDialogMode: null,\n      viewerUrl: null,\n      infoDialogTitle: \"\",\n      infoMarkdownUrl: null,\n      infoMarkdownContent: null,\n      infoCommentBoxTitle: null,\n      selectedCategory: null,\n      displayMode: \"card\",\n      currentTags: [],\n      selectedPartner: null\n    };\n  },\n  mounted: async function() {\n    this.eventBus.$on(\"showResourceItemInfo\", this.showResourceItemInfo);\n    this.resourceId = this.resourceId && this.resourceId.toLowerCase();\n    // this.$buefy.dialog.alert({\n    //   title: \"Site under construction\",\n    //   message:\n    //     \"Please note that this site is under construction, some features are current missing.\",\n    //   confirmText: \"OK\"\n    // });\n    window.addEventListener(\"resize\", this.updateSize);\n    window.dispatchEvent(new Event(\"resize\"));\n    // select models as default\n    for (let list of this.resourceCategories) {\n      if (list.type === \"dataset\") {\n        this.selectedCategory = list;\n        break;\n      }\n    }\n\n    try {\n      // Fix the github oauth redirection\n      const searchParams = new URLSearchParams(window.location.search);\n      searchParams.forEach((value, key) => {\n        this.$route.query[key] = value;\n      });\n      const originalUrl =\n        window.location.pathname + \"#\" + window.location.hash.substr(1);\n      window.history.replaceState(null, \"\", originalUrl);\n\n      let repo = this.siteConfig.rdf_root_repo;\n      const query_repo = this.$route.query.repo;\n      let manifest_url = this.siteConfig.manifest_url;\n      if (query_repo) {\n        if (query_repo.startsWith(\"http\") || query_repo.startsWith(\"/\")) {\n          manifest_url = query_repo;\n        } else if (query_repo.split(\"/\").length === 2) {\n          manifest_url = `https://raw.githubusercontent.com/${query_repo}/master/manifest.bioimage.io.json`;\n        } else if (query_repo.split(\"/\").length === 3) {\n          manifest_url = `https://raw.githubusercontent.com/${query_repo}/manifest.bioimage.io.json`;\n        } else {\n          alert(\"Unsupported repo format.\");\n          throw \"Unsupported repo format.\";\n        }\n\n        repo = query_repo;\n      }\n      const self = this;\n      await this.$store.dispatch(\"fetchResourceItems\", {\n        repo,\n        manifest_url,\n        transform(item) {\n          return connectApps(self, item);\n        },\n        filter(item) {\n          if (self.$route.query.migration) {\n            return true;\n          } else {\n            if (\n              item.type === \"dataset\" &&\n              !(item.config && item.config._conceptdoi)\n            ) {\n              return false;\n            } else {\n              return true;\n            }\n          }\n        }\n      });\n\n      const tp = this.selectedCategory && this.selectedCategory.type;\n      this.selectedItems = tp\n        ? this.resourceItems.filter(m => m.type === tp)\n        : this.resourceItems;\n\n      // get id from component props\n      if (this.resourceId) {\n        if (this.resourceId.startsWith(\"zenodo:\")) {\n          const zenodoId = parseInt(this.resourceId.split(\":\")[1]);\n          const matchedItem = this.resourceItems.filter(\n            item =>\n              item.config &&\n              item.config._deposit &&\n              (item.config._deposit.id === zenodoId ||\n                item.config._deposit.conceptrecid === zenodoId)\n          )[0];\n          if (matchedItem) this.$route.query.id = matchedItem.id;\n          else {\n            alert(\n              \"Oops, resource item not found: \" +\n                this.resourceId +\n                \". Possibly because it has not been approved yet.\"\n            );\n          }\n        } else this.$route.query.id = this.resourceId;\n      }\n\n      this.updateViewByUrlQuery();\n      this.$forceUpdate();\n    } catch (e) {\n      console.error(e);\n      alert(`Oops! Failed to fetch manifest data. Details: ${e}.`);\n    }\n  },\n  computed: {\n    userId() {\n      return this.zenodoClient && this.zenodoClient.getUserId();\n    },\n    partners: function() {\n      return (\n        this.siteConfig.partners &&\n        this.siteConfig.partners.concat([\n          {\n            isJoinButton: true,\n            name: \"Join Community Partners\",\n            icon: \"/static/img/plus-sign.png\"\n          }\n        ])\n      );\n    },\n    resourceCategories: function() {\n      if (this.selectedPartner)\n        return this.siteConfig.resource_categories.filter(list =>\n          this.selectedPartner.resource_types.includes(list.type)\n        );\n      else return this.siteConfig.resource_categories;\n    },\n\n    tagCategories: function() {\n      if (this.selectedCategory) {\n        return this.selectedCategory && this.selectedCategory.tag_categories;\n      } else {\n        let combined = {};\n        for (let list of this.resourceCategories) {\n          combined = Object.assign(combined, list.tag_categories);\n        }\n        return combined;\n      }\n    },\n    ...mapState({\n      eventBus: state => state.eventBus,\n      allApps: state => state.allApps,\n      zenodoClient: state => state.zenodoClient,\n      siteConfig: state => state.siteConfig,\n      resourceItems: state => state.resourceItems\n    })\n  },\n  beforeDestroy() {\n    this.eventBus.$off(\"showResourceItemInfo\", this.showResourceItemInfo);\n    window.removeEventListener(\"resize\", this.updateSize);\n  },\n  methods: {\n    switchToSandbox() {\n      const query = Object.assign({}, this.$route.query);\n      query.sandbox = 1;\n      delete query.production;\n      this.$router.replace({ query: query });\n      this.$router.go(this.$router.currentRoute);\n    },\n    switchToProduction() {\n      const query = Object.assign({}, this.$route.query);\n      query.production = 1;\n      delete query.sandbox;\n      this.$router.replace({ query: query });\n      this.$router.go(this.$router.currentRoute);\n    },\n    goHome() {\n      this.selectedPartner = null;\n      this.searchTags = [];\n      const query = Object.assign({}, this.$route.query);\n      delete query.partner;\n      delete query.tags;\n      this.$router.push({ query: query }).catch(() => {});\n    },\n    switchPartner(partner) {\n      this.selectedPartner = partner;\n      this.selectedCategory = null; // select all\n      if (this.selectedPartner.default_type) {\n        for (let list of this.resourceCategories) {\n          if (list.type === this.selectedPartner.default_type) {\n            this.selectedCategory = list;\n            break;\n          }\n        }\n      }\n      this.$nextTick(() => {\n        this.searchTags = this.selectedPartner && this.selectedPartner.tags;\n      });\n      const query = Object.assign({}, this.$route.query);\n      query.partner = partner.id;\n      query.tags = partner.tags;\n      if (this.initialized)\n        this.$router.replace({ query: query }).catch(() => {});\n    },\n    async showStatsDialog(item) {\n      this.infoDialogTitle = \"Statistics for \" + item.name;\n      this.showInfoDialogMode = \"markdown\";\n      await updateFullRDF(item);\n      this.infoCommentBoxTitle = null;\n      if (!item.stats) this.infoMarkdownContent = `No stats info available.`;\n      else {\n        let statsText = \"\";\n        for (let k of Object.keys(item.stats)) {\n          statsText += `\\n * ${titleCase(k)}: ${item.stats[k]}`;\n        }\n        this.infoMarkdownContent = `# Statistics for ${item.name}` + statsText;\n        this.infoMarkdownContent +=\n          \"\\n\\n[More info on how stats are collected](https://help.zenodo.org/#statistics)\";\n      }\n\n      if (this.screenWidth < 700) this.infoDialogFullscreen = true;\n      this.$modal.show(\"info-dialog\");\n    },\n    async showAttachmentsDialog(item, focus) {\n      await updateFullRDF(item);\n      this.infoDialogTitle = focus\n        ? item.name + \": \" + focus\n        : item.name + \": Attachments\";\n      this.selectedResourceItem = item;\n      this.selectedResourceItem._focus = focus;\n      this.showInfoDialogMode = \"attachments\";\n      if (this.screenWidth < 700) this.infoDialogFullscreen = true;\n      this.$modal.show(\"info-dialog\");\n    },\n    removePartner() {\n      if (this.selectedPartner) {\n        this.selectedPartner = null;\n        this.updateQueryTags(this.searchTags);\n      }\n    },\n    updateQueryTags(newTags) {\n      if (!this.initialized) {\n        return;\n      }\n      this.searchTags = newTags;\n      if (newTags) {\n        if (newTags.length > 0) {\n          this.currentTags = newTags;\n        } else {\n          this.currentTags = null;\n        }\n      }\n\n      const query = Object.assign({}, this.$route.query);\n      if (this.selectedCategory) {\n        // remove the default type in the query if that's the only query\n        if (\n          this.selectedCategory.type === \"model\" &&\n          Object.keys(query).length <= 1\n        )\n          delete query.type;\n        else {\n          query.type = this.selectedCategory.type;\n        }\n      } else {\n        query.type = \"all\";\n      }\n\n      if (this.currentTags) {\n        query.tags = this.currentTags.join(\",\");\n      } else {\n        delete query.tags;\n      }\n\n      if (!this.selectedPartner) {\n        delete query.partner;\n      } else {\n        // if no additional tags added, then hide the query from url\n        if (\n          this.selectedPartner.tags &&\n          JSON.stringify(this.selectedPartner.tags) ==\n            JSON.stringify(this.currentTags)\n        ) {\n          delete query.tags;\n        }\n      }\n      this.$router.replace({ query: query }).catch(() => {});\n    },\n    displayModeChanged(mode) {\n      this.displayMode = mode;\n    },\n    addWindow(w) {\n      if (this.selectedDialogWindow) {\n        this.selectedWindowsStack.push(this.selectedDialogWindow);\n      }\n      this.selectWindow(w);\n      this.dialogWindows.push(w);\n      if (this.screenWidth < 700) this.dialogWindowConfig.fullscreen = true;\n      this.$modal.show(\"window-modal-dialog\");\n      this.$forceUpdate();\n    },\n    selectWindow(w) {\n      if (w.closing) return;\n      this.selectedDialogWindow = w;\n    },\n    updateSize() {\n      debounce(() => {\n        this.screenWidth = window.innerWidth;\n        if (this.screenWidth < 700) this.infoDialogFullscreen = true;\n        this.$forceUpdate();\n      }, 250)();\n    },\n    showLoader(enable, cancelCallback) {\n      if (enable)\n        this.loadingComponent = this.$buefy.loading.open({\n          canCancel: true,\n          onCancel: () => {\n            if (cancelCallback) cancelCallback();\n          }\n        });\n      else {\n        if (this.loadingComponent) {\n          this.loadingComponent.close();\n          this.loadingComponent = null;\n        }\n      }\n    },\n    showAboutDialog() {\n      this.showInfoDialogMode = \"about\";\n      this.infoDialogTitle = \"About\";\n      if (this.screenWidth < 700) this.infoDialogFullscreen = true;\n      this.$modal.show(\"info-dialog\");\n      const query = Object.assign({}, this.$route.query);\n      query.show = \"about\";\n      if (this.initialized)\n        this.$router.replace({ query: query }).catch(() => {});\n    },\n    showUploadDialog() {\n      this.infoDialogTitle = `Uploading data to ${this.siteConfig.site_name}`;\n      this.showInfoDialogMode = \"upload\";\n      this.currentDepositionId = null;\n      if (this.screenWidth < 700) this.infoDialogFullscreen = true;\n      this.$modal.show(\"info-dialog\");\n      const query = Object.assign({}, this.$route.query);\n      query.show = \"upload\";\n      if (this.initialized)\n        this.$router.replace({ query: query }).catch(() => {});\n    },\n    showEditDialog() {\n      this.infoDialogTitle = `Updating metadata`;\n      this.showInfoDialogMode = \"edit\";\n      // this.currentDepositionId = null\n      if (this.screenWidth < 700) this.infoDialogFullscreen = true;\n      this.$modal.show(\"info-dialog\");\n      const query = Object.assign({}, this.$route.query);\n      query.show = \"edit\";\n      if (this.initialized)\n        this.$router.replace({ query: query }).catch(() => {});\n    },\n    showAboutPartner(partner) {\n      if (partner.about_url.startsWith(\"http\")) {\n        if (partner.about_url.endsWith(\".md\")) {\n          this.infoDialogTitle = \"About \" + partner.name;\n          this.infoMarkdownUrl = partner.about_url;\n          this.showInfoDialogMode = \"markdown\";\n          if (this.screenWidth < 700) this.infoDialogFullscreen = true;\n          this.$modal.show(\"info-dialog\");\n        } else window.open(partner.about_url);\n      } else if (partner.description) {\n        this.$buefy.dialog.alert({\n          title: \"About \" + partner.name,\n          message: partner.description,\n          confirmText: \"OK\"\n        });\n      } else {\n        this.$buefy.dialog.alert({\n          title: \"Oops, no details about \" + partner.name,\n          message: \"This partner is did not provide any details!\",\n          confirmText: \"OK\"\n        });\n      }\n    },\n    showSource(item) {\n      if (\n        item.source.endsWith(\".yaml\") ||\n        item.source.endsWith(\".yml\") ||\n        item.source.endsWith(\".imjoy.html\")\n      ) {\n        this.infoDialogTitle = \"Source: \" + item.name;\n        this.infoMarkdownUrl = item.source;\n        this.infoCommentBoxTitle = item.name;\n        this.showInfoDialogMode = \"markdown\";\n        if (this.screenWidth < 700) this.infoDialogFullscreen = true;\n        this.$modal.show(\"info-dialog\");\n        this.$forceUpdate();\n      } else if (item.source.startsWith(\"http\")) {\n        window.open(item.source);\n      } else {\n        this.$buefy.dialog.alert({\n          title: \"Source: \" + item.name,\n          hasIcon: true,\n          icon: \"code-tags\",\n          message: item.source,\n          confirmText: \"OK\"\n        });\n      }\n    },\n    async showResourceItemInfo(item, focus) {\n      this.$router.push({\n        name: \"ResourceItemInfo\",\n        params: { resourceId: item.id }\n      });\n      await updateFullRDF(item);\n      this.showInfoDialogMode = \"item\";\n      item._focus = focus;\n      this.selectedResourceItem = item;\n      this.infoDialogTitle = this.selectedResourceItem.name;\n      this.infoDialogFullscreen = false;\n      this.$modal.show(\"info-dialog\");\n      if (item.id && !window.location.href.includes(\"#/r/\")) {\n        const query = Object.assign({}, this.$route.query);\n        query.id = item.id;\n        this.$router.replace({ query: query }).catch(() => {});\n      }\n    },\n    updateStatus(status) {\n      if (status.loading === true) this.showMessage(\"Loading...\");\n      if (status.loading === false) this.showMessage(\"Loading done.\");\n    },\n    closeInfoWindow() {\n      this.selectedResourceItem = null;\n      this.showInfoDialogMode = null;\n      this.infoMarkdownUrl = null;\n      this.infoMarkdownContent = null;\n      this.infoCommentBoxTitle = null;\n      this.$modal.hide(\"info-dialog\");\n      const query = Object.assign({}, this.$route.query);\n      delete query.id;\n      delete query.show;\n      this.$router.replace({ query: query }).catch(() => {});\n    },\n    maximizeInfoWindow() {\n      this.infoDialogFullscreen = !this.infoDialogFullscreen;\n    },\n    closeDialogWindow(w) {\n      if (this.selectedDialogWindow.id !== w.id) {\n        console.warn(\"ignore close window: \" + w.id);\n        return;\n      }\n      const idx = this.dialogWindows.indexOf(w);\n      if (idx >= 0) this.dialogWindows.splice(idx, 1);\n      this.selectedDialogWindow = this.selectedWindowsStack.pop();\n      if (!this.selectedDialogWindow) this.$modal.hide(\"window-modal-dialog\");\n    },\n    minimizeDialogWindow() {\n      this.$modal.hide(\"window-modal-dialog\");\n    },\n    maximizeDialogWindow() {\n      this.dialogWindowConfig.fullscreen = !this.dialogWindowConfig.fullscreen;\n    },\n    enter() {\n      const top =\n        window.pageYOffset +\n        this.$refs.search_anchor.getBoundingClientRect().top;\n      window.scrollTo({ top: top - 100, behavior: \"smooth\", block: \"start\" });\n    },\n    updateResourceItemList(models) {\n      // if (this.initialized && models.length <= 0) {\n      //   this.showMessage(\"No item found.\");\n      // }\n      this.selectedItems = models;\n    },\n    updateViewByUrlQuery() {\n      let hasQuery = false;\n      if (this.$route.query.show) {\n        if (this.$route.query.show === \"about\") {\n          this.showAboutDialog();\n        } else if (this.$route.query.show === \"upload\") {\n          this.showUploadDialog();\n        }\n      }\n      if (this.$route.query.id) {\n        const m = this.resourceItems.filter(\n          item => item.id === this.$route.query.id\n        )[0];\n        if (m) {\n          this.showResourceItemInfo(m);\n          hasQuery = true;\n        } else {\n          alert(\n            \"Oops, resource item not found: \" +\n              this.$route.query.id +\n              \". Possibly because it has not been approved yet.\"\n          );\n        }\n      }\n\n      if (this.$route.query.tags) {\n        let tags = null;\n        if (typeof this.$route.query.tags === \"string\")\n          tags = this.$route.query.tags.split(\",\");\n        else tags = this.$route.query.tags;\n        setTimeout(() => {\n          this.searchTags = tags;\n        }, 0);\n        hasQuery = true;\n      }\n\n      if (this.$route.query.type) {\n        if (this.$route.query.type === \"all\") this.selectedCategory = null;\n        else\n          this.selectedCategory = this.resourceCategories.filter(\n            item => item.type === this.$route.query.type\n          )[0];\n\n        hasQuery = true;\n      }\n\n      if (this.$route.query.partner) {\n        if (this.siteConfig.partners) {\n          this.selectedPartner = this.siteConfig.partners.filter(\n            p => p.id === this.$route.query.partner\n          )[0];\n          if (this.selectedPartner) {\n            this.$nextTick(() => {\n              if (!this.searchTags) {\n                this.searchTags = this.selectedPartner.tags;\n              } else {\n                this.searchTags = this.searchTags.concat(\n                  this.selectedPartner.tags\n                );\n              }\n            });\n\n            hasQuery = false;\n          }\n        }\n      }\n      if (hasQuery) {\n        this.enter();\n      }\n      this.initialized = true;\n    },\n    showProgress(p) {\n      this.progress = p;\n      this.$forceUpdate();\n    },\n    showMessage(message, duration) {\n      duration = duration || 5000;\n      const data = {\n        message: message.slice(0, 200),\n        onAction: function() {},\n        actionText: \"Close\",\n        duration: duration,\n        queue: false\n      };\n      this.$buefy.snackbar.open(data);\n    },\n    showWindowDialog() {},\n    closeWindowDialog() {},\n    getLabelCount(label) {\n      return this.filteredModels.filter(models =>\n        models.allLabels.includes(label)\n      ).length;\n    },\n    getModelsCount() {\n      return this.filteredModels.length;\n    }\n  }\n};\n</script>\n\n<style>\n.modal-dialog-content {\n  max-height: calc(100vh - 40px);\n  overflow: auto;\n  min-height: 200px;\n}\n.pagination-list {\n  list-style: none;\n}\n.pagination {\n  width: 80%;\n}\n.modal-card-title {\n  font-size: 1.1rem;\n  line-height: 1;\n  overflow-wrap: break-word;\n  text-overflow: ellipsis;\n  width: 100%;\n}\n\n.navbar-item,\n.navbar-link {\n  font-size: 1.5rem;\n}\n\n.navbar-item:hover,\n.navbar-item:focus {\n  background: #a8d8ff !important;\n}\n\n.resource-item-card:hover {\n  transition: all 0.4s;\n  -webkit-transition: all 0.4s;\n  box-shadow: 0 10px 16px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n}\n\n.b-tooltip.is-primary:after {\n  background: #002e52 !important;\n  color: white;\n}\n.card-image {\n  max-height: 200px;\n}\n.vm--modal {\n  max-height: 100%;\n  max-width: 100%;\n}\n.dialog-header {\n  height: 40px;\n  font-size: 1.4rem;\n  cursor: move;\n  background-color: #002e52;\n  color: white;\n  text-align: center;\n  line-height: 40px;\n}\n.dialog-control-button {\n  cursor: pointer;\n  width: 34px !important;\n  min-width: 34px !important;\n  max-width: 34px !important;\n  height: 36px;\n  line-height: 30px;\n  padding-bottom: 7px;\n  border: 0px;\n  font-size: 2rem;\n  position: relative;\n  color: white;\n  top: 2px;\n  font-family: \"Lucida Console\", Monaco, monospace;\n}\n.dialog-control-button:focus {\n  outline: none;\n}\n\n.item-lists {\n  padding-bottom: 2px;\n  width: 110px;\n  display: inline-block;\n  margin: 10px;\n  text-align: center;\n  cursor: pointer;\n  font-size: 1.2em;\n  color: #006fcb;\n  border-bottom: 2px solid;\n  border-radius: 5px;\n}\n\n.item-lists:hover {\n  font-weight: 500;\n}\n\n.item-lists.active {\n  font-weight: 600;\n}\n.noselect {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.background-img {\n  position: absolute;\n  bottom: 142px;\n  right: 0px;\n  opacity: 0.8;\n  width: 55%;\n  transition: 0.9s ease;\n  max-height: 30%;\n  max-width: 100%;\n  object-fit: contain;\n}\n.hero:hover .background-img {\n  width: 45%;\n  transition: 0.4s ease;\n}\n.feature-list {\n  padding-left: 30px;\n  font-size: 1.5em;\n}\n.explore-btn {\n  font-size: 1.3rem;\n}\n.site-title {\n  color: white;\n  font-size: 2.2em;\n  padding-top: 10px;\n  padding-left: 4px;\n}\n.site-icon {\n  font-size: 3em;\n  margin-left: 10px;\n}\n.dialog-title {\n  font-size: 1.4rem;\n}\n@media screen and (max-width: 500px) {\n  .feature-list {\n    font-size: 1em;\n  }\n}\n\n@media screen and (max-height: 700px) {\n  .feature-list {\n    display: none;\n  }\n}\n@media screen and (max-width: 768px) {\n  .dialog-title {\n    font-size: 1.1rem;\n  }\n  .site-title {\n    font-size: 2em !important;\n  }\n\n  .site-icon {\n    font-size: 2.3em;\n  }\n  .title {\n    font-size: 1.8rem !important;\n  }\n  .subtitle {\n    font-size: 1.5rem !important;\n  }\n  .feature-list {\n    font-size: 1em !important;\n  }\n  .explore-btn {\n    font-size: 1.1rem !important;\n  }\n  .hide-on-small-screen {\n    display: none;\n  }\n}\n\n.hover-show {\n  opacity: 0;\n  transition: 0.3s ease;\n}\n\n.card:hover .hover-show {\n  opacity: 1;\n  transition: 0.3s ease;\n}\n\n.markdown-container {\n  padding: 20px;\n  overflow: auto;\n  overscroll-behavior: contain;\n  height: calc(100% - 40px);\n}\n\nhtml,\nbody {\n  overflow-x: hidden;\n}\nform {\n  max-width: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=301ca3a0&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"viewer\"},[_c('section',{staticClass:\"width-limited\"},[(!_vm.value || _vm.value.length <= 0)?_c('h1',{staticStyle:{\"text-align\":\"center\",\"color\":\"white\",\"font-size\":\"2rem\",\"margin-top\":\"20px\"}},[_vm._v(\" SMLM File Viewer \")]):_vm._e(),(!_vm.value || _vm.value.length <= 0)?_c('b-field',{staticStyle:{\"margin-top\":\"20px\",\"margin-left\":\"20px\",\"margin-right\":\"20px\"}},[_c('b-upload',{attrs:{\"multiple\":\"\",\"drag-drop\":\"\",\"expanded\":\"\"},on:{\"input\":function($event){return _vm.updateFiles($event)}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_c('section',{staticClass:\"section\"},[_c('div',{staticClass:\"content has-text-centered\"},[_c('b-icon',{attrs:{\"icon\":\"upload\",\"size\":\"is-large\"}}),_c('p',[_vm._v(\"Drag and drop files here\")]),_c('p',[_vm._v(\" Your data will stay locally in your browser, no data will be sent or uploaded to the server. \")]),_c('p',[_vm._v(\" For multi-channel image, drag the files for all the channels together. \")])],1)])])],1):_vm._e()],1),(!_vm.value || _vm.value.length <= 0)?_c('div',{staticClass:\"width-limited\",staticStyle:{\"margin\":\"20px\",\"padding\":\"20px\"}},[_c('br'),_vm._m(0),_vm._m(1)]):_vm._e(),(!_vm.value || _vm.value.length <= 0)?_vm._l((_vm.value),function(file,index){return _c('div',{key:index,staticClass:\"tag is-primary\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"id\":_vm.containerId + '-files'},on:{\"click\":function($event){return _vm.previewFile([file])}}},[_vm._v(\" \"+_vm._s(file.name.slice(0, 20) + (file.name.length > 20 ? \"...\" : \"\"))+\" \"),_c('button',{staticClass:\"delete is-small\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.removeFile(index)}}})])}):_vm._e(),_c('div',{staticClass:\"viewer-container\",attrs:{\"id\":_vm.containerId}})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\" You can load files with the following formats: \"),_c('a',{attrs:{\"href\":\"https://github.com/imodpasteur/smlm-file-format\",\"target\":\"_blank\"}},[_vm._v(\"SMLM(.smlm)\")]),_vm._v(\", ThunderSTORM(.csv/.xls), RapidSTROM, ZEISS(ELYRA), Nikon NSTORM(txt). \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\" If you have other file format which is not supported yet, please \"),_c('a',{attrs:{\"href\":\"https://www.dropbox.com/request/IyZ7HkzHUpB0t5Mkp46l\",\"target\":\"_blank\"}},[_vm._v(\"upload a sample file\")]),_vm._v(\", and \"),_c('a',{attrs:{\"href\":\"https://oeway.typeform.com/to/rdkPmd\",\"target\":\"_blank\"}},[_vm._v(\"send us a message\")]),_vm._v(\" to describe your file format, we will try to support your file format. \")])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"viewer\">\n    <section class=\"width-limited\">\n      <h1\n        v-if=\"!value || value.length <= 0\"\n        style=\"    text-align: center;\n    color: white;\n    font-size: 2rem;\n    margin-top: 20px;\"\n      >\n        SMLM File Viewer\n      </h1>\n      <b-field\n        v-if=\"!value || value.length <= 0\"\n        style=\"margin-top: 20px; margin-left: 20px; margin-right: 20px;\"\n      >\n        <b-upload\n          v-model=\"value\"\n          @input=\"updateFiles($event)\"\n          multiple\n          drag-drop\n          expanded\n        >\n          <section class=\"section\">\n            <div class=\"content has-text-centered\">\n              <b-icon icon=\"upload\" size=\"is-large\"></b-icon>\n\n              <p>Drag and drop files here</p>\n              <p>\n                Your data will stay locally in your browser, no data will be\n                sent or uploaded to the server.\n              </p>\n              <p>\n                For multi-channel image, drag the files for all the channels\n                together.\n              </p>\n            </div>\n          </section>\n        </b-upload>\n      </b-field>\n\n      <!-- <label class=\"label\" v-if=\"viewer\"\n          >Take screenshots for the cover</label\n        >\n        <div\n          v-if=\"viewer || (screenshots && screenshots.length > 0)\"\n          class=\"snapshot-container\"\n        >\n          <div v-for=\"(screenshot, i) in screenshots\" :key=\"i\" class=\"item\">\n            <b-button\n              size=\"is-small\"\n              class=\"close-button\"\n              icon-left=\"close\"\n              v-if=\"!screenshot.image.startsWith('http')\"\n              @click=\"removeScreenshot(i)\"\n            >\n              Remove\n            </b-button>\n            <img class=\"image\" :src=\"screenshot.image\" alt=\"Screenshot\" />\n          </div>\n          <a\n            v-if=\"viewer && viewer.captureImage\"\n            @click=\"capture\"\n            style=\"text-align: center;\"\n          >\n            <img\n              class=\"image\"\n              style=\"width:60px;margin-left:50px;margin-right: 50px;\"\n              src=\"static/img/add.png\"\n              alt=\"Add button\"\n            />\n            Take Screenshot\n          </a>\n        </div> -->\n    </section>\n    <div\n      v-if=\"!value || value.length <= 0\"\n      style=\"margin:20px;padding:20px;\"\n      class=\"width-limited\"\n    >\n      <br />\n      <p>\n        You can load files with the following formats:\n        <a\n          href=\"https://github.com/imodpasteur/smlm-file-format\"\n          target=\"_blank\"\n          >SMLM(.smlm)</a\n        >, ThunderSTORM(.csv/.xls), RapidSTROM, ZEISS(ELYRA), Nikon NSTORM(txt).\n      </p>\n      <p>\n        If you have other file format which is not supported yet, please\n        <a\n          href=\"https://www.dropbox.com/request/IyZ7HkzHUpB0t5Mkp46l\"\n          target=\"_blank\"\n          >upload a sample file</a\n        >, and\n        <a href=\"https://oeway.typeform.com/to/rdkPmd\" target=\"_blank\"\n          >send us a message</a\n        >\n        to describe your file format, we will try to support your file format.\n      </p>\n    </div>\n    <template v-if=\"!value || value.length <= 0\">\n      <div\n        :id=\"containerId + '-files'\"\n        v-for=\"(file, index) in value\"\n        :key=\"index\"\n        class=\"tag is-primary\"\n        style=\"cursor: pointer\"\n        @click=\"previewFile([file])\"\n      >\n        {{ file.name.slice(0, 20) + (file.name.length > 20 ? \"...\" : \"\") }}\n        <button\n          class=\"delete is-small\"\n          type=\"button\"\n          @click.prevent=\"removeFile(index)\"\n        ></button>\n      </div>\n    </template>\n    <div class=\"viewer-container\" :id=\"containerId\"></div>\n  </div>\n</template>\n<script>\nimport { mapState } from \"vuex\";\nimport { fetchFile } from \"../utils\";\n\nexport default {\n  name: \"viewer\",\n  props: [\"resourceId\"],\n  data() {\n    return {\n      containerId:\n        \"preview-container-\" +\n        Math.random()\n          .toString(36)\n          .substr(2, 9),\n      viewer: null,\n      value: undefined,\n      fileCache: {},\n      currentFiles: null\n    };\n  },\n  mounted() {\n    this.init();\n  },\n  computed: {\n    ...mapState({\n      imjoyReady: state => state.imjoyReady,\n      imjoy: state => state.imjoy,\n      siteConfig: state => state.siteConfig,\n      loadedUrl: state => state.loadedUrl,\n      resourceItems: state => state.resourceItems\n    })\n  },\n  created() {\n    this.resourceId = this.resourceId && this.resourceId.toLowerCase();\n    this.value = [];\n    this.views = [];\n    this.commitValue();\n  },\n  methods: {\n    commitValue() {\n      this.value.views = this.views;\n      this.$emit(\"input\", this.value);\n      // if(!this.value || this.value.length<=0){\n      //   this.$store.dispatch(\"toggleNavbar\", true);\n      // }\n      // else{\n      //   this.$store.dispatch(\"toggleNavbar\", false);\n      // }\n    },\n    // removeScreenshot(index) {\n    //   this.views.splice(index, 1);\n    //   // this.selectedScreenshot = this.views.length-1;\n    //   this.commitValue();\n    // },\n    async capture() {\n      const img = await this.viewer.captureImage();\n      const config = await this.viewer.getViewConfig();\n      config[\"_file\"] = this.currentFiles && this.currentFiles.map(f => f.name);\n      if (this.views.filter(s => s.image === img).length <= 0)\n        this.views.push({ config, image: img });\n      else\n        this.imjoy.api.showMessage(\n          \"Please change the image to another view and try again.\"\n        );\n      // this.selectedScreenshot = this.views.length-1;\n      this.commitValue();\n    },\n    removeFile(index) {\n      const file = this.value[index];\n      // TODO remove one only?\n      if (this.currentFiles.includes(file)) this.currentFile = null;\n      this.value.splice(index, 1);\n      this.$forceUpdate();\n    },\n    async updateFiles(files) {\n      try {\n        await this.previewFile(files);\n      } catch (e) {\n        await this.imjoy.api.showMessage(`Failed to preview file: ${e}`);\n        this.value = [];\n        console.error(e);\n      }\n      this.commitValue();\n    },\n    trimEllip(str, length) {\n      if (!str) return str;\n      if (typeof str === \"object\") str = str.toString();\n      return str.length > length ? str.substring(0, length) + \"...\" : str;\n    },\n    async previewFile(files) {\n      const api = this.imjoy.api;\n      const loadingComponent = this.$buefy.loading.open({\n        container\n      });\n      const container = document.getElementById(this.containerId);\n      for (let file of files) {\n        // fetch remote file\n        if (file.type === \"remote\") {\n          try {\n            if (!this.fileCache[file.url]) {\n              const newFile = await fetchFile(\n                file.url,\n                file.name,\n                this.imjoy && this.imjoy.api.showMessage\n              );\n              file = newFile;\n              // replace the file with the actual one\n              this.fileCache[file.url] = file;\n            } else {\n              file = this.fileCache[file.url];\n            }\n          } catch (e) {\n            console.error(e);\n            alert(`Failed to fetch file from ${file.url}: ${e}`);\n            return;\n          }\n        }\n      }\n\n      this.currentFiles = files;\n      let smlmFiles = [];\n      const smlmPlugin = await api.getPlugin(\"SMLM File IO\");\n      for (let file of files) {\n        // display SMLM file\n        try {\n          const smlm = await smlmPlugin.load(file);\n          smlmFiles = smlmFiles.concat(smlm.files);\n          container.style.height = \"calc( 100vh - 72px)\";\n        } catch (e) {\n          console.error(e);\n          throw e;\n        } finally {\n          loadingComponent.close();\n        }\n      }\n      const baseUrl = window.location.origin + window.location.pathname;\n      this.viewer = await api.createWindow({\n        name: \"Fairy Dust\",\n        src: baseUrl + \"FairyDust.imjoy.html\",\n        window_id: this.containerId,\n        data: smlmFiles\n      });\n    },\n    async init() {\n      const loadingComponent = this.$buefy.loading.open();\n      if (!this.resourceId) {\n        this.imjoyReady\n          .then(imjoy => {\n            const api = imjoy.api;\n            const baseUrl = window.location.origin + window.location.pathname;\n            api.getPlugin(baseUrl + \"SMLM-File-IO.imjoy.html\");\n          })\n          .finally(() => {\n            loadingComponent.close();\n          });\n\n        return;\n      }\n      if (!this.loadedUrl) {\n        const repo = this.siteConfig.rdf_root_repo;\n        let manifest_url = this.siteConfig.manifest_url;\n        await this.$store.dispatch(\"fetchResourceItems\", {\n          repo,\n          manifest_url\n        });\n      }\n\n      const resourceItem = this.resourceItems.filter(item => {\n        return item.id === this.resourceId;\n      })[0];\n      if (!resourceItem) {\n        alert(\"Item not found: \" + this.resourceId);\n        return;\n      }\n\n      if (resourceItem.download_url) {\n        try {\n          const file = await fetchFile(\n            resourceItem.download_url,\n            resourceItem.name,\n            this.imjoy && this.imjoy.api.showMessage\n          );\n          const api = this.imjoy.api;\n          const baseUrl = window.location.origin + window.location.pathname;\n          await api\n            .getPlugin(baseUrl + \"SMLM-File-IO.imjoy.html\")\n            .then(async () => {\n              await this.previewFile([file]);\n            });\n        } catch (e) {\n          alert(\"Failed to download file: \" + resourceItem.download_url);\n\n          console.error(e);\n          throw e;\n        } finally {\n          loadingComponent.close();\n        }\n      }\n      console.log(resourceItem);\n    }\n  }\n};\n</script>\n<style scoped>\n.dataset {\n  height: 100%;\n}\n.p-1 {\n  padding: 1em;\n}\n.sidebar-page {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  min-height: 100%;\n}\n.sidebar-layout {\n  display: flex;\n  flex-direction: row;\n  min-height: 100%;\n}\n.sidebar-content {\n  height: 100% !important;\n}\n.viewer-container {\n  width: 100%;\n}\n.viewer {\n  color: #9e9a9a;\n  background-color: black;\n  height: 100vh;\n}\n.width-limited {\n  max-width: 1080px;\n  margin-left: auto !important;\n  margin-right: auto !important;\n  float: none !important;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Viewer.vue?vue&type=template&id=6adda98c&scoped=true&\"\nimport script from \"./Viewer.vue?vue&type=script&lang=js&\"\nexport * from \"./Viewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Viewer.vue?vue&type=style&index=0&id=6adda98c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6adda98c\",\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport Home from \"../views/Home.vue\";\nimport ResourceItemList from \"../components/ResourceItemList.vue\";\nimport Upload from \"../components/Upload.vue\";\n// import ResourceItemInfo from \"../components/ResourceItemInfo.vue\";\nimport Viewer from \"../components/Viewer.vue\";\n\nVue.use(VueRouter);\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"Home\",\n    component: Home\n  },\n  {\n    path: \"/r/:resourceId+\",\n    name: \"ResourceItemInfo\",\n    component: Home,\n    props: true\n  },\n  {\n    path: \"/upload\",\n    name: \"Upload\",\n    component: Upload\n  },\n  {\n    path: \"/update/:updateDepositId+\",\n    name: \"Update\",\n    component: Upload,\n    props: true\n  },\n  {\n    path: \"/viewer\",\n    name: \"Viewer\",\n    component: Viewer\n  },\n  {\n    path: \"/app\",\n    name: \"App\",\n    component: ResourceItemList\n  },\n  {\n    path: \"/about\",\n    name: \"About\",\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () =>\n      import(/* webpackChunkName: \"about\" */ \"../views/About.vue\")\n  }\n];\n\nconst router = new VueRouter({\n  base: process.env.BASE_URL,\n  routes\n});\n\nexport default router;\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport \"./registerServiceWorker\";\nimport router from \"./router\";\nimport Buefy from \"buefy\";\nimport \"./buefy.css\";\nimport { init, store } from \"./store\";\nimport \"./bulmaswatch.min.css\";\nimport vmodal from \"vue-js-modal\";\nimport \"@mdi/font/css/materialdesignicons.css\";\n\nimport { extend, ValidationProvider } from \"vee-validate\";\nimport * as rules from \"vee-validate/dist/rules\";\nimport { messages } from \"vee-validate/dist/locale/en.json\";\nVue.component(\"ValidationProvider\", ValidationProvider);\n\nObject.keys(rules).forEach(rule => {\n  extend(rule, {\n    ...rules[rule],\n    message: messages[rule]\n  });\n});\n\nVue.use(vmodal);\n\nVue.use(Buefy);\n\nVue.config.productionTip = false;\n\nnew Vue({\n  router,\n  render: h => h(App),\n  store,\n  created() {\n    init();\n  }\n}).$mount(\"#app\");\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&id=72e02d3c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=style&index=0&id=72e02d3c&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemCard.vue?vue&type=style&index=0&id=119a5379&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemCard.vue?vue&type=style&index=0&id=119a5379&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemSelector.vue?vue&type=style&index=0&id=3b5b4ef4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemSelector.vue?vue&type=style&index=0&id=3b5b4ef4&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppIcons.vue?vue&type=style&index=0&id=3c22306a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppIcons.vue?vue&type=style&index=0&id=3c22306a&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Attachments.vue?vue&type=style&index=0&id=772bbdbc&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Attachments.vue?vue&type=style&index=0&id=772bbdbc&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AuthorInputField.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AuthorInputField.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"markdown-body\"},[_c('b-loading',{attrs:{\"is-full-page\":false,\"active\":_vm.loading,\"can-cancel\":false},on:{\"update:active\":function($event){_vm.loading=$event}}}),(_vm.docs)?_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.docs)}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"markdown-body\">\n    <b-loading\n      :is-full-page=\"false\"\n      :active.sync=\"loading\"\n      :can-cancel=\"false\"\n    ></b-loading>\n    <div v-if=\"docs\" v-html=\"docs\"></div>\n  </div>\n</template>\n\n<script>\nimport \"../../node_modules/github-markdown-css/github-markdown.css\";\nimport \"../../node_modules/highlight.js/styles/github.css\";\nimport marked from \"marked\";\nimport DOMPurify from \"dompurify\";\nimport hljs from \"highlight.js\";\n\nimport { replaceAllRelByAbs } from \"../utils\";\n\nexport default {\n  name: \"Markdown\",\n  props: {\n    baseUrl: {\n      type: String,\n      default: \"\"\n    },\n    content: {\n      type: String,\n      default: null\n    },\n    url: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      docs: null,\n      loading: false\n    };\n  },\n  created() {\n    //open link in a new tab\n    const renderer = new marked.Renderer();\n    renderer.link = function(href, title, text) {\n      var link = marked.Renderer.prototype.link.call(this, href, title, text);\n      return link.replace(\"<a\", \"<a target='_blank' \");\n    };\n    renderer.image = function(href, title, text) {\n      var link = marked.Renderer.prototype.image.call(this, href, title, text);\n      return link.replace(\"/./\", \"/\");\n    };\n    marked.setOptions({\n      renderer: renderer,\n      highlight: function(code) {\n        return hljs.highlightAuto(code).value;\n      }\n    });\n    DOMPurify.addHook(\"afterSanitizeAttributes\", function(node) {\n      // set all elements owning target to target=_blank\n      if (\"target\" in node) {\n        node.setAttribute(\"target\", \"_blank\");\n        // prevent https://www.owasp.org/index.php/Reverse_Tabnabbing\n        node.setAttribute(\"rel\", \"noopener noreferrer\");\n      }\n    });\n  },\n  watch: {\n    content: function(newContent) {\n      this.docs = DOMPurify.sanitize(\n        replaceAllRelByAbs(marked(newContent), this.baseUrl)\n      );\n      this.loading = false;\n    },\n    baseUrl: function(newBaseUrl) {\n      this.baseUrl = newBaseUrl;\n\n      this.docs = DOMPurify.sanitize(\n        replaceAllRelByAbs(marked(this.content), this.baseUrl)\n      );\n    },\n    url: function(newUrl) {\n      if (!newUrl) return;\n      this.showDocsUrl(newUrl);\n    }\n  },\n  mounted() {\n    marked.setOptions({\n      baseUrl: this.baseUrl\n    });\n    if (this.content)\n      this.docs = DOMPurify.sanitize(\n        replaceAllRelByAbs(marked(this.content), this.baseUrl)\n      );\n    else if (this.url) {\n      this.showDocsUrl(this.url);\n    }\n  },\n  methods: {\n    async showDocsUrl(url) {\n      this.loading = true;\n      this.docs = \"@loading...\";\n      try {\n        const response = await fetch(url);\n        if (response.status == 200) {\n          const content = await response.text();\n          if (url.endsWith(\".md\")) {\n            const temp = url.split(\"/\");\n            const baseUrl = temp.slice(0, temp.length - 1).join(\"/\");\n\n            this.docs = DOMPurify.sanitize(\n              replaceAllRelByAbs(marked(content), baseUrl)\n            );\n            this.loading = false;\n          } else {\n            this.docs = DOMPurify.sanitize(\n              marked(\"```\\n\" + content + \"\\n```\\n\")\n            );\n          }\n        } else {\n          this.docs = \"Oops! Failed to load from \" + url;\n        }\n      } catch (e) {\n        this.docs = \"Oops! Failed to load from \" + url;\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};\n</script>\n<style scoped></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Markdown.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Markdown.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Markdown.vue?vue&type=template&id=3dae94c1&scoped=true&\"\nimport script from \"./Markdown.vue?vue&type=script&lang=js&\"\nexport * from \"./Markdown.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3dae94c1\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=style&index=0&id=6adda98c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=style&index=0&id=6adda98c&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\",style:({ 'background-image': 'url(' + _vm.siteConfig.background_image + ')' })},[_c('p',{staticClass:\"version-number\"},[_vm._v(\"v\"+_vm._s(_vm.version))]),_c('section',{staticClass:\"hero\"},[_c('markdown',{attrs:{\"url\":\"https://raw.githubusercontent.com/imodpasteur/ShareLoc.XYZ/main/README.md\"}})],1),_c('br'),(_vm.siteConfig.footer)?_c('div',{staticClass:\"columns is-mobile is-centered\"},_vm._l((_vm.siteConfig.footer),function(item){return _c('div',{key:item.label,staticClass:\"column is-one-quarter\",staticStyle:{\"text-align\":\"center\"}},[_c('b-tooltip',{attrs:{\"label\":item.tooltip,\"position\":\"is-top\"}},[_c('a',{attrs:{\"href\":item.url,\"target\":\"_blank\"}},[_c('figure',[_c('img',{staticStyle:{\"max-height\":\"55px\"},attrs:{\"src\":item.logo}}),_c('figcaption',{staticClass:\"hide-on-small-screen\"},[_vm._v(\" \"+_vm._s(item.label)+\" \")])])])])],1)}),0):_vm._e(),(_vm.siteConfig.footnote)?_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('p',[_vm._v(_vm._s(_vm.siteConfig.footnote))])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"about\"\n    :style=\"{ 'background-image': 'url(' + siteConfig.background_image + ')' }\"\n  >\n    <p class=\"version-number\">v{{ version }}</p>\n    <section class=\"hero\">\n      <markdown\n        url=\"https://raw.githubusercontent.com/imodpasteur/ShareLoc.XYZ/main/README.md\"\n      ></markdown>\n    </section>\n    <br />\n    <div class=\"columns is-mobile is-centered\" v-if=\"siteConfig.footer\">\n      <div\n        v-for=\"item in siteConfig.footer\"\n        :key=\"item.label\"\n        class=\"column is-one-quarter\"\n        style=\"text-align: center\"\n      >\n        <b-tooltip :label=\"item.tooltip\" position=\"is-top\"\n          ><a :href=\"item.url\" target=\"_blank\">\n            <figure>\n              <img :src=\"item.logo\" style=\"max-height: 55px;\" />\n              <figcaption class=\"hide-on-small-screen\">\n                {{ item.label }}\n              </figcaption>\n            </figure>\n          </a>\n        </b-tooltip>\n      </div>\n    </div>\n\n    <div style=\"text-align: center\" v-if=\"siteConfig.footnote\">\n      <p>{{ siteConfig.footnote }}</p>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapState } from \"vuex\";\nimport { version } from \"../../package.json\";\nimport Markdown from \"@/components/Markdown.vue\";\nexport default {\n  name: \"About\",\n  components: {\n    markdown: Markdown\n  },\n  computed: {\n    ...mapState({\n      siteConfig: state => state.siteConfig\n    })\n  },\n  data() {\n    return {\n      version\n    };\n  }\n};\n</script>\n<style scoped>\n.about {\n  background-repeat: no-repeat;\n  background-position: bottom;\n}\n.hero {\n  max-width: 90%;\n  width: 900px;\n  margin-left: auto;\n  margin-right: auto;\n}\n.background-img {\n  position: absolute;\n  bottom: 0px;\n  right: 0px;\n  width: 90%;\n  max-height: 50%;\n  max-width: 100%;\n  object-fit: contain;\n}\n.version-number {\n  text-align: right;\n  font-size: 20px !important;\n  margin: 30px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./About.vue?vue&type=template&id=72e02d3c&scoped=true&\"\nimport script from \"./About.vue?vue&type=script&lang=js&\"\nexport * from \"./About.vue?vue&type=script&lang=js&\"\nimport style0 from \"./About.vue?vue&type=style&index=0&id=72e02d3c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72e02d3c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemList.vue?vue&type=style&index=0&id=c6579262&lang=css&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceItemList.vue?vue&type=style&index=0&id=c6579262&lang=css&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CitationInputField.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CitationInputField.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}